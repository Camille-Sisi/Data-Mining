[["index.html", "DATA MINING Master Meci - Parcours PISE et CCESE - Option Data", " DATA MINING Master Meci - Parcours PISE et CCESE - Option Data Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité 2022-03-10 "],["00-Presentation.html", "Présentation À propos de ce document Prérequis Remerciements Licence", " Présentation À propos de ce document Ce document est la seconde version du cours de Data Mining dispensé aux étudiants de deuxième année de loption Data du master MECI parcours PISE et CCESE. Ce cours est partagé avec Claude Grasland, dont vous trouverez la partie de cours à ladresse suivante : https://ClaudeGrasland.github.io/DataMining1. Ce document est régulièrement corrigé et mis à jour. La version de référence est disponible en ligne à ladresse suivante : https://github.com/Camille-Sisi/Data-Mining. Pour toute suggestion ou correction, nhésitez pas à me contacter par mail. Prérequis Le seul prérequis pour suivre ce document est davoir installé R et RStudio sur votre ordinateur. Il sagit de deux logiciels libres, gratuits, téléchargeables en ligne et fonctionnant sous PC, Mac et Linux. Pour installer R, il suffit de se rendre sur une des pages suivantes1 : Installer R sous Windows Installer R sous Mac Pour installer RStudio, rendez-vous sur la page suivante et téléchargez la version adaptée à votre système : https://www.rstudio.com/products/rstudio/download/#download Remerciements Ce document a bénéficié de la relecture et des suggestions des étudiants qui en ont été les cobayes des premières versions. Ce document est généré par lextension bookdown de Yihui Xie et se base sur le template proposé par Julien Barnier pour introduire des exercices interactifs dans son cours de tidyverse. Licence Ce document est mis à disposition selon les termes de la Licence Creative Commons Attribution - Pas dUtilisation Commerciale - Partage dans les Mêmes Conditions 4.0 International. Licence Creative Commons Sous Linux, utilisez votre gestionnaire de packages habituel. "],["01-Jeu-de-donnees.html", "Section 1 Récupération du jeu de données sur une API", " Section 1 Récupération du jeu de données sur une API # On charge les librairies principales que l&#39;on va utiliser library(knitr) library(httr) library(jsonlite) library(tidyverse) library(gt) library(rstatix) library(janitor) On récupère le jeu de données sur lequel on va travailler au cours de cette séance sur le site de lopen data du Ministère de lenseignement supérieur et de la recherche : jai choisi ici de travailler sur les parcours et la réussite en licence des bacheliers nouvellement inscrits, la page présentant cette base est consultable ici. En allant dans longlet API, on peut récupérer ladresse à inscrire dans notre fonction GET. On récupère ensuite le contenu puis la base de données (cf. séance 1 de C. Grasland). get_url &lt;- GET(&quot;https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcours-et-reussite-des-bacheliers-en-licence&amp;q=&amp;rows=10000&amp;start=0&quot;) #liste content &lt;- fromJSON(rawToChar(get_url$content)) #liste ParcoursLic &lt;- content$records$fields La description sur le site nous donne le champ général et dautres informations sur les variables : le champ couvre lensemble des universités françaises, sauf luniversité de Nouvelle Calédonie ; les informations ne sont pas brutes dans la mesure où elles ont déjà été retravaillées ; nous navons pas, par conséquent, comme observations les individus inscrits et diplômés, mais des indicateurs déjà construits et donc plus ou moins agrégés. Plus précisément, on a en réalité deux types dinformations qui renvoient à deux champs différents : dabord sur le passage en deuxième année en un ou deux ans dont le champ des indicateurs est constitué des bacheliers 2014 inscrits en 2014-2015 en première année de licence (hors licence professionnelle) dans lenseignement supérieur public ; puis sur lobtention de la licence en trois ou quatre ans dont le champ des indicateurs est constitué des bacheliers 2012 inscrits en 2012-2013 en première année de licence dans lenseignement supérieur public. Dans les deux cas, les étudiants ayant pris une inscription parallèle en STS, DUT ou CPGE, sont exclus. Il faudra donc faire attention dans linterprétation des traitements statistiques que lon pourra faire de ces données. Lélément important est la base, cest-à-dire le dénominateur des indicateurs qui sont indiqués sur le site mentionné plus haut, cest cette variable quil faudra identifier et qui nous permettra de connaître les effectifs globaux des bacheliers inscrits selon lannée et ensuite par catégories. "],["02-Manipulation-base.html", "Section 2 Manipulation de la base 2.1 Format des données - WIDE ou LONG 2.2 Séparer les variables, séparer les données", " Section 2 Manipulation de la base On va regarder un peu à quoi ressemble la table de données téléchargée, quelles sont les variables, etc. ParcoursLic %&gt;% head() %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #yqoovcycgm .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #yqoovcycgm .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #yqoovcycgm .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #yqoovcycgm .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #yqoovcycgm .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #yqoovcycgm .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #yqoovcycgm .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #yqoovcycgm .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #yqoovcycgm .gt_column_spanner_outer:first-child { padding-left: 0; } #yqoovcycgm .gt_column_spanner_outer:last-child { padding-right: 0; } #yqoovcycgm .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #yqoovcycgm .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #yqoovcycgm .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #yqoovcycgm .gt_from_md > :first-child { margin-top: 0; } #yqoovcycgm .gt_from_md > :last-child { margin-bottom: 0; } #yqoovcycgm .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #yqoovcycgm .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #yqoovcycgm .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #yqoovcycgm .gt_row_group_first td { border-top-width: 2px; } #yqoovcycgm .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #yqoovcycgm .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #yqoovcycgm .gt_first_summary_row.thick { border-top-width: 2px; } #yqoovcycgm .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #yqoovcycgm .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #yqoovcycgm .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #yqoovcycgm .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #yqoovcycgm .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #yqoovcycgm .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #yqoovcycgm .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #yqoovcycgm .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #yqoovcycgm .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #yqoovcycgm .gt_left { text-align: left; } #yqoovcycgm .gt_center { text-align: center; } #yqoovcycgm .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #yqoovcycgm .gt_font_normal { font-weight: normal; } #yqoovcycgm .gt_font_bold { font-weight: bold; } #yqoovcycgm .gt_font_italic { font-style: italic; } #yqoovcycgm .gt_super { font-size: 65%; } #yqoovcycgm .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #yqoovcycgm .gt_asterisk { font-size: 100%; vertical-align: 0; } #yqoovcycgm .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #yqoovcycgm .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #yqoovcycgm .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } passage_en_l2_2_ans effectif_neobacheliers_passage sect_disciplinaire_lib sexe age_au_bac_lib passage_en_l2_1_2_ans serie_bac_lib age_au_bac gd_discipline cohorte_reussite gd_discipline_lib mention_bac_lib discipline reussite_3_ans reorientation_en_dut discipline_lib reussite_3_4_ans reorientation_en_dut_1_an effectif_neobacheliers_reussite redoublement_en_l1 passage_en_l2_1_an cohorte_passage reorientation_en_dut_2_ans sect_disciplinaire sexe_lib mention_bac serie_bac reussite_4_ans 0 1 Langues et littératures étrangères 1 En retard d'un an 0 BAC STMG R1 LLSH 2012 Lettres, langues et sciences humaines Inconnue 05 0 0 Langues 0 0 3 0 0 2014 0 23 Homme Q 4 0 0 10 Sociologie, démographie 1 En retard d'un an 0 BAC STMG R1 LLSH 2012 Lettres, langues et sciences humaines Passable deuxième groupe 06 0 1 Sciences humaines et sociales 1 1 16 4 0 2014 0 33 Homme P 4 1 1 3 Langues et littératures étrangères 2 En retard de plus d'un an 3 BAC technologique hors STMG R2 LLSH 2012 Lettres, langues et sciences humaines Inconnue 05 1 0 Langues 1 0 4 1 2 2014 0 23 Femme Q 5 0 NA NA Langues et littératures étrangères 1 Non pris en compte NA BAC professionnel R4 LLSH 2012 Lettres, langues et sciences humaines Très bien 05 1 NA Langues 1 NA 1 NA NA 2014 NA 23 Homme A 6 0 1 21 Sociologie, démographie 2 En retard de plus d'un an 2 BAC technologique hors STMG R2 LLSH 2012 Lettres, langues et sciences humaines Passable deuxième groupe 06 1 1 Sciences humaines et sociales 2 1 29 12 1 2014 0 33 Femme P 5 1 0 9 Sciences de l'éducation 1 A l'heure ou en avance 9 BAC ES R0 LLSH 2012 Lettres, langues et sciences humaines Assez bien 06 NA 0 Sciences humaines et sociales NA 0 NA 0 9 2014 0 34 Homme C 2 NA ParcoursLic %&gt;% glimpse() #Note pour étudiants : en langage R de base, fonction équivalente &#39;str()&#39; Rows: 5,508 Columns: 28 $ passage_en_l2_2_ans &lt;dbl&gt; 0, 0, 1, NA, 1, 0, 20, 1, 0, 0, 0, 1, ~ $ effectif_neobacheliers_passage &lt;dbl&gt; 1, 10, 3, NA, 21, 9, 144, 10, 3, 5, 1,~ $ sect_disciplinaire_lib &lt;chr&gt; &quot;Langues et littératures étrangères&quot;, ~ $ sexe &lt;int&gt; 1, 1, 2, 1, 2, 1, 2, 2, 1, 2, 1, 2, 2,~ $ age_au_bac_lib &lt;chr&gt; &quot;En retard d&#39;un an&quot;, &quot;En retard d&#39;un a~ $ passage_en_l2_1_2_ans &lt;dbl&gt; 0, 0, 3, NA, 2, 9, 86, 4, 1, 0, 1, 8, ~ $ serie_bac_lib &lt;chr&gt; &quot;BAC STMG&quot;, &quot;BAC STMG&quot;, &quot;BAC technolog~ $ age_au_bac &lt;chr&gt; &quot;R1&quot;, &quot;R1&quot;, &quot;R2&quot;, &quot;R4&quot;, &quot;R2&quot;, &quot;R0&quot;, &quot;R~ $ gd_discipline &lt;chr&gt; &quot;LLSH&quot;, &quot;LLSH&quot;, &quot;LLSH&quot;, &quot;LLSH&quot;, &quot;LLSH&quot;~ $ cohorte_reussite &lt;chr&gt; &quot;2012&quot;, &quot;2012&quot;, &quot;2012&quot;, &quot;2012&quot;, &quot;2012&quot;~ $ gd_discipline_lib &lt;chr&gt; &quot;Lettres, langues et sciences humaines~ $ mention_bac_lib &lt;chr&gt; &quot;Inconnue&quot;, &quot;Passable deuxième groupe&quot;~ $ discipline &lt;chr&gt; &quot;05&quot;, &quot;06&quot;, &quot;05&quot;, &quot;05&quot;, &quot;06&quot;, &quot;06&quot;, &quot;0~ $ reussite_3_ans &lt;dbl&gt; 0, 0, 1, 1, 1, NA, 48, 2, 0, 1, NA, 4,~ $ reorientation_en_dut &lt;dbl&gt; 0, 1, 0, NA, 1, 0, 3, 0, 0, 0, 0, 0, 0~ $ discipline_lib &lt;chr&gt; &quot;Langues&quot;, &quot;Sciences humaines et socia~ $ reussite_3_4_ans &lt;dbl&gt; 0, 1, 1, 1, 2, NA, 86, 2, 0, 1, NA, 9,~ $ reorientation_en_dut_1_an &lt;dbl&gt; 0, 1, 0, NA, 1, 0, 2, 0, 0, 0, 0, 0, 0~ $ effectif_neobacheliers_reussite &lt;dbl&gt; 3, 16, 4, 1, 29, NA, 206, 6, 2, 5, NA,~ $ redoublement_en_l1 &lt;dbl&gt; 0, 4, 1, NA, 12, 0, 39, 2, 0, 1, 0, 1,~ $ passage_en_l2_1_an &lt;dbl&gt; 0, 0, 2, NA, 1, 9, 66, 3, 1, 0, 1, 7, ~ $ cohorte_passage &lt;chr&gt; &quot;2014&quot;, &quot;2014&quot;, &quot;2014&quot;, &quot;2014&quot;, &quot;2014&quot;~ $ reorientation_en_dut_2_ans &lt;dbl&gt; 0, 0, 0, NA, 0, 0, 1, 0, 0, 0, 0, 0, 0~ $ sect_disciplinaire &lt;int&gt; 23, 33, 23, 23, 33, 34, 24, 24, 34, 34~ $ sexe_lib &lt;chr&gt; &quot;Homme&quot;, &quot;Homme&quot;, &quot;Femme&quot;, &quot;Homme&quot;, &quot;F~ $ mention_bac &lt;chr&gt; &quot;Q&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;A&quot;, &quot;P&quot;, &quot;C&quot;, &quot;D&quot;, &quot;Q&quot;~ $ serie_bac &lt;int&gt; 4, 4, 5, 6, 5, 2, 2, 2, 4, 5, 4, 1, 5,~ $ reussite_4_ans &lt;dbl&gt; 0, 1, 0, 0, 1, NA, 38, 0, 0, 0, NA, 5,~ On a donc 28 colonnes ou variables et 5 508 lignes ou observations. Les variables sont en format, soit dbl (double), soit int (interger) ou encore chr (character). On remarque que certaines variables donnent la même information mais sont codées en nombre, ou en libellé : cest le cas de la variable sexe (sexe et sexe_lib), mais aussi de la série au bac, des grandes disciplines de la licence, etc. On a également 2 variables dont la modalité semble toujours la même - cohorte_passage et cohorte_reussite, on le vérifiera lorsquon travaillera spécifiquement sur les variables. Enfin, on voit également des NA, ce qui signifie que certaines variables ont des valeurs manquantes. 2.1 Format des données - WIDE ou LONG De manière plus générale, quel est le format de nos données ici ? Lobsevation de la table de données nous montre quon a une répétition de modalités pour toutes les variables catégorielles, on na donc pas une ligne par observation, car en réalité on a des données micro-agrégées, on est donc plutôt dans un format long. La question du format de la base est importante, on distingue généralement le format wide du format long : le premier renvoie au cas où chaque ligne correspond a un et un seul individu et toutes les informations le concernant sont en colonnes (ce qui peut augmenter rapidement le nombre de colonnes, cest lexemple dune information que lon a sur plusieurs années, chaque colonne correspondra à linformation de lannée en question) ; le second, au contraire, multiplie les lignes pour un seul individu mais il y a alors moins de colonnes (si lon reprend lexemple précédent, il y aura une colonne indiquant lannée et une colonne contenant linformation). Le package tidyverse contient deux fonctions qui permettent de passer dun format à un autre : pivot_longer() et pivot_wider() présentés en détails ici. Je vous présente un rapide exemple ci-dessous de la fonction pivot_wider(), mais nous aurons très probablement loccasion de les utiliser au cours de ce semestre. # On sélectionne seulement 2 variables catégorielles et une variable quanti avec # la fonction select() # Dans la fonction pivot_wider(), il est nécessaire de préciser les arguments # `values_fill=&#39; et &quot;values_fn&#39; pour que R sache quoi faire des différentes # valeurs répétées : les sommer ? en faire la moyenne ? Etc. Ici, logiquement, # on fait la somme. # Dernière chose : comme il y a des valeurs manquantes, il faut mettre un filtre # avant précisant sans valeurs manquantes, avec la fonction filter(). ParcoursLic %&gt;% select(effectif_neobacheliers_passage, serie_bac_lib, age_au_bac_lib) %&gt;% filter(!is.na(effectif_neobacheliers_passage)) %&gt;% pivot_wider(names_from = serie_bac_lib, values_from = effectif_neobacheliers_passage, values_fill = 0, values_fn = list(effectif_neobacheliers_passage=sum)) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #ifzabvhbjz .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #ifzabvhbjz .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ifzabvhbjz .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #ifzabvhbjz .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #ifzabvhbjz .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ifzabvhbjz .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ifzabvhbjz .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #ifzabvhbjz .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #ifzabvhbjz .gt_column_spanner_outer:first-child { padding-left: 0; } #ifzabvhbjz .gt_column_spanner_outer:last-child { padding-right: 0; } #ifzabvhbjz .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #ifzabvhbjz .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #ifzabvhbjz .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #ifzabvhbjz .gt_from_md > :first-child { margin-top: 0; } #ifzabvhbjz .gt_from_md > :last-child { margin-bottom: 0; } #ifzabvhbjz .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #ifzabvhbjz .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #ifzabvhbjz .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #ifzabvhbjz .gt_row_group_first td { border-top-width: 2px; } #ifzabvhbjz .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ifzabvhbjz .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #ifzabvhbjz .gt_first_summary_row.thick { border-top-width: 2px; } #ifzabvhbjz .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ifzabvhbjz .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ifzabvhbjz .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #ifzabvhbjz .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #ifzabvhbjz .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ifzabvhbjz .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ifzabvhbjz .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #ifzabvhbjz .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ifzabvhbjz .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #ifzabvhbjz .gt_left { text-align: left; } #ifzabvhbjz .gt_center { text-align: center; } #ifzabvhbjz .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #ifzabvhbjz .gt_font_normal { font-weight: normal; } #ifzabvhbjz .gt_font_bold { font-weight: bold; } #ifzabvhbjz .gt_font_italic { font-style: italic; } #ifzabvhbjz .gt_super { font-size: 65%; } #ifzabvhbjz .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #ifzabvhbjz .gt_asterisk { font-size: 100%; vertical-align: 0; } #ifzabvhbjz .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #ifzabvhbjz .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #ifzabvhbjz .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } age_au_bac_lib BAC STMG BAC technologique hors STMG BAC ES BAC L BAC S BAC professionnel En retard d'un an 5484 3534 8139 6242 6226 0 En retard de plus d'un an 2043 1538 1553 1587 1500 0 A l'heure ou en avance 6432 5565 36732 23260 35404 0 Non pris en compte 0 0 0 0 0 14527 2.2 Séparer les variables, séparer les données On peut également créer de nouvelles colonnes à partir dune colonne en séparant les informations, ou le contraire rassembler 2 informations contenues dans 2 colonnes différentes dans une seule colonne. Ce sont respectivement les fonctions separate() et unite() du langage tidyverse que lon utilise alors. Là aussi, je vous montre ci-dessous un rapide exemple avec la fonction separate(), mais de même on aura sûrement loccasion de les utiliser de manière plus approfondie ce semestre. ParcoursLic %&gt;% separate(serie_bac_lib, into = c(&#39;Bac&#39;,&#39;Serie&#39;)) %&gt;% select(Bac, Serie) %&gt;% head(4) %&gt;% gt() Warning: Expected 2 pieces. Additional pieces discarded in 1055 rows [3, 5, 10, 13, 16, 18, 19, 24, 50, 52, 58, 65, 66, 79, 81, 87, 89, 99, 118, 124, ...]. html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #ysbixmqvik .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #ysbixmqvik .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ysbixmqvik .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #ysbixmqvik .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #ysbixmqvik .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ysbixmqvik .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ysbixmqvik .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #ysbixmqvik .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #ysbixmqvik .gt_column_spanner_outer:first-child { padding-left: 0; } #ysbixmqvik .gt_column_spanner_outer:last-child { padding-right: 0; } #ysbixmqvik .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #ysbixmqvik .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #ysbixmqvik .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #ysbixmqvik .gt_from_md > :first-child { margin-top: 0; } #ysbixmqvik .gt_from_md > :last-child { margin-bottom: 0; } #ysbixmqvik .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #ysbixmqvik .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #ysbixmqvik .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #ysbixmqvik .gt_row_group_first td { border-top-width: 2px; } #ysbixmqvik .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ysbixmqvik .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #ysbixmqvik .gt_first_summary_row.thick { border-top-width: 2px; } #ysbixmqvik .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ysbixmqvik .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ysbixmqvik .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #ysbixmqvik .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #ysbixmqvik .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ysbixmqvik .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ysbixmqvik .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #ysbixmqvik .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ysbixmqvik .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #ysbixmqvik .gt_left { text-align: left; } #ysbixmqvik .gt_center { text-align: center; } #ysbixmqvik .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #ysbixmqvik .gt_font_normal { font-weight: normal; } #ysbixmqvik .gt_font_bold { font-weight: bold; } #ysbixmqvik .gt_font_italic { font-style: italic; } #ysbixmqvik .gt_super { font-size: 65%; } #ysbixmqvik .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #ysbixmqvik .gt_asterisk { font-size: 100%; vertical-align: 0; } #ysbixmqvik .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #ysbixmqvik .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #ysbixmqvik .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Bac Serie BAC STMG BAC STMG BAC technologique BAC professionnel Mais attention, on a un warning car on ne lui a pas indiqué doption de séparation, et automatiquement le premier espace séparant le 1er du 2ème mot a été utilisé, mais du coup on voit que pour les expressions qui avaient plus de 2 mots on na pas les autres mots (cest le cas pour la modalité Bac technologique hors STMG qui est devenu BAC dun côté et technologique de lautre). Pour remédier à cela, il faut ajouter largument extra=\"merge\". ParcoursLic %&gt;% separate(serie_bac_lib, into = c(&#39;Bac&#39;,&#39;Serie&#39;), sep=&quot; &quot;, extra=&quot;merge&quot;) %&gt;% select(Bac, Serie) %&gt;% head(4) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #zzwtckbevn .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #zzwtckbevn .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #zzwtckbevn .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #zzwtckbevn .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #zzwtckbevn .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #zzwtckbevn .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #zzwtckbevn .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #zzwtckbevn .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #zzwtckbevn .gt_column_spanner_outer:first-child { padding-left: 0; } #zzwtckbevn .gt_column_spanner_outer:last-child { padding-right: 0; } #zzwtckbevn .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #zzwtckbevn .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #zzwtckbevn .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #zzwtckbevn .gt_from_md > :first-child { margin-top: 0; } #zzwtckbevn .gt_from_md > :last-child { margin-bottom: 0; } #zzwtckbevn .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #zzwtckbevn .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #zzwtckbevn .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #zzwtckbevn .gt_row_group_first td { border-top-width: 2px; } #zzwtckbevn .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #zzwtckbevn .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #zzwtckbevn .gt_first_summary_row.thick { border-top-width: 2px; } #zzwtckbevn .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #zzwtckbevn .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #zzwtckbevn .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #zzwtckbevn .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #zzwtckbevn .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #zzwtckbevn .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #zzwtckbevn .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #zzwtckbevn .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #zzwtckbevn .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #zzwtckbevn .gt_left { text-align: left; } #zzwtckbevn .gt_center { text-align: center; } #zzwtckbevn .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #zzwtckbevn .gt_font_normal { font-weight: normal; } #zzwtckbevn .gt_font_bold { font-weight: bold; } #zzwtckbevn .gt_font_italic { font-style: italic; } #zzwtckbevn .gt_super { font-size: 65%; } #zzwtckbevn .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #zzwtckbevn .gt_asterisk { font-size: 100%; vertical-align: 0; } #zzwtckbevn .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #zzwtckbevn .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #zzwtckbevn .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Bac Serie BAC STMG BAC STMG BAC technologique hors STMG BAC professionnel Enfin, comme on a dit que lon avait des informations sur deux champs différents, on peut très bien décider de créer deux nouvelles tables de données, en retenant seulement les informations correspondant au champ concerné. La première que lon peut intituler PassageL1L2 comprendrait toutes les lignes de la base initiale ParcoursLic mais sans les colonnes reussite_3_ans, reussite_4_ans, reussite_3_4_ans, effectif_neobacheliers_reussite et cohorte_reussite, alors que la seconde que lon peut intituler ReussiteLic comprendrait ces variables, ainsi que toutes les lignes. Comme vous le savez très probablement, dans le langage tidyverse, pour faire des sélections sur les lignes ou observations dans une table de données, on utilise la fonction filter() ; pour faire des sélections sur les colonnes ou variables, on utilise la fonction select() ; pour supprimer des variables, on utilise select() également (dans le langage R de base, on peut utiliser la fonction subset()). Créer donc ces deux nouvelles bases de données, de telle sorte quelles ressemblent à ce qui saffiche ci-dessous : html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #cvzjckylpj .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #cvzjckylpj .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #cvzjckylpj .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #cvzjckylpj .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #cvzjckylpj .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cvzjckylpj .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #cvzjckylpj .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #cvzjckylpj .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #cvzjckylpj .gt_column_spanner_outer:first-child { padding-left: 0; } #cvzjckylpj .gt_column_spanner_outer:last-child { padding-right: 0; } #cvzjckylpj .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #cvzjckylpj .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #cvzjckylpj .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #cvzjckylpj .gt_from_md > :first-child { margin-top: 0; } #cvzjckylpj .gt_from_md > :last-child { margin-bottom: 0; } #cvzjckylpj .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #cvzjckylpj .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #cvzjckylpj .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #cvzjckylpj .gt_row_group_first td { border-top-width: 2px; } #cvzjckylpj .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #cvzjckylpj .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #cvzjckylpj .gt_first_summary_row.thick { border-top-width: 2px; } #cvzjckylpj .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cvzjckylpj .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #cvzjckylpj .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #cvzjckylpj .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #cvzjckylpj .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cvzjckylpj .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #cvzjckylpj .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #cvzjckylpj .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #cvzjckylpj .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #cvzjckylpj .gt_left { text-align: left; } #cvzjckylpj .gt_center { text-align: center; } #cvzjckylpj .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #cvzjckylpj .gt_font_normal { font-weight: normal; } #cvzjckylpj .gt_font_bold { font-weight: bold; } #cvzjckylpj .gt_font_italic { font-style: italic; } #cvzjckylpj .gt_super { font-size: 65%; } #cvzjckylpj .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #cvzjckylpj .gt_asterisk { font-size: 100%; vertical-align: 0; } #cvzjckylpj .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #cvzjckylpj .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #cvzjckylpj .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } passage_en_l2_2_ans effectif_neobacheliers_passage sect_disciplinaire_lib sexe age_au_bac_lib passage_en_l2_1_2_ans serie_bac_lib age_au_bac gd_discipline gd_discipline_lib mention_bac_lib discipline reorientation_en_dut discipline_lib reorientation_en_dut_1_an redoublement_en_l1 passage_en_l2_1_an cohorte_passage reorientation_en_dut_2_ans sect_disciplinaire sexe_lib mention_bac serie_bac 0 1 Langues et littératures étrangères 1 En retard d'un an 0 BAC STMG R1 LLSH Lettres, langues et sciences humaines Inconnue 05 0 Langues 0 0 0 2014 0 23 Homme Q 4 0 10 Sociologie, démographie 1 En retard d'un an 0 BAC STMG R1 LLSH Lettres, langues et sciences humaines Passable deuxième groupe 06 1 Sciences humaines et sociales 1 4 0 2014 0 33 Homme P 4 1 3 Langues et littératures étrangères 2 En retard de plus d'un an 3 BAC technologique hors STMG R2 LLSH Lettres, langues et sciences humaines Inconnue 05 0 Langues 0 1 2 2014 0 23 Femme Q 5 NA NA Langues et littératures étrangères 1 Non pris en compte NA BAC professionnel R4 LLSH Lettres, langues et sciences humaines Très bien 05 NA Langues NA NA NA 2014 NA 23 Homme A 6 1 21 Sociologie, démographie 2 En retard de plus d'un an 2 BAC technologique hors STMG R2 LLSH Lettres, langues et sciences humaines Passable deuxième groupe 06 1 Sciences humaines et sociales 1 12 1 2014 0 33 Femme P 5 html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #lhgqqbvpsd .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #lhgqqbvpsd .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #lhgqqbvpsd .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #lhgqqbvpsd .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #lhgqqbvpsd .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lhgqqbvpsd .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #lhgqqbvpsd .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #lhgqqbvpsd .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #lhgqqbvpsd .gt_column_spanner_outer:first-child { padding-left: 0; } #lhgqqbvpsd .gt_column_spanner_outer:last-child { padding-right: 0; } #lhgqqbvpsd .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #lhgqqbvpsd .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #lhgqqbvpsd .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #lhgqqbvpsd .gt_from_md > :first-child { margin-top: 0; } #lhgqqbvpsd .gt_from_md > :last-child { margin-bottom: 0; } #lhgqqbvpsd .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #lhgqqbvpsd .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #lhgqqbvpsd .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #lhgqqbvpsd .gt_row_group_first td { border-top-width: 2px; } #lhgqqbvpsd .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #lhgqqbvpsd .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #lhgqqbvpsd .gt_first_summary_row.thick { border-top-width: 2px; } #lhgqqbvpsd .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lhgqqbvpsd .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #lhgqqbvpsd .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #lhgqqbvpsd .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #lhgqqbvpsd .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lhgqqbvpsd .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #lhgqqbvpsd .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #lhgqqbvpsd .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #lhgqqbvpsd .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #lhgqqbvpsd .gt_left { text-align: left; } #lhgqqbvpsd .gt_center { text-align: center; } #lhgqqbvpsd .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #lhgqqbvpsd .gt_font_normal { font-weight: normal; } #lhgqqbvpsd .gt_font_bold { font-weight: bold; } #lhgqqbvpsd .gt_font_italic { font-style: italic; } #lhgqqbvpsd .gt_super { font-size: 65%; } #lhgqqbvpsd .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #lhgqqbvpsd .gt_asterisk { font-size: 100%; vertical-align: 0; } #lhgqqbvpsd .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #lhgqqbvpsd .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #lhgqqbvpsd .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } reussite_3_ans reussite_4_ans reussite_3_4_ans effectif_neobacheliers_reussite cohorte_reussite sect_disciplinaire_lib sexe age_au_bac_lib serie_bac_lib age_au_bac gd_discipline gd_discipline_lib mention_bac_lib discipline discipline_lib sect_disciplinaire sexe_lib mention_bac serie_bac 0 0 0 3 2012 Langues et littératures étrangères 1 En retard d'un an BAC STMG R1 LLSH Lettres, langues et sciences humaines Inconnue 05 Langues 23 Homme Q 4 0 1 1 16 2012 Sociologie, démographie 1 En retard d'un an BAC STMG R1 LLSH Lettres, langues et sciences humaines Passable deuxième groupe 06 Sciences humaines et sociales 33 Homme P 4 1 0 1 4 2012 Langues et littératures étrangères 2 En retard de plus d'un an BAC technologique hors STMG R2 LLSH Lettres, langues et sciences humaines Inconnue 05 Langues 23 Femme Q 5 1 0 1 1 2012 Langues et littératures étrangères 1 Non pris en compte BAC professionnel R4 LLSH Lettres, langues et sciences humaines Très bien 05 Langues 23 Homme A 6 1 1 2 29 2012 Sociologie, démographie 2 En retard de plus d'un an BAC technologique hors STMG R2 LLSH Lettres, langues et sciences humaines Passable deuxième groupe 06 Sciences humaines et sociales 33 Femme P 5 \\iffalse PassageL1L2 &lt;- ParcoursLic %&gt;% select(-c(&quot;reussite_3_ans&quot;, &quot;reussite_4_ans&quot;, &quot;reussite_3_4_ans&quot;, &quot;effectif_neobacheliers_reussite&quot;, &quot;cohorte_reussite&quot;)) ReussiteLic &lt;- ParcoursLic %&gt;% select(&quot;reussite_3_ans&quot;, &quot;reussite_4_ans&quot;, &quot;reussite_3_4_ans&quot;, &quot;effectif_neobacheliers_reussite&quot;, &quot;cohorte_reussite&quot;, &quot;sect_disciplinaire_lib&quot;,&quot;sexe&quot;, &quot;age_au_bac_lib&quot;, &quot;serie_bac_lib&quot;, &quot;age_au_bac&quot;, &quot;gd_discipline&quot;, &quot;gd_discipline_lib&quot;, &quot;mention_bac_lib&quot;, &quot;discipline&quot;, &quot;discipline_lib&quot;, &quot;sect_disciplinaire&quot;, &quot;sexe_lib&quot;, &quot;mention_bac&quot;, &quot;serie_bac&quot;) Ainsi, pour la première table, la variable clé donnant les effectifs est effectif_neobacheliers_passage, alors que pour la seconde table, cest effectif_neobacheliers_reussite. Cela signifie que, par exemple, pour avoir les effectifs globaux des bacheliers 2014 inscrits en 2014-2015 (champ base PassageL1L2) et des bacheliers 2012 inscrits en 2012-2013 (champ base ReussiteLic), on peut écrire le code suivant - attention il y a des valeurs manquantes, il faut donc bien ajouter loption na.rm=TRUE à la fonction summarise() ! On verra plus loin quon peut également utiliser la fonction count(). PassageL1L2 %&gt;% summarise(&#39;Nombre total de bacheliers inscrits en 2014-2015 en licence&#39; = sum(effectif_neobacheliers_passage, na.rm=TRUE)) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #vwpqqxngsh .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #vwpqqxngsh .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #vwpqqxngsh .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #vwpqqxngsh .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #vwpqqxngsh .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #vwpqqxngsh .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #vwpqqxngsh .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #vwpqqxngsh .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #vwpqqxngsh .gt_column_spanner_outer:first-child { padding-left: 0; } #vwpqqxngsh .gt_column_spanner_outer:last-child { padding-right: 0; } #vwpqqxngsh .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #vwpqqxngsh .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #vwpqqxngsh .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #vwpqqxngsh .gt_from_md > :first-child { margin-top: 0; } #vwpqqxngsh .gt_from_md > :last-child { margin-bottom: 0; } #vwpqqxngsh .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #vwpqqxngsh .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #vwpqqxngsh .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #vwpqqxngsh .gt_row_group_first td { border-top-width: 2px; } #vwpqqxngsh .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #vwpqqxngsh .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #vwpqqxngsh .gt_first_summary_row.thick { border-top-width: 2px; } #vwpqqxngsh .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #vwpqqxngsh .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #vwpqqxngsh .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #vwpqqxngsh .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #vwpqqxngsh .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #vwpqqxngsh .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #vwpqqxngsh .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #vwpqqxngsh .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #vwpqqxngsh .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #vwpqqxngsh .gt_left { text-align: left; } #vwpqqxngsh .gt_center { text-align: center; } #vwpqqxngsh .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #vwpqqxngsh .gt_font_normal { font-weight: normal; } #vwpqqxngsh .gt_font_bold { font-weight: bold; } #vwpqqxngsh .gt_font_italic { font-style: italic; } #vwpqqxngsh .gt_super { font-size: 65%; } #vwpqqxngsh .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #vwpqqxngsh .gt_asterisk { font-size: 100%; vertical-align: 0; } #vwpqqxngsh .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #vwpqqxngsh .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #vwpqqxngsh .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Nombre total de bacheliers inscrits en 2014-2015 en licence 159766 ReussiteLic %&gt;% summarise(&#39;Nombre total de bacheliers inscrits en 2012-2013 en licence&#39; = sum(effectif_neobacheliers_reussite, na.rm=TRUE)) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #bbqgfepfgu .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #bbqgfepfgu .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #bbqgfepfgu .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #bbqgfepfgu .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #bbqgfepfgu .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bbqgfepfgu .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #bbqgfepfgu .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #bbqgfepfgu .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #bbqgfepfgu .gt_column_spanner_outer:first-child { padding-left: 0; } #bbqgfepfgu .gt_column_spanner_outer:last-child { padding-right: 0; } #bbqgfepfgu .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #bbqgfepfgu .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #bbqgfepfgu .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #bbqgfepfgu .gt_from_md > :first-child { margin-top: 0; } #bbqgfepfgu .gt_from_md > :last-child { margin-bottom: 0; } #bbqgfepfgu .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #bbqgfepfgu .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #bbqgfepfgu .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #bbqgfepfgu .gt_row_group_first td { border-top-width: 2px; } #bbqgfepfgu .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #bbqgfepfgu .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #bbqgfepfgu .gt_first_summary_row.thick { border-top-width: 2px; } #bbqgfepfgu .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bbqgfepfgu .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #bbqgfepfgu .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #bbqgfepfgu .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #bbqgfepfgu .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bbqgfepfgu .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #bbqgfepfgu .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #bbqgfepfgu .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #bbqgfepfgu .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #bbqgfepfgu .gt_left { text-align: left; } #bbqgfepfgu .gt_center { text-align: center; } #bbqgfepfgu .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #bbqgfepfgu .gt_font_normal { font-weight: normal; } #bbqgfepfgu .gt_font_bold { font-weight: bold; } #bbqgfepfgu .gt_font_italic { font-style: italic; } #bbqgfepfgu .gt_super { font-size: 65%; } #bbqgfepfgu .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #bbqgfepfgu .gt_asterisk { font-size: 100%; vertical-align: 0; } #bbqgfepfgu .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #bbqgfepfgu .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #bbqgfepfgu .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Nombre total de bacheliers inscrits en 2012-2013 en licence 147841 "],["03-Manipulation-variables.html", "Section 3 Manipulation des variables 3.1 Manipulation des variables qualitatives 3.2 Manipulation des variables quantitatives", " Section 3 Manipulation des variables On va transformer toutes nos variables caractères en variables factor pour que R reconnaisse les différents niveaux, cest-à-dire modalités, des variables par la suite. Une façon simple de le faire est dutiliser la fonction mutate_if. PassageL1L2 &lt;- PassageL1L2 %&gt;% mutate_if(is.character, as.factor) ReussiteLic &lt;- ReussiteLic %&gt;% mutate_if(is.character, as.factor) On peut ainsi vérifier que les variables cohorte_passage et cohorte_reussite ont toujours la même modalité, et quelles nen ont quune : nlevels(PassageL1L2$cohorte_passage) [1] 1 levels(PassageL1L2$cohorte_passage) [1] &quot;2014&quot; nlevels(ReussiteLic$cohorte_reussite) [1] 1 levels(ReussiteLic$cohorte_reussite) [1] &quot;2012&quot; Remarque : pour la suite, on travaillera essentiellement sur la base PassageL1L2, mais vous pouvez réaliser le même type danalyse pour la base ReussiteLic. On peut également vérifier les variables numériques qui restent, en les sélectionnant avec select_if() : PassageL1L2 %&gt;% select_if(is.numeric) %&gt;% head(2) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #lwyrgothiy .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #lwyrgothiy .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #lwyrgothiy .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #lwyrgothiy .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #lwyrgothiy .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lwyrgothiy .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #lwyrgothiy .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #lwyrgothiy .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #lwyrgothiy .gt_column_spanner_outer:first-child { padding-left: 0; } #lwyrgothiy .gt_column_spanner_outer:last-child { padding-right: 0; } #lwyrgothiy .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #lwyrgothiy .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #lwyrgothiy .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #lwyrgothiy .gt_from_md > :first-child { margin-top: 0; } #lwyrgothiy .gt_from_md > :last-child { margin-bottom: 0; } #lwyrgothiy .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #lwyrgothiy .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #lwyrgothiy .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #lwyrgothiy .gt_row_group_first td { border-top-width: 2px; } #lwyrgothiy .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #lwyrgothiy .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #lwyrgothiy .gt_first_summary_row.thick { border-top-width: 2px; } #lwyrgothiy .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lwyrgothiy .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #lwyrgothiy .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #lwyrgothiy .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #lwyrgothiy .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #lwyrgothiy .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #lwyrgothiy .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #lwyrgothiy .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #lwyrgothiy .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #lwyrgothiy .gt_left { text-align: left; } #lwyrgothiy .gt_center { text-align: center; } #lwyrgothiy .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #lwyrgothiy .gt_font_normal { font-weight: normal; } #lwyrgothiy .gt_font_bold { font-weight: bold; } #lwyrgothiy .gt_font_italic { font-style: italic; } #lwyrgothiy .gt_super { font-size: 65%; } #lwyrgothiy .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #lwyrgothiy .gt_asterisk { font-size: 100%; vertical-align: 0; } #lwyrgothiy .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #lwyrgothiy .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #lwyrgothiy .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } passage_en_l2_2_ans effectif_neobacheliers_passage sexe passage_en_l2_1_2_ans reorientation_en_dut reorientation_en_dut_1_an redoublement_en_l1 passage_en_l2_1_an reorientation_en_dut_2_ans sect_disciplinaire serie_bac 0 1 1 0 0 0 0 0 0 23 4 0 10 1 0 1 1 4 0 0 33 4 Ahhh !!! On voit que 3 variables sont en réalité des variables catégorielles mais avec des modalités numériques : sexe, sect_disciplinaire et serie_bac. On va donc les transformer en variable factor avec la fonction as.factor() appelée elle-même dans la fonction mutate() qui dans le langage tidyverse permet de créer de nouvelles variables. PassageL1L2 &lt;- PassageL1L2 %&gt;% mutate(sexe=as.factor(sexe), sect_disciplinaire=as.factor(sect_disciplinaire), serie_bac=as.factor(serie_bac)) Ensuite, il est souvent dusage dutiliser la fonction summary() pour donner une idée sur lensemble des variables, soit de la distribution pour les variables quantitatives, soit de la répartition des différentes modalités pour les variables qualitatives ; la fonction permet également de nous donner linformation sur lexistence et le nombre de valeurs manquantes pour chaque variable. summary(PassageL1L2) passage_en_l2_2_ans effectif_neobacheliers_passage Min. : 0.000 Min. : 1.00 1st Qu.: 0.000 1st Qu.: 2.00 Median : 0.000 Median : 6.00 Mean : 4.316 Mean : 35.12 3rd Qu.: 2.000 3rd Qu.: 23.00 Max. :571.000 Max. :2454.00 NA&#39;s :959 NA&#39;s :959 sect_disciplinaire_lib sexe Sciences juridiques : 187 1:2756 Langues étrangères appliquées : 177 2:2752 Langues et littératures étrangères: 176 Psychologie : 176 STAPS : 173 Arts : 172 (Other) :4447 age_au_bac_lib passage_en_l2_1_2_ans A l&#39;heure ou en avance :2021 Min. : 0.00 En retard d&#39;un an :1746 1st Qu.: 1.00 En retard de plus d&#39;un an:1316 Median : 2.00 Non pris en compte : 425 Mean : 18.63 3rd Qu.: 8.00 Max. :1950.00 NA&#39;s :959 serie_bac_lib age_au_bac gd_discipline BAC ES :1066 R0:2021 DSA :1097 BAC L : 896 R1:1746 LLSH :2562 BAC professionnel : 425 R2:1316 SANTE: 15 BAC S :1218 R4: 425 SI :1661 BAC STMG : 848 STAPS: 173 BAC technologique hors STMG:1055 gd_discipline_lib mention_bac_lib Droit, gestion, économie, AES :1097 Assez bien :1080 Lettres, langues et sciences humaines:2562 Bien : 796 Santé : 15 Inconnue : 848 Sciences et sciences de l&#39;ingénieur :1661 Passable deuxième groupe:1112 STAPS : 173 Passable premier groupe :1220 Très bien : 452 discipline reorientation_en_dut 06 :1395 Min. : 0.000 15 :1168 1st Qu.: 0.000 04 : 593 Median : 0.000 01 : 470 Mean : 0.805 02 : 462 3rd Qu.: 0.000 05 : 459 Max. :79.000 (Other): 961 NA&#39;s :959 discipline_lib reorientation_en_dut_1_an Sciences humaines et sociales :1395 Min. : 0.0000 Sciences fondamentales et applications:1168 1st Qu.: 0.0000 Lettres, sciences du langage, arts : 593 Median : 0.0000 Droit, sciences politiques : 470 Mean : 0.6186 Sciences économiques, gestion : 462 3rd Qu.: 0.0000 Langues : 459 Max. :63.0000 (Other) : 961 NA&#39;s :959 redoublement_en_l1 passage_en_l2_1_an cohorte_passage Min. : 0.0 Min. : 0.00 2014:5508 1st Qu.: 0.0 1st Qu.: 0.00 Median : 1.0 Median : 1.00 Mean : 10.2 Mean : 14.32 3rd Qu.: 6.0 3rd Qu.: 6.00 Max. :1019.0 Max. :1494.00 NA&#39;s :959 NA&#39;s :959 reorientation_en_dut_2_ans sect_disciplinaire sexe_lib mention_bac Min. : 0.0000 36 : 187 Femme:2752 A: 452 1st Qu.: 0.0000 24 : 177 Homme:2756 B: 796 Median : 0.0000 23 : 176 C:1080 Mean : 0.1864 32 : 176 D:1220 3rd Qu.: 0.0000 10 : 173 P:1112 Max. :21.0000 21 : 172 Q: 848 NA&#39;s :959 (Other):4447 serie_bac 1: 896 2:1066 3:1218 4: 848 5:1055 6: 425 Mais, en réalité ici, ces statistiques nont pas grand sens en soi, en raison encore une fois du fait que lon a des variables micro-agrégées ; et pour avoir les vraies statistiques il faut sommer notre variable clé deffectif à chaque fois, cest-à-dire pour chaque variable catégorielle en utilisant pour cela la fonction group_by() avant la fonction summarise(). Par exemple : # Si on veut la répartition des inscrits 2014-2015 en licence selon la # série du Bac : PassageL1L2 %&gt;% group_by(serie_bac_lib) %&gt;% summarise(eff_2014=sum(effectif_neobacheliers_passage, na.rm=T)) %&gt;% adorn_totals(&quot;row&quot;) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #miuwjxlrnz .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #miuwjxlrnz .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #miuwjxlrnz .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #miuwjxlrnz .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #miuwjxlrnz .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #miuwjxlrnz .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #miuwjxlrnz .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #miuwjxlrnz .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #miuwjxlrnz .gt_column_spanner_outer:first-child { padding-left: 0; } #miuwjxlrnz .gt_column_spanner_outer:last-child { padding-right: 0; } #miuwjxlrnz .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #miuwjxlrnz .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #miuwjxlrnz .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #miuwjxlrnz .gt_from_md > :first-child { margin-top: 0; } #miuwjxlrnz .gt_from_md > :last-child { margin-bottom: 0; } #miuwjxlrnz .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #miuwjxlrnz .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #miuwjxlrnz .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #miuwjxlrnz .gt_row_group_first td { border-top-width: 2px; } #miuwjxlrnz .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #miuwjxlrnz .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #miuwjxlrnz .gt_first_summary_row.thick { border-top-width: 2px; } #miuwjxlrnz .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #miuwjxlrnz .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #miuwjxlrnz .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #miuwjxlrnz .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #miuwjxlrnz .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #miuwjxlrnz .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #miuwjxlrnz .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #miuwjxlrnz .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #miuwjxlrnz .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #miuwjxlrnz .gt_left { text-align: left; } #miuwjxlrnz .gt_center { text-align: center; } #miuwjxlrnz .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #miuwjxlrnz .gt_font_normal { font-weight: normal; } #miuwjxlrnz .gt_font_bold { font-weight: bold; } #miuwjxlrnz .gt_font_italic { font-style: italic; } #miuwjxlrnz .gt_super { font-size: 65%; } #miuwjxlrnz .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #miuwjxlrnz .gt_asterisk { font-size: 100%; vertical-align: 0; } #miuwjxlrnz .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #miuwjxlrnz .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #miuwjxlrnz .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } serie_bac_lib eff_2014 BAC ES 46424 BAC L 31089 BAC professionnel 14527 BAC S 43130 BAC STMG 13959 BAC technologique hors STMG 10637 Total 159766 # ou avec la fonction count() en utilisant l&#39;argument wt= : # PassageL1L2 %&gt;% count(serie_bac_lib, wt = effectif_neobacheliers_passage) # %&gt;% adorn_totals(&quot;row&quot;) %&gt;% gt() Si on veut trier le résultat pour voir la catégorie la plus importante en première, on peut utiliser la fonction arrange(), qui peut être utilisée plus généralement sur des dataframe. # Si on veut la répartition des inscrits 2014-2015 en licence selon la série du # Bac, triée par ordre décroissant : PassageL1L2 %&gt;% group_by(serie_bac_lib) %&gt;% summarise(eff_2014=sum(effectif_neobacheliers_passage, na.rm=T)) %&gt;% arrange(desc(eff_2014)) %&gt;% adorn_totals(&quot;row&quot;) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #nnsvanpbef .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #nnsvanpbef .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #nnsvanpbef .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #nnsvanpbef .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #nnsvanpbef .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nnsvanpbef .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #nnsvanpbef .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #nnsvanpbef .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #nnsvanpbef .gt_column_spanner_outer:first-child { padding-left: 0; } #nnsvanpbef .gt_column_spanner_outer:last-child { padding-right: 0; } #nnsvanpbef .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #nnsvanpbef .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #nnsvanpbef .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #nnsvanpbef .gt_from_md > :first-child { margin-top: 0; } #nnsvanpbef .gt_from_md > :last-child { margin-bottom: 0; } #nnsvanpbef .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #nnsvanpbef .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #nnsvanpbef .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #nnsvanpbef .gt_row_group_first td { border-top-width: 2px; } #nnsvanpbef .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #nnsvanpbef .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #nnsvanpbef .gt_first_summary_row.thick { border-top-width: 2px; } #nnsvanpbef .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nnsvanpbef .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #nnsvanpbef .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #nnsvanpbef .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #nnsvanpbef .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nnsvanpbef .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #nnsvanpbef .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #nnsvanpbef .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #nnsvanpbef .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #nnsvanpbef .gt_left { text-align: left; } #nnsvanpbef .gt_center { text-align: center; } #nnsvanpbef .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #nnsvanpbef .gt_font_normal { font-weight: normal; } #nnsvanpbef .gt_font_bold { font-weight: bold; } #nnsvanpbef .gt_font_italic { font-style: italic; } #nnsvanpbef .gt_super { font-size: 65%; } #nnsvanpbef .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #nnsvanpbef .gt_asterisk { font-size: 100%; vertical-align: 0; } #nnsvanpbef .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #nnsvanpbef .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #nnsvanpbef .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } serie_bac_lib eff_2014 BAC ES 46424 BAC S 43130 BAC L 31089 BAC professionnel 14527 BAC STMG 13959 BAC technologique hors STMG 10637 Total 159766 # Si on veut les effectifs pour chaque situation à la fin de la L1 : PassageL1L2 %&gt;% summarise(passage_l2=sum(passage_en_l2_1_an, na.rm=T), redoublement_l1=sum(redoublement_en_l1, na.rm=T), reorientation_dut_l1=sum(reorientation_en_dut_1_an, na.rm=T)) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #gitegevtvc .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #gitegevtvc .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #gitegevtvc .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #gitegevtvc .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #gitegevtvc .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #gitegevtvc .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #gitegevtvc .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #gitegevtvc .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #gitegevtvc .gt_column_spanner_outer:first-child { padding-left: 0; } #gitegevtvc .gt_column_spanner_outer:last-child { padding-right: 0; } #gitegevtvc .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #gitegevtvc .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #gitegevtvc .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #gitegevtvc .gt_from_md > :first-child { margin-top: 0; } #gitegevtvc .gt_from_md > :last-child { margin-bottom: 0; } #gitegevtvc .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #gitegevtvc .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #gitegevtvc .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #gitegevtvc .gt_row_group_first td { border-top-width: 2px; } #gitegevtvc .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #gitegevtvc .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #gitegevtvc .gt_first_summary_row.thick { border-top-width: 2px; } #gitegevtvc .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #gitegevtvc .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #gitegevtvc .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #gitegevtvc .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #gitegevtvc .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #gitegevtvc .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #gitegevtvc .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #gitegevtvc .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #gitegevtvc .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #gitegevtvc .gt_left { text-align: left; } #gitegevtvc .gt_center { text-align: center; } #gitegevtvc .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #gitegevtvc .gt_font_normal { font-weight: normal; } #gitegevtvc .gt_font_bold { font-weight: bold; } #gitegevtvc .gt_font_italic { font-style: italic; } #gitegevtvc .gt_super { font-size: 65%; } #gitegevtvc .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #gitegevtvc .gt_asterisk { font-size: 100%; vertical-align: 0; } #gitegevtvc .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #gitegevtvc .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #gitegevtvc .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } passage_l2 redoublement_l1 reorientation_dut_l1 65127 46392 2814 3.1 Manipulation des variables qualitatives On peut dabord travailler sur les variables qualitatives. On regarde les différents niveaux pour chacune dentre elles. On peut avoir recours pour cela à la fonction sapply() qui permet dappliquer la fonction indiquée entre parenthèses (ici levels()) à tous les éléments de notre table. PassageL1L2 %&gt;% select_if(is.factor) %&gt;% sapply(levels) $sect_disciplinaire_lib [1] &quot;Administration économique et sociale&quot; [2] &quot;Aménagement&quot; [3] &quot;Archéologie, ethnologie, préhistoire&quot; [4] &quot;Arts&quot; [5] &quot;Chimie&quot; [6] &quot;Cultures et langues régionales&quot; [7] &quot;Électronique, génie électrique&quot; [8] &quot;Formation générale aux métiers de l&#39;ingénieur&quot; [9] &quot;Génie civil&quot; [10] &quot;Génie des procédés&quot; [11] &quot;Géographie&quot; [12] &quot;Histoire&quot; [13] &quot;Informatique&quot; [14] &quot;Langues et littératures anciennes&quot; [15] &quot;Langues et littératures étrangères&quot; [16] &quot;Langues et littératures françaises&quot; [17] &quot;Langues étrangères appliquées&quot; [18] &quot;Mathématique et informatique&quot; [19] &quot;Mathématiques&quot; [20] &quot;Mathématiques appliquées et sciences sociales&quot; [21] &quot;Mécanique, génie mécanique&quot; [22] &quot;Médecine&quot; [23] &quot;Philosophie, épistémologie&quot; [24] &quot;Physique&quot; [25] &quot;Physique et chimie&quot; [26] &quot;Pluridisciplinaire droit, sciences politiques&quot; [27] &quot;Pluridisciplinaire langues&quot; [28] &quot;Pluridisciplinaire lettres, langues, sciences humaines&quot; [29] &quot;Pluridisciplinaire lettres, sciences du langage, arts&quot; [30] &quot;Pluridisciplinaire sciences&quot; [31] &quot;Pluridisciplinaire sciences de la vie, de la santé, de la terre et de l&#39;univers&quot; [32] &quot;Pluridisciplinaire sciences économiques et gestion&quot; [33] &quot;Pluridisciplinaire sciences fondamentales et applications&quot; [34] &quot;Pluridisciplinaire sciences humaines et sociales&quot; [35] &quot;Psychologie&quot; [36] &quot;Sciences de gestion&quot; [37] &quot;Sciences de l&#39;éducation&quot; [38] &quot;Sciences de l&#39;information et la communication&quot; [39] &quot;Sciences de l&#39;univers&quot; [40] &quot;Sciences de la vie&quot; [41] &quot;Sciences du langage, linguistique&quot; [42] &quot;Sciences économiques&quot; [43] &quot;Sciences juridiques&quot; [44] &quot;Sciences politiques&quot; [45] &quot;Sciences religieuses&quot; [46] &quot;Sociologie, démographie&quot; [47] &quot;STAPS&quot; [48] &quot;Technologie et sciences industrielles&quot; $sexe [1] &quot;1&quot; &quot;2&quot; $age_au_bac_lib [1] &quot;A l&#39;heure ou en avance&quot; &quot;En retard d&#39;un an&quot; [3] &quot;En retard de plus d&#39;un an&quot; &quot;Non pris en compte&quot; $serie_bac_lib [1] &quot;BAC ES&quot; &quot;BAC L&quot; [3] &quot;BAC professionnel&quot; &quot;BAC S&quot; [5] &quot;BAC STMG&quot; &quot;BAC technologique hors STMG&quot; $age_au_bac [1] &quot;R0&quot; &quot;R1&quot; &quot;R2&quot; &quot;R4&quot; $gd_discipline [1] &quot;DSA&quot; &quot;LLSH&quot; &quot;SANTE&quot; &quot;SI&quot; &quot;STAPS&quot; $gd_discipline_lib [1] &quot;Droit, gestion, économie, AES&quot; [2] &quot;Lettres, langues et sciences humaines&quot; [3] &quot;Santé&quot; [4] &quot;Sciences et sciences de l&#39;ingénieur&quot; [5] &quot;STAPS&quot; $mention_bac_lib [1] &quot;Assez bien&quot; &quot;Bien&quot; [3] &quot;Inconnue&quot; &quot;Passable deuxième groupe&quot; [5] &quot;Passable premier groupe&quot; &quot;Très bien&quot; $discipline [1] &quot;01&quot; &quot;02&quot; &quot;03&quot; &quot;04&quot; &quot;05&quot; &quot;06&quot; &quot;09&quot; &quot;10&quot; &quot;11&quot; &quot;15&quot; &quot;32&quot; &quot;33&quot; $discipline_lib [1] &quot;Administration économique et sociale&quot; [2] &quot;Droit, sciences politiques&quot; [3] &quot;Langues&quot; [4] &quot;Lettres, sciences du langage, arts&quot; [5] &quot;Médecine&quot; [6] &quot;Pluridisciplinaire lettres, langues, sciences humaines&quot; [7] &quot;Pluridisciplinaire sciences&quot; [8] &quot;Sciences de la vie, de la terre et de l&#39;univers&quot; [9] &quot;Sciences économiques, gestion&quot; [10] &quot;Sciences fondamentales et applications&quot; [11] &quot;Sciences humaines et sociales&quot; [12] &quot;STAPS&quot; $cohorte_passage [1] &quot;2014&quot; $sect_disciplinaire [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot; &quot;16&quot; &quot;17&quot; [16] &quot;18&quot; &quot;19&quot; &quot;21&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; &quot;30&quot; &quot;31&quot; &quot;32&quot; &quot;33&quot; &quot;34&quot; [31] &quot;35&quot; &quot;36&quot; &quot;37&quot; &quot;38&quot; &quot;39&quot; &quot;40&quot; &quot;41&quot; &quot;42&quot; &quot;43&quot; &quot;61&quot; &quot;62&quot; &quot;64&quot; &quot;65&quot; &quot;66&quot; &quot;67&quot; [46] &quot;68&quot; &quot;69&quot; &quot;70&quot; $sexe_lib [1] &quot;Femme&quot; &quot;Homme&quot; $mention_bac [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;P&quot; &quot;Q&quot; $serie_bac [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; On observe que la première variable affichée sect_disciplinaire_lib a de nombreuses modalités, 48 précisément, on ne sen servira que pour une analyse détaillée ; la variable age_au_bac_lib compte 4 modalités que lon pourrait réduire à 3 en regroupant les deux modalités en retard ; de même pour la variable de serie_bac_lib, on pourrait les regrouper ou créer une autre variable nayant que 3 modalités et qui soit alors plus générale ; idem pour la mention_bac_lib en regroupant les passables. On va faire tout cela en utilisant les fonctions mutate(), case_when() et as.factor(), mais aussi en dernier exemple les fonctions fct_relevel() et fct_collapse() du package forcats : PassageL1L2 &lt;- PassageL1L2 %&gt;% mutate( age_bac = as.factor(case_when(age_au_bac_lib == &quot;A l&#39;heure ou en avance&quot; ~ &quot;A l&#39;heure ou en avance&quot;, age_au_bac_lib %in% c(&quot;En retard d&#39;un an&quot;, &quot;En retard de plus d&#39;un an&quot;) ~ &quot;En retard&quot;, age_au_bac_lib == &quot;Non pris en compte&quot; ~ &quot;Non pris en compte&quot;)), type_bac = as.factor(case_when(serie_bac_lib %in% c(&quot;BAC ES&quot;, &quot;BAC L&quot;, &quot;BAC S&quot;) ~ &quot;Bac général&quot;, serie_bac_lib %in% c(&quot;BAC STMG&quot;, &quot;BAC technologique hors STMG&quot;) ~ &quot;Bac technologique&quot;, serie_bac_lib == &quot;BAC professionnel&quot; ~ &quot;Bac professionnel&quot;)), mention_bac_bis = fct_collapse(mention_bac_lib, &#39;Passable&#39; = c(&quot;Passable deuxième groupe&quot;, &quot;Passable premier groupe&quot;)), mention_bac_bis = fct_relevel(mention_bac_bis, c(&quot;Très bien&quot;, &quot;Bien&quot;, &quot;Assez bien&quot;, &quot;Passable&quot;, &quot;Inconnue&quot;))) En effet, pour travailler sur les variables qualitatives en particulier lorsquelles sont en format factor, le package forcats est très utile. Outre une fonction de transformation dune variable caractère en facteur (as_factor() proche de la version de baseR as.factor() utilisée juste au-dessus), elle contient plein dautres fonctions : fct_collapse() utilisée à la fin de la commande précédente pour renommer ou regrouper des modalités dune variable (au lieu de la double fonction as.factor() et case_when()) ; fct_relevel() utilisée également au-dessus pour trier les modalités comme on le souhaite ; fct_drop() pour enlever des niveaux de facteurs vides/sans effectifs ; fct_explicit_na() pour rendre les NA explicites en créant une modalité (missing) ; fct_reorder() et fct_reorder2() pour réordonner les modalités dune variable, très utile pour les graphiques car utilisables directement dans ggplot() ; fct_lump() pour regrouper les modalités les plus communes (ou au contraire les moins communes) en lui indiquant entre parenthèses le nombre n= de modalités souhaitées ou la proportion minimum souhaitée prop=, et en sélectionnant la variable avec la fonction pull() avant car elle doit être en format vecteur et non data.frame ; ou encore fct_recode() pour changer le niveau des facteurs ; fct_other() ; fct_infreq() et fct_inorder() ; etc. Un bon récapitulatif de ces fonctions est présenté ici. 3.2 Manipulation des variables quantitatives PassageL1L2 %&gt;% select_if(is.numeric) %&gt;% head(4) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #nahweqnehw .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #nahweqnehw .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #nahweqnehw .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #nahweqnehw .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #nahweqnehw .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nahweqnehw .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #nahweqnehw .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #nahweqnehw .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #nahweqnehw .gt_column_spanner_outer:first-child { padding-left: 0; } #nahweqnehw .gt_column_spanner_outer:last-child { padding-right: 0; } #nahweqnehw .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #nahweqnehw .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #nahweqnehw .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #nahweqnehw .gt_from_md > :first-child { margin-top: 0; } #nahweqnehw .gt_from_md > :last-child { margin-bottom: 0; } #nahweqnehw .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #nahweqnehw .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #nahweqnehw .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #nahweqnehw .gt_row_group_first td { border-top-width: 2px; } #nahweqnehw .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #nahweqnehw .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #nahweqnehw .gt_first_summary_row.thick { border-top-width: 2px; } #nahweqnehw .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nahweqnehw .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #nahweqnehw .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #nahweqnehw .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #nahweqnehw .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #nahweqnehw .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #nahweqnehw .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #nahweqnehw .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #nahweqnehw .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #nahweqnehw .gt_left { text-align: left; } #nahweqnehw .gt_center { text-align: center; } #nahweqnehw .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #nahweqnehw .gt_font_normal { font-weight: normal; } #nahweqnehw .gt_font_bold { font-weight: bold; } #nahweqnehw .gt_font_italic { font-style: italic; } #nahweqnehw .gt_super { font-size: 65%; } #nahweqnehw .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #nahweqnehw .gt_asterisk { font-size: 100%; vertical-align: 0; } #nahweqnehw .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #nahweqnehw .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #nahweqnehw .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } passage_en_l2_2_ans effectif_neobacheliers_passage passage_en_l2_1_2_ans reorientation_en_dut reorientation_en_dut_1_an redoublement_en_l1 passage_en_l2_1_an reorientation_en_dut_2_ans 0 1 0 0 0 0 0 0 0 10 0 1 1 4 0 0 1 3 3 0 0 1 2 0 NA NA NA NA NA NA NA NA Nous avons 8 variables numériques : notre variable clé effectif_neobacheliers_passage, 3 variables renseignant de lannée de passage en L2 - passage_en_l2_1_an, passage_en_l2_1_2_ans, passage_en_l2_2_ans, 1 variable de redoublement_en_l1, et de nouveau 3 variables renseignant la réorientation en DUT selon lannée - reorientation_en_dut, reorientation_en_dut_1_an, reorientation_en_dut_2_ans. On voit par ailleurs quil y a des valeurs manquantes pour ces variables (présence de modalités NA). 3.2.1 Détecter et visualiser les valeurs manquantes Même si linformation nous avait été donnée par la fonction summary(), on peut également compter le nombre de valeurs manquantes NA pour chacune des variables avec la fonction colSums(), cela est plus synthétique que summary() qui nous donne dautres informations par ailleurs : colSums(is.na(PassageL1L2)) passage_en_l2_2_ans effectif_neobacheliers_passage 959 959 sect_disciplinaire_lib sexe 0 0 age_au_bac_lib passage_en_l2_1_2_ans 0 959 serie_bac_lib age_au_bac 0 0 gd_discipline gd_discipline_lib 0 0 mention_bac_lib discipline 0 0 reorientation_en_dut discipline_lib 959 0 reorientation_en_dut_1_an redoublement_en_l1 959 959 passage_en_l2_1_an cohorte_passage 959 0 reorientation_en_dut_2_ans sect_disciplinaire 959 0 sexe_lib mention_bac 0 0 serie_bac age_bac 0 0 type_bac mention_bac_bis 0 0 # ou en langage tidyverse sur les seules variables numériques : # PassageL1L2 %&gt;% filter_if(is.numeric) %&gt;% summarise_all(funs(sum(is.na(.)))) #Pour les avoir en proportion et arrondies à 2 chiffres après la virgule : round(colMeans(is.na(PassageL1L2)*100), 2) passage_en_l2_2_ans effectif_neobacheliers_passage 17.41 17.41 sect_disciplinaire_lib sexe 0.00 0.00 age_au_bac_lib passage_en_l2_1_2_ans 0.00 17.41 serie_bac_lib age_au_bac 0.00 0.00 gd_discipline gd_discipline_lib 0.00 0.00 mention_bac_lib discipline 0.00 0.00 reorientation_en_dut discipline_lib 17.41 0.00 reorientation_en_dut_1_an redoublement_en_l1 17.41 17.41 passage_en_l2_1_an cohorte_passage 17.41 0.00 reorientation_en_dut_2_ans sect_disciplinaire 17.41 0.00 sexe_lib mention_bac 0.00 0.00 serie_bac age_bac 0.00 0.00 type_bac mention_bac_bis 0.00 0.00 Différents packages existent pour détecter et visualiser les données manquantes. Lun dentre eux est le package naniar : quelques fonctions permettent dabord de décrire la base selon ses valeurs manquantes. library(naniar) # ci-dessous : nombre de cellules du tableau ou de n_ij d&#39;une matrice # qui correspondent à des valeurs manquantes : n_miss(PassageL1L2) [1] 7672 # pour les avoir en proportion (déjà en %, sinon utiliser `prop_miss(PassageL1L2)`) pct_miss(PassageL1L2) [1] 5.357243 # ci-dessous : nombre de cellules du tableau ou de n_ij d&#39;une matrice # qui correspondent à des valeurs renseignées : n_complete(PassageL1L2) [1] 135536 #en proportion pct_complete(PassageL1L2) [1] 94.64276 On peut ensuite visualiser le nombre de valeurs manquantes par variable, avec la fonction gg_miss_var(). # 1er type de visualisation des valeurs manquantes PassageL1L2 %&gt;% gg_miss_var() On peut également demander dans gg_miss_var() à ce que les valeurs soient en pourcentage, avec largument show_pct=TRUE. On peut aussi réaliser des graphiques montrant le nombre de valeurs manquantes pour lensemble des variables numériques de la base, en fonction dune autre variable de nature factor, avec largument fct= dans gg_miss_var(). Cela est intéressant pour voir si certaines valeurs manquantes des variables se retrouvent davantage dans des modalités précises dune autre variable. Par exemple, ici, selon la série au bac : PassageL1L2 %&gt;% select(where(is.numeric), serie_bac_lib) %&gt;% gg_miss_fct(fct = serie_bac_lib) On voit que les valeurs manquantes sont plus nombreuses en proportion pour la modalité BAC L et sont moins nombreuses dans la modalité BAC S ; elles ne se distribuent ainsi pas de manière uniforme selon la variable de série du bac, en revanche comme on lavait vu les proportions sont les mêmes quelle que soit la valeur manquante Plus généralement, la fonction gg_miss_upset() de ce package permet de visualiser des dépendances entre les valeurs manquantes des variables ; mais ici cela na pas grand intérêt en réalité car les valeurs manquantes sont présentes pour toutes les variables numériques aux mêmes cellules Voici le code néanmoins : PassageL1L2 %&gt;% select_if(is.numeric) %&gt;% gg_miss_upset() Toujours pour information, une autre fonction pour visualiser des combinaisons entre des variables comportant des valeurs manquantes est aggr() du package VIM. De même, voici le code : library(VIM) PassageL1L2 %&gt;% select_if(is.numeric) %&gt;% aggr(sortVar=TRUE, only.miss = TRUE) Enfin, il est possible dappliquer la fonction geom_miss_point() à un ggplot, dans ce cas les valeurs manquantes de la ou des variables sont remplacées par des valeurs 10% plus basses que la valeur minimum observée des variables, et cela afin de les visualiser. Il existe bien sûr bien dautres packages, comme funModeling, Amelia et sa fonction missmap(), ou encore visdat et sa fonction vis_miss(), etc. Dautres packages comme VIM ou MICE permettent non seulement de visualiser ces valeurs manquantes mais de leur appliquer des techniques pour les gérer, cest ce que lon va voir maintenant en résumé. 3.2.2 Gérer les valeurs manquantes Il est bien de connaître le nombre et la proportion de valeurs manquantes dans nos données, comment ces dernières se répartissent entre elles, etc., mais il faut aussi comprendre quel impact elles peuvent avoir sur des analyses statistiques, de régressions ou autres algorithmes. Dans une base de données tirée dune enquête, les valeurs manquantes peuvent provenir dune non-réponse de la part de lenquêté (que ce soit un individu ou une entreprise), cette non-réponse pouvant être totale (on a aucune donnée pour cet enquêté alors quil fait partie de léchantillon) ou partielle (on a une partie des réponses mais pas à toutes les questions et donc des variables parfois avec des valeurs manquantes) ; ou bien encore elles peuvent être dues à une mauvaise saisie de linformation par lenquêteur. La pondération, si elle est présente dans une enquête, peut permettre de corriger de cette non-réponse totale, voire partielle. Les conséquences des valeurs manquantes dans une base de données dépendent de plusieurs choses : on doit dabord se demander si linformation perdue aurait été pertinente et/ou aurait apporté un élément particulier/supplémentaire. Ensuite, la perte éventuelle dinformation est-elle importante, en nombre/en proportion. Et enfin (et surtout), peut-elle créer un biais lors de lestimation et précision du phénomène que lon souhaite observer, décrire, analyser, etc. Selon limportance de ces conséquences, il faut traiter ces valeurs manquantes, cest-à-dire utiliser une procédure la plus adaptée possible selon le potentiel biais repéré. Traditionnellement dans la littérature, on distingue 3 types de valeurs manquantes : valeur manquante entièrement due au hasard (MCAR pour Missing completely at random) : il ny a pas de lien entre la valeur manquante pour une variable donnée et les autres variables, dit autrement la probabilité pour une variable quelle ait une valeur manquante est constante dans les données, elle ne diffère pas selon dautres caractéristiques des individus ; valeur manquante due au hasard (MAR pour Missing at random) : il y a un lien entre la valeur manquante pour une variable donnée et les valeurs observées dautres variables, cest-à-dire que la probabilité pour une variable quelle ait une valeur manquante dépend dautres variables (mais de leurs valeurs observées), elle ne sera donc pas la même selon les individus ; valeur ne manquant pas au hasard (NMAR pour Non missing at random) : il y a un lien entre la valeur manquante pour une variable et les valeurs manquantes/non observées dautres variables. Ce sont celles qui risquent dentraîner des biais importants si on ne les traite pas. Comment alors les gérer ? En pratique, il est dusage lorsque la proportion de valeurs manquantes ne dépasse pas 5% des données de ne rien faire de particulier ou simplement de les supprimer. Sinon, on essaye dappliquer plusieurs méthodes, simples ou plus complexes. Dans le cas de valeurs manquantes entièrement dues au hasard (MCAR) et/ou dune faible proportion des valeurs manquantes dans le total de la table de données, on peut décider de supprimer toutes les lignes qui contiennent au moins une valeur manquante, afin davoir une table de données complètes, on peut utiliser la fonction na.omit() ou complete.cases(). PassageL1L2_sansNA &lt;- na.omit(PassageL1L2) # OU : # PassageL1L2_sansNA &lt;- PassageL1L2[complete.cases(PassageL1L2), ] # Pour vérification : summary(PassageL1L2_sansNA) passage_en_l2_2_ans effectif_neobacheliers_passage Min. : 0.000 Min. : 1.00 1st Qu.: 0.000 1st Qu.: 2.00 Median : 0.000 Median : 6.00 Mean : 4.316 Mean : 35.12 3rd Qu.: 2.000 3rd Qu.: 23.00 Max. :571.000 Max. :2454.00 sect_disciplinaire_lib sexe Sciences juridiques : 186 1:2264 Langues et littératures étrangères: 170 2:2285 Psychologie : 169 Langues étrangères appliquées : 168 STAPS : 168 Histoire : 167 (Other) :3521 age_au_bac_lib passage_en_l2_1_2_ans A l&#39;heure ou en avance :1750 Min. : 0.00 En retard d&#39;un an :1439 1st Qu.: 1.00 En retard de plus d&#39;un an:1004 Median : 2.00 Non pris en compte : 356 Mean : 18.63 3rd Qu.: 8.00 Max. :1950.00 serie_bac_lib age_au_bac gd_discipline BAC ES : 890 R0:1750 DSA : 927 BAC L : 698 R1:1439 LLSH :2112 BAC professionnel : 356 R2:1004 SANTE: 9 BAC S :1046 R4: 356 SI :1333 BAC STMG : 694 STAPS: 168 BAC technologique hors STMG: 865 gd_discipline_lib mention_bac_lib Droit, gestion, économie, AES : 927 Assez bien : 896 Lettres, langues et sciences humaines:2112 Bien : 670 Santé : 9 Inconnue : 637 Sciences et sciences de l&#39;ingénieur :1333 Passable deuxième groupe: 925 STAPS : 168 Passable premier groupe :1045 Très bien : 376 discipline reorientation_en_dut 06 :1213 Min. : 0.000 15 : 924 1st Qu.: 0.000 04 : 457 Median : 0.000 02 : 398 Mean : 0.805 01 : 371 3rd Qu.: 0.000 05 : 359 Max. :79.000 (Other): 827 discipline_lib reorientation_en_dut_1_an Sciences humaines et sociales :1213 Min. : 0.0000 Sciences fondamentales et applications: 924 1st Qu.: 0.0000 Lettres, sciences du langage, arts : 457 Median : 0.0000 Sciences économiques, gestion : 398 Mean : 0.6186 Droit, sciences politiques : 371 3rd Qu.: 0.0000 Langues : 359 Max. :63.0000 (Other) : 827 redoublement_en_l1 passage_en_l2_1_an cohorte_passage Min. : 0.0 Min. : 0.00 2014:4549 1st Qu.: 0.0 1st Qu.: 0.00 Median : 1.0 Median : 1.00 Mean : 10.2 Mean : 14.32 3rd Qu.: 6.0 3rd Qu.: 6.00 Max. :1019.0 Max. :1494.00 reorientation_en_dut_2_ans sect_disciplinaire sexe_lib mention_bac Min. : 0.0000 36 : 186 Femme:2285 A: 376 1st Qu.: 0.0000 23 : 170 Homme:2264 B: 670 Median : 0.0000 32 : 169 C: 896 Mean : 0.1864 10 : 168 D:1045 3rd Qu.: 0.0000 24 : 168 P: 925 Max. :21.0000 27 : 167 Q: 637 (Other):3521 serie_bac age_bac type_bac 1: 698 A l&#39;heure ou en avance:1750 Bac général :2634 2: 890 En retard :2443 Bac professionnel: 356 3:1046 Non pris en compte : 356 Bac technologique:1559 4: 694 5: 865 6: 356 mention_bac_bis Très bien : 376 Bien : 670 Assez bien: 896 Passable :1970 Inconnue : 637 On se retrouve alors avec une table de 4 549 observations (lignes), on a donc perdu 959 observations, soit 17.41% des observations de la table initiale, ce qui est cohérent avec ce quon avait retiré de notre première analyse de détection des valeurs manquantes. Des techniques dimputation simple peuvent également être utilisées. On peut par exemple remplacer les valeurs manquantes dune variable quantitative par sa moyenne ou sa médiane, pour cela on peut utiliser la fonction replace_na() du package tidyr, ou impute() du package Hmisc, ou encore na.aggregate() du package zoo On donne ainsi une valeur artificielle pour remplacer la valeur manquante. Dans le cas de variables qualitatives, on peut, de même, imputer la modalité dominante (avec la fonction mode() du package Hmisc ; ou avec largument mode= du package zoo). Par exemple, voici les codes pour remplacer les valeurs manquantes de la variable passage_en_l2_2_ans par sa moyenne (ici on ne fait pas tourner ces codes) : PassageL1L2 %&gt;% mutate(passage_en_l2_2_ans_bis = replace_na(passage_en_l2_2_ans, mean(passage_en_l2_2_ans, na.rm=TRUE))) library(Hmisc) PassageL1L2$passage_en_l2_2_ans_bis &lt;- with(PassageL1L2, impute(passage_en_l2_2_ans, mean)) library(zoo) PassageL1L2$passage_en_l2_2_ans_bis &lt;- na.aggregate(PassageL1L2$passage_en_l2_2_ans, FUN = mean) On peut néanmoins réaliser ce type dimputation simple de manière un petit peu plus subtile. Par exemple, la moyenne dune variable peut différer selon dautres variables. Dans ce cas, on va donc remplacer les valeurs manquantes de la variable selon la moyenne associée à chaque modalité de lautre variable en ajoutant un group_by() avant la fonction mutate() si lon utilise la fonction replace_na() par exemple. Si on ne veut pas supprimer ces lignes dobservations et perdre ainsi dautres informations (celles des variables pour lesquelles la valeur était renseignée pour cette même observation), on peut simplement créer une variable indicatrice de valeur manquante, habituellement 9 ou 999 pour des variables quantitatives, ou une modalité Manquant ou Missing pour des variables qualitatives. Plusieurs autres méthodes existent également dans le cas de valeurs manquantes dues au hasard (MAR), en voici la liste pour information et sans prétention dexhaustivité : - analyse pondérée pour des valeurs MAR qui consiste à calculer la probabilité quune observation soit complète et ensuite à affecter à chacune des observations complètes, un poids inversement proportionnel à cette probabilité ; - imputation de la dernière observation pour des données temporelles ; - imputation hot-deck qui consiste à remplacer la valeur manquante par une valeur observée chez un autre individu ayant les mêmes caractéristiques, ou cold-deck (même démarche que précédement, sauf que la valeur imputée vient dune autre source) ; - imputation par le plus proche voisin en utilisant une fonction de distance basée sur plusieurs autres variables/caractéristiques de lindividu ; - imputation par un modèle de régression où lon va remplacer la valeur manquante par une valeur prédite obtenue par régression sur données complètes de la variable comportant des valeurs manquantes. Il y a aussi des techniques plus complextes dimputation multiple qui consiste à créer plusieurs valeurs possibles pour une valeur manquante dune variable, cela peut être adaptée là aussi lorsque les valeurs manquantes sont dues au hasard (MAR). Vous trouverez de multiples ressources sur internet dans des ouvrages libres daccès, ou vous pouvez aller voir un des chapitres de louvrage principal support du cours (Husson, 2018), avec des exemples dutilisation. 3.2.3 Détecter et visualiser les valeurs aberrantes Pour cela, on va utiliser une autre base, téléchargée sur opendatasoft à partir de la fonction créée lors de la séance 1 ou 2) de M. Grasland. Cette base dont le nom est aides-entreprises-covid-19-france renseigne du nombre daides financières et de leur montant accordées aux entreprises françaises durant la crise du covid_19, selon notamment le secteur dactivité et la localisation géographique. # Rappel fonction (soit vous l&#39;avez encore dans votre environnement, soit # vous l&#39;avez sauvegardé et dans ce cas il faut l&#39;appeler, soit vous devez # refaire tourner les lignes de codes suivantes...) get_data &lt;- function(idtab, rows, start) { url &lt;- paste0(&quot;https://public.opendatasoft.com/api/records/1.0/search/?dataset=&quot;,idtab,&quot;&amp;q=&amp;rows=&quot;,rows,&quot;&amp;start=&quot;,start,sep=&quot;&quot;) x &lt;- GET(url) y &lt;- fromJSON(rawToChar((x$content))) don &lt;- y$records$fields return(don) } dt_aidesCovid &lt;- get_data(idtab = &quot;aides-entreprises-covid-19-france&quot;, rows=2000, start=0) dt_aidesCovid %&gt;% glimpse() Rows: 1,680 Columns: 13 $ reg_code &lt;int&gt; 84, 84, 84, 84, 84, 84, 27, 27, 27, 53, 53, 24~ $ geo_point_2d &lt;list&gt; &lt;45.263906, 5.573978&gt;, &lt;45.728000, 4.164813&gt;,~ $ naf_section_name &lt;chr&gt; &quot;Arts, spectacles et activités récréatives&quot;, &quot;~ $ nombre_entreprises &lt;int&gt; 1980, 3034, 2188, 6577, 3350, 6772, 61, 45, 23~ $ plan &lt;chr&gt; &quot;Fonds de solidarité&quot;, &quot;Fonds de solidarité&quot;, ~ $ financial_support_count &lt;int&gt; 15958, 8936, 21447, 19967, 18693, 16910, 366, ~ $ reg_name &lt;chr&gt; &quot;Auvergne-Rhône-Alpes&quot;, &quot;Auvergne-Rhône-Alpes&quot;~ $ naf_section_code &lt;chr&gt; &quot;R&quot;, &quot;F&quot;, &quot;I&quot;, &quot;F&quot;, &quot;N&quot;, &quot;Q&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;~ $ total_meuros &lt;dbl&gt; 53.696626, 13.922570, 111.923817, 33.039981, 8~ $ dep_name &lt;chr&gt; &quot;Isère&quot;, &quot;Loire&quot;, &quot;Loire&quot;, &quot;Rhône&quot;, &quot;Rhône&quot;, &quot;~ $ iso3_code &lt;chr&gt; &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX~ $ dep_code &lt;chr&gt; &quot;38&quot;, &quot;42&quot;, &quot;42&quot;, &quot;69&quot;, &quot;69&quot;, &quot;69&quot;, &quot;58&quot;, &quot;89&quot;~ $ total &lt;dbl&gt; 53696626, 13922570, 111923817, 33039981, 83094~ Comme la base précédente, ces données sont micro-agrégées, mais de manière plus simple : ici une observation est juste le croisement dun secteur et dun département, il faut donc sommer les variables pour avoir une idée des montants. La fonction fmt_number() ajoutée à la fin du code ci-dessous permet simplement davoir une séparation visuelle (un blanc ici, le format chez les anglo-saxons est une virgule) par milliers, étant donné ici que nous avons des montants très importants ! dt_aidesCovid %&gt;% summarise(total_aides=sum(total), total_aides_meuros=sum(total_meuros), nb_totales_aides=sum(financial_support_count), nb_totales_entre=sum(nombre_entreprises)) %&gt;% gt() %&gt;% fmt_number(columns = c(&quot;total_aides&quot;, &quot;total_aides_meuros&quot;, &quot;nb_totales_aides&quot;, &quot;nb_totales_entre&quot;), sep_mark = &quot; &quot;, decimals = 0) html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #tmtcwxqzkb .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tmtcwxqzkb .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tmtcwxqzkb .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tmtcwxqzkb .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tmtcwxqzkb .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmtcwxqzkb .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tmtcwxqzkb .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tmtcwxqzkb .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tmtcwxqzkb .gt_column_spanner_outer:first-child { padding-left: 0; } #tmtcwxqzkb .gt_column_spanner_outer:last-child { padding-right: 0; } #tmtcwxqzkb .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tmtcwxqzkb .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #tmtcwxqzkb .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #tmtcwxqzkb .gt_from_md > :first-child { margin-top: 0; } #tmtcwxqzkb .gt_from_md > :last-child { margin-bottom: 0; } #tmtcwxqzkb .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tmtcwxqzkb .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #tmtcwxqzkb .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #tmtcwxqzkb .gt_row_group_first td { border-top-width: 2px; } #tmtcwxqzkb .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tmtcwxqzkb .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tmtcwxqzkb .gt_first_summary_row.thick { border-top-width: 2px; } #tmtcwxqzkb .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmtcwxqzkb .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tmtcwxqzkb .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tmtcwxqzkb .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tmtcwxqzkb .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmtcwxqzkb .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tmtcwxqzkb .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #tmtcwxqzkb .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tmtcwxqzkb .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #tmtcwxqzkb .gt_left { text-align: left; } #tmtcwxqzkb .gt_center { text-align: center; } #tmtcwxqzkb .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tmtcwxqzkb .gt_font_normal { font-weight: normal; } #tmtcwxqzkb .gt_font_bold { font-weight: bold; } #tmtcwxqzkb .gt_font_italic { font-style: italic; } #tmtcwxqzkb .gt_super { font-size: 65%; } #tmtcwxqzkb .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #tmtcwxqzkb .gt_asterisk { font-size: 100%; vertical-align: 0; } #tmtcwxqzkb .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #tmtcwxqzkb .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #tmtcwxqzkb .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } total_aides total_aides_meuros nb_totales_aides nb_totales_entre 35 374 043 233 35 374 10 522 071 2 016 042 On veut plus précisément étudier dans cette sous-section les possibles valeurs aberrantes. On peut alors sortir les valeurs maximum pour chacune de ces variables. dt_aidesCovid %&gt;% summarise(aides_max=max(total), aides_meuros_max=max(total_meuros), nb_max_aides=max(financial_support_count), nb_max_entre=max(nombre_entreprises)) %&gt;% gt() %&gt;% fmt_number(columns = 1:4, sep_mark = &quot; &quot;, decimals = 0) html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #iuwbduyrbe .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #iuwbduyrbe .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #iuwbduyrbe .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #iuwbduyrbe .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #iuwbduyrbe .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #iuwbduyrbe .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #iuwbduyrbe .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #iuwbduyrbe .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #iuwbduyrbe .gt_column_spanner_outer:first-child { padding-left: 0; } #iuwbduyrbe .gt_column_spanner_outer:last-child { padding-right: 0; } #iuwbduyrbe .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #iuwbduyrbe .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #iuwbduyrbe .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #iuwbduyrbe .gt_from_md > :first-child { margin-top: 0; } #iuwbduyrbe .gt_from_md > :last-child { margin-bottom: 0; } #iuwbduyrbe .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #iuwbduyrbe .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #iuwbduyrbe .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #iuwbduyrbe .gt_row_group_first td { border-top-width: 2px; } #iuwbduyrbe .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #iuwbduyrbe .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #iuwbduyrbe .gt_first_summary_row.thick { border-top-width: 2px; } #iuwbduyrbe .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #iuwbduyrbe .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #iuwbduyrbe .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #iuwbduyrbe .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #iuwbduyrbe .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #iuwbduyrbe .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #iuwbduyrbe .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #iuwbduyrbe .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #iuwbduyrbe .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #iuwbduyrbe .gt_left { text-align: left; } #iuwbduyrbe .gt_center { text-align: center; } #iuwbduyrbe .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #iuwbduyrbe .gt_font_normal { font-weight: normal; } #iuwbduyrbe .gt_font_bold { font-weight: bold; } #iuwbduyrbe .gt_font_italic { font-style: italic; } #iuwbduyrbe .gt_super { font-size: 65%; } #iuwbduyrbe .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #iuwbduyrbe .gt_asterisk { font-size: 100%; vertical-align: 0; } #iuwbduyrbe .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #iuwbduyrbe .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #iuwbduyrbe .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } aides_max aides_meuros_max nb_max_aides nb_max_entre 1 642 006 748 1 642 183 615 35 374 Ou faire quelques graphs sur la variable du montant total des aides en milliers deuros total_meuros pour mieux visualiser de possibles valeurs aberrantes, de manière générale avec un histogramme, ou ventilées par région avec des boîtes à moustache : dt_aidesCovid %&gt;% ggplot() + aes(x=total_meuros) + geom_histogram(bins=150) dt_aidesCovid %&gt;% ggplot() + aes(x = reg_name, y = total_meuros) + geom_boxplot() + coord_flip() On voit en effet quelques points qui semblent des valeurs aberrantes ou outliers ; parfois, cest à tel point quon narrive même pas à distinguer les différentes valeurs de la distribution marquées par le Boxplot et par conséquent les boxplot sont ramassées. Pour rappel, dans un boxplot, par défaut un point est affiché comme aberrant sil est en dehors de lintervalle suivant : \\(I=[Q_{1}1.5×IQR ; Q_{3}+1.5×IQR]\\), IQR étant lintervalle interquartile donc la différence entre Q1 et Q3. Mais sagit-il de vraies valeurs aberrantes ? Combien dobservations concernent-elles ? La fonction boxplot.stats() permet de récupérer les valeurs des observations indiquées comme aberrantes, comme cela on peut créer ensuite une variable indiquant si oui ou non lobservation a une valeur aberrante. Faisons-cela pour la variable total_meuros par exemple. # On récupère les valeurs de la partie &#39;out&#39; des sorties de la fonction # &#39;boxplot.stats&#39;, qui correspondent aux valeurs de tout point de données # qui se situe au-delàdes extrêmes de la boxplot val_outliers &lt;- boxplot.stats(dt_aidesCovid$total_meuros)$out # On crée une variable dans notre table d&#39;&quot;identification&quot; de ces outliers # avec comme modalité intiale/par défaut &quot;Faux&quot; dt_aidesCovid$total_meuros_outliers &lt;- &quot;Faux&quot; # On lui indique la modalité &quot;vraie&quot; si l&#39;observation a une valeur &quot;outliers&quot; # pour cette variable dt_aidesCovid$total_meuros_outliers[dt_aidesCovid$total_meuros %in% c(val_outliers)] &lt;- &quot;Vrai&quot; # Puis on regarde la répartition avec la fonction `tabyl()` du package `janitor()` dt_aidesCovid %&gt;% tabyl(total_meuros_outliers) %&gt;% adorn_pct_formatting() %&gt;% adorn_totals(&quot;row&quot;) # A tibble: 3 x 3 total_meuros_outliers n percent &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; 1 Faux 1484 88.3% 2 Vrai 196 11.7% 3 Total 1680 - On y lit que pour cette variable, il y aurait près de 11,6% de valeurs aberrantes telles quindiquées par le boxplot, cela fait beaucoup ! On peut regarder plus précisément à quelles observations elles correspondent et à quel montant. dt_aidesCovid %&gt;% filter(total_meuros_outliers==&#39;Vrai&#39;) %&gt;% select(total_meuros, naf_section_name, dep_name) %&gt;% arrange(total_meuros) %&gt;% head(10) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #neoundeogw .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #neoundeogw .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #neoundeogw .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #neoundeogw .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #neoundeogw .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #neoundeogw .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #neoundeogw .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #neoundeogw .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #neoundeogw .gt_column_spanner_outer:first-child { padding-left: 0; } #neoundeogw .gt_column_spanner_outer:last-child { padding-right: 0; } #neoundeogw .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #neoundeogw .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #neoundeogw .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #neoundeogw .gt_from_md > :first-child { margin-top: 0; } #neoundeogw .gt_from_md > :last-child { margin-bottom: 0; } #neoundeogw .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #neoundeogw .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #neoundeogw .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #neoundeogw .gt_row_group_first td { border-top-width: 2px; } #neoundeogw .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #neoundeogw .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #neoundeogw .gt_first_summary_row.thick { border-top-width: 2px; } #neoundeogw .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #neoundeogw .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #neoundeogw .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #neoundeogw .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #neoundeogw .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #neoundeogw .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #neoundeogw .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #neoundeogw .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #neoundeogw .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #neoundeogw .gt_left { text-align: left; } #neoundeogw .gt_center { text-align: center; } #neoundeogw .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #neoundeogw .gt_font_normal { font-weight: normal; } #neoundeogw .gt_font_bold { font-weight: bold; } #neoundeogw .gt_font_italic { font-style: italic; } #neoundeogw .gt_super { font-size: 65%; } #neoundeogw .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #neoundeogw .gt_asterisk { font-size: 100%; vertical-align: 0; } #neoundeogw .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #neoundeogw .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #neoundeogw .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } total_meuros naf_section_name dep_name 41.39726 Transports et entreposage Nord 41.54758 Commerce Finistère 41.63946 Hébergement et restauration Martinique 41.70506 Activités spécialisées, scientifiques et techniques Bas-Rhin 41.74365 Hébergement et restauration Aube 42.43167 Hébergement et restauration Lot 42.45356 Hébergement et restauration Eure-et-Loir 42.89902 Hébergement et restauration Corrèze 43.24990 Hébergement et restauration Haute-Loire 43.32271 Commerce Morbihan OK on voit donc que cette procédure attribue des valeurs aberrantes pour des valeurs au-dessus de 41.39726 et donc à des observations qui seraient intéressants néanmoins à conserver ; attention par conséquent à identifier les valeurs dites aberrantes, éventuellement avec plusieurs méthodes (cf. ci-dessous) et surtout à les comprendre, il ne sagit pas juste de les identifier pour les exclure ensuite des analyses. Il existe en effet bien dautres méthodes (méthode basée sur les percentiles ; méthode de Hampel), ainsi que des tests : par exemple, le package outliers vous permet de tester si une valeur (max ou min) est bien une valeur aberrante avec la fonction grubbs.test() (attention bis : à utiliser avec grande précaution et beaucoup de parcimonie), ou avec le package EnvStats et la fonction rosnerTest() pour détecter plusieurs outliers à la fois. Pour gérer ces variables aberrantes, on peut les supprimer bien sûr si lon est sûr que la valeur de la variable nest pas normale, par exemple si on a une variable de salaire avec des modalités inférieures à 0, oui dans ce cas ce sont des mauvais outliers (et dailleurs peut-être même pas identifiés comme tel statistiquement) et on peut les supprimer ; de même pour des variables de résultats économiques, on va souvent élaguer la distribution en retirant les 1% (par exemple) du bas et du haut de la distribution pour supprimer des potentiels outliers. Sinon, on les isole en créant une variable dichotomique 0/1 ou Faux/Vrai ; ou on crée une variable qualitative avec plusieurs catégories. Dans les graphiques, en particulier les boîtes à moustache, on peut les supprimer du graphique et mettre une échelle plus réduite pour que celui-ci soit plus lisible, mais en précisant bien dans la légende que certaines valeurs ne sont pas visibles sur le graphique car retirées. dt_aidesCovid %&gt;% ggplot() + aes(x = reg_name, y = total_meuros) + geom_boxplot(outlier.shape = NA) + coord_flip(ylim = c(0,175)) + labs(title = &quot;Distribution des aides financières en millions d&#39;euros, selon la région&quot;, y=&quot;&quot;, x=&quot;Région&quot;, caption=&quot;Rq : les valeurs au-delà de 175 millions d&#39;euros ne sont pas affichées sur le graphique.&quot;) + theme(plot.caption = element_text(hjust=0)) 3.2.4 Découper en classes une variable quantitative On peut enfin découper en classes une variable quantitative et en faire donc une variable qualitative. On utilise pour cela la fonction cut() du langage de base de R. On peut par exemple découper la variable selon les principaux indicateurs de la distribution. dt_aidesCovid %&gt;% get_summary_stats(total_meuros) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #tzlknqcqjh .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tzlknqcqjh .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tzlknqcqjh .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tzlknqcqjh .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tzlknqcqjh .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tzlknqcqjh .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tzlknqcqjh .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tzlknqcqjh .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tzlknqcqjh .gt_column_spanner_outer:first-child { padding-left: 0; } #tzlknqcqjh .gt_column_spanner_outer:last-child { padding-right: 0; } #tzlknqcqjh .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tzlknqcqjh .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #tzlknqcqjh .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #tzlknqcqjh .gt_from_md > :first-child { margin-top: 0; } #tzlknqcqjh .gt_from_md > :last-child { margin-bottom: 0; } #tzlknqcqjh .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tzlknqcqjh .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #tzlknqcqjh .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #tzlknqcqjh .gt_row_group_first td { border-top-width: 2px; } #tzlknqcqjh .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tzlknqcqjh .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tzlknqcqjh .gt_first_summary_row.thick { border-top-width: 2px; } #tzlknqcqjh .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tzlknqcqjh .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tzlknqcqjh .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tzlknqcqjh .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tzlknqcqjh .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tzlknqcqjh .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tzlknqcqjh .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #tzlknqcqjh .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tzlknqcqjh .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #tzlknqcqjh .gt_left { text-align: left; } #tzlknqcqjh .gt_center { text-align: center; } #tzlknqcqjh .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tzlknqcqjh .gt_font_normal { font-weight: normal; } #tzlknqcqjh .gt_font_bold { font-weight: bold; } #tzlknqcqjh .gt_font_italic { font-style: italic; } #tzlknqcqjh .gt_super { font-size: 65%; } #tzlknqcqjh .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #tzlknqcqjh .gt_asterisk { font-size: 100%; vertical-align: 0; } #tzlknqcqjh .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #tzlknqcqjh .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #tzlknqcqjh .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } variable n min max median q1 q3 iqr mad mean sd se ci total_meuros 1680 0.006 1642.007 5.989 1.828 17.643 15.815 7.54 21.056 60.355 1.473 2.888 dt_aidesCovid$total_meuros_cat &lt;- cut(dt_aidesCovid$total_meuros, breaks = c(0, quantile(dt_aidesCovid$total_meuros,0.25), mean(dt_aidesCovid$total_meuros), max(dt_aidesCovid$total_meuros))) dt_aidesCovid %&gt;% tabyl(total_meuros_cat) %&gt;% adorn_pct_formatting() %&gt;% adorn_totals(&quot;row&quot;) %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #bgcfhbezqt .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #bgcfhbezqt .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #bgcfhbezqt .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #bgcfhbezqt .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #bgcfhbezqt .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bgcfhbezqt .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #bgcfhbezqt .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #bgcfhbezqt .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #bgcfhbezqt .gt_column_spanner_outer:first-child { padding-left: 0; } #bgcfhbezqt .gt_column_spanner_outer:last-child { padding-right: 0; } #bgcfhbezqt .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #bgcfhbezqt .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #bgcfhbezqt .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #bgcfhbezqt .gt_from_md > :first-child { margin-top: 0; } #bgcfhbezqt .gt_from_md > :last-child { margin-bottom: 0; } #bgcfhbezqt .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #bgcfhbezqt .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #bgcfhbezqt .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #bgcfhbezqt .gt_row_group_first td { border-top-width: 2px; } #bgcfhbezqt .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #bgcfhbezqt .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #bgcfhbezqt .gt_first_summary_row.thick { border-top-width: 2px; } #bgcfhbezqt .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bgcfhbezqt .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #bgcfhbezqt .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #bgcfhbezqt .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #bgcfhbezqt .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #bgcfhbezqt .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #bgcfhbezqt .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #bgcfhbezqt .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #bgcfhbezqt .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #bgcfhbezqt .gt_left { text-align: left; } #bgcfhbezqt .gt_center { text-align: center; } #bgcfhbezqt .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #bgcfhbezqt .gt_font_normal { font-weight: normal; } #bgcfhbezqt .gt_font_bold { font-weight: bold; } #bgcfhbezqt .gt_font_italic { font-style: italic; } #bgcfhbezqt .gt_super { font-size: 65%; } #bgcfhbezqt .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #bgcfhbezqt .gt_asterisk { font-size: 100%; vertical-align: 0; } #bgcfhbezqt .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #bgcfhbezqt .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #bgcfhbezqt .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } total_meuros_cat n percent (0,1.83] 420 25.0% (1.83,21.1] 901 53.6% (21.1,1.64e+03] 359 21.4% Total 1680 - On a une classe majoritaire (du Q1 à la moyenne), mais cela nous permet de distinguer 2 classes pour lesquelles le montant des aides financières est très faible ou au contraire très élevé. À noter que si la variable quantitative en question a des valeurs manquantes, il faudra utiliser la fonction fancycut() ou wafflecut() du package fancycut, linconvénient est que cela nous oblige à indiquer les valeurs des différents indicateurs de la distribution. Pour trouver le même résultat que précédemment, le code serait alors le suivant : library(fancycut) dt_aidesCovid$total_meuros_cat1 &lt;- fancycut(dt_aidesCovid$total_meuros, &#39;1&#39;=&#39;(0,1.83]&#39;, &#39;2&#39;=&#39;(1.83,21]&#39;, &#39;3&#39;=&#39;(21,1.64e+03]&#39;, na.bucket=&#39;Manquant&#39;) "],["04-Enregistrement-tables-donnees.html", "Section 4 Enregistrement des tables", " Section 4 Enregistrement des tables Et voilà, on a bien trituré ces deux bases de données, maintenant on peut les enregistrer dans notre projet pour pouvoir les réutiliser lors de la prochaine séance. # On enregistre la table de données pour l&#39;utiliser ultérieurement saveRDS(object = PassageL1L2, file = &quot;Data/PassageL1L2.Rdata&quot;) saveRDS(object = dt_aidesCovid, file = &quot;Data/dt_aidesCovid.Rdata&quot;) "],["05-Questions-fouille-donnees.html", "Section 5 Quelles questions intéressantes pour une fouille de données sur cette base ? 5.1 Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015", " Section 5 Quelles questions intéressantes pour une fouille de données sur cette base ? Quelles sont les questions intéressantes que lon peut se poser ? Quest-ce quon va pouvoir mettre en évidence à partir de ces données ? Une première chose peut être de comprendre qui sont de manière générale les étudiants de 1ère année daprès cette base de données. On peut donc dabord décrire la cohorte des bacheliers 2014 inscrits en 2014-2015 en première année de licence (hors licence professionnelle) dans lenseignement supérieur public, selon plusieurs caractéristiques : - la série du bac, - la mention, - lâge au bac, - le sexe, et - enfin le type de licence dans lequel il sont inscrits. Ensuite, on peut vouloir comprendre le passage de la L1 à la L2 : qui passe en L2 en 1 an, qui redouble, qui se réoriente en DUT. On recherche donc les profils de chacun de ces groupes pour analyser leurs spécificités. On peut à ce stade émettre quelques hypothèses : lune toute simple est quil y aura plus de mentions au bac dans le groupe du passage en L2 en un an, alors quil y aurait plus de résultats passables au bac dans le groupe des redoublements ; de même pour lâge au bac, on peut sattendre à avoir plus détudiants en retard au bac qui redouble. Concernant la série du bac et la mention, on peut sattendre à ne pas avoir de spécificités précises dans lensemble des licences mais au sein de certaines licences selon le domaine. Cest lune des dernières questions que lon peut en effet se poser : existe-t-il des différences entre les disciplines des licences, par exemple certaines séries au bac sont-elles corrélées à davantage déchec - cest-à-dire de redoublement - à la fin de la L1 dans des disciplines particulières ? Le fait dêtre une femme est-il corrélé à une meilleure réussite en L1 (passage en L2 en un an) dans certaines displines ? Etc. Avant cela, si vous avez commencé un nouveau script Rmarkdown, vous devez importer la table PassageL1L2 enregistrée précédemment dans le dossier Data de votre projet. Pour cela, il faut utiliser la fonction readRDS(), comme ci-dessous : PassageL1L2 &lt;- readRDS(file =&quot;Data/PassageL1L2.Rdata&quot;) 5.1 Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015 On peut créer un tableau synthétique avec les statistiques descriptives sur les variables énumérées plus haut, et ensuite réaliser des graphiques pour mieux visualiser les résultats. Un type de tableau peut être en colonnes les effectifs et les pourcentages et en ligne les différentes variables. Encore une fois, étant donné la nature micro-agrégée de nos données, nous ne pouvons pas réaliser directement ses tableaux avec les fonctions traditionnelles types freq() du package questionR ou tabyl() du package janitor ; il faut créer nos propres sommes et pourcentages. Cela peut être fait avec la fonction summarise() précédée dun group_by() pour spécifier la variable correspondant à la caractéristique qui nous intéresse, mais aussi plus rapidement avec la fonction count() en inscrivant en premier argument la variable (ou caractéristique) et en argument wt= (qui est normalement la variable de pondération) notre variable de sommation. On crée ensuite les pourcentages dans une fonction mutate() ; et on peut ajouter éventuellement une ligne totale (argument row) avec la fonction adorn_totals(\"row\"). Enfin, par défaut la fonction count() crée une variable n, on peut alors renommer celle-ci en Effectif. PassageL1L2 %&gt;% count(type_bac, wt=effectif_neobacheliers_passage) %&gt;% mutate(Pourcentage=prop.table(n)*100, Pourcentage=round(Pourcentage, 1)) %&gt;% adorn_totals(&quot;row&quot;) %&gt;% rename(Effectif=n) %&gt;% gt() %&gt;% fmt_number(columns = 2, sep_mark = &quot; &quot;, decimals = 0) html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #tmavsrlszu .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tmavsrlszu .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tmavsrlszu .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tmavsrlszu .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tmavsrlszu .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmavsrlszu .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tmavsrlszu .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tmavsrlszu .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tmavsrlszu .gt_column_spanner_outer:first-child { padding-left: 0; } #tmavsrlszu .gt_column_spanner_outer:last-child { padding-right: 0; } #tmavsrlszu .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tmavsrlszu .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #tmavsrlszu .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #tmavsrlszu .gt_from_md > :first-child { margin-top: 0; } #tmavsrlszu .gt_from_md > :last-child { margin-bottom: 0; } #tmavsrlszu .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tmavsrlszu .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #tmavsrlszu .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #tmavsrlszu .gt_row_group_first td { border-top-width: 2px; } #tmavsrlszu .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tmavsrlszu .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tmavsrlszu .gt_first_summary_row.thick { border-top-width: 2px; } #tmavsrlszu .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmavsrlszu .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tmavsrlszu .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tmavsrlszu .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tmavsrlszu .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tmavsrlszu .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tmavsrlszu .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #tmavsrlszu .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tmavsrlszu .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #tmavsrlszu .gt_left { text-align: left; } #tmavsrlszu .gt_center { text-align: center; } #tmavsrlszu .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tmavsrlszu .gt_font_normal { font-weight: normal; } #tmavsrlszu .gt_font_bold { font-weight: bold; } #tmavsrlszu .gt_font_italic { font-style: italic; } #tmavsrlszu .gt_super { font-size: 65%; } #tmavsrlszu .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #tmavsrlszu .gt_asterisk { font-size: 100%; vertical-align: 0; } #tmavsrlszu .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #tmavsrlszu .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #tmavsrlszu .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } type_bac Effectif Pourcentage Bac général 120 643 75.5 Bac professionnel 14 527 9.1 Bac technologique 24 596 15.4 Total 159 766 100.0 Il va donc falloir faire cela pour chacune de nos variables/caractéristiques ; pour ensuite les rassembler dans un unique tableau que lon pourra construire et mettre en forme avec le package gt. Pour éviter de faire du copié-collé du code précédent, et donc pour systématiser nos procédures, on peut construire une fonction. Il nous faut donc faire un petit détour sur la manière de construire une fonction dans R. "],["06-Fonctions.html", "Section 6 Systématiser nos procédures : construire une fonction", " Section 6 Systématiser nos procédures : construire une fonction Pour ré-utiliser un code de façon plus automatique, créer des fonctions est très utile (et on peut même les stocker dans un fichier .r pour les réutiliser plus tard pour une autre étude). Lidée est quà partir dun bloc dinstructions ou de lignes de codes, on lintègre dans une fonction qui portera un nom et qui pourra être appliquée sur les paramètres que lon veut (table/objet différent, variables différentes) et qui nous retournera une valeur en sortie (quil faut préciser donc). Par exemple : # Exemple fonction avec 3 arguments nom_fonction &lt;- function(data, var1, var2) { expression... # Ce que la fonction fait return(tab) # Optionnel, mais la plupart du temps utilisé (!), # pour sortir le résultat de la fonction } # L&#39;appel de la fonction devra ainsi préciser la table de données sur laquelle # l&#39;appliquer et les autres arguments : nom_fonction(data = nom_de_ma_table , var1 = nom_de_ma_variable1, var2 = nom_de_ma_variable2) # De plus, on pourra créer un nouvel objet (ici &quot;tab_var&quot;) pour stocker la table # qui est en valeur de sortie de la fonction : tab_var &lt;- nom_fonction(data = nom_de_ma_table , var1 = nom_de_ma_variable1, var2 = nom_de_ma_variable2) Les arguments doivent donc être précisés en entrée de notre fonction, si on ne les précise pas cela nous retournera une erreur à moins que lon ait spécifié des valeurs par défaut (ce qui peut être utile si on utilise souvent les mêmes paramètres, cest-à-dire la même base de données par exemple) ; il peut y avoir autant darguments que lon souhaite. Si lon utilise le langage tidyverse, il faut connaître quelques petits trucs pour écrire une fonction. Le schéma suivant réalisé par Julien Barnier du CNRS nous sera très utile. Source : Julien Barnier, https://twitter.com/lapply/status/1493908215796535296?s=20&amp;t=p4aYIEV4GsGS3TGftPa0Nw. Vous trouverez également des informations utiles ici. On peut dabord créer une fonction reprenant le code précédent pour la construction de tableau. On lappelle TAB, et on lui donne comme arguments data, , var1 et var_sum. Largument  est pratique si lon ne sait pas combien il y aura de variable(s) dans la fonction à laquelle elle sapplique, cest-à-dire autant 0 variable, 1 variable ou plus dune variable ; mais elle peut-être aussi dangereuse si on ne se souvient plus quon la créée et/ou si on ne fait pas attention à bien remplir les autres arguments avec les noms correspondants. Ici, elle nous est utile pour introduire la fonction group_by() quon nutilisera pas au début de lanalyse, mais après si. Ensuite, dans le langage tidyverse au sein dune fonction, il faut appeler une variable avec des doubles-accolades. Si lon utilisait une fonction summarise(), une autre subtilité à connaître dans une fonction avec langage tidyverse, est par exemple que cette syntaxe ne sera pas reconnue summarise({{ nom_var }} = mean({{ var }}, na.rm=TRUE, car il faut indiquer non pas un = mais un := pour que la fonction puisse être lue lorsque dun côté le nom donné à la variable est de type caractère ou string. Enfin, il ne faut pas oublier de retourner un objet en sortie avec return(). Essayez donc de créer un fonction tableau(), reprenant le code de la section précédente et ci-dessous pour information : PassageL1L2 %&gt;% count(type_bac, wt=effectif_neobacheliers_passage) %&gt;% mutate(Pourcentage=prop.table(n)*100, Pourcentage=round(Pourcentage, 1)) %&gt;% adorn_totals(&quot;row&quot;) %&gt;% rename(Effectif=n) tableau &lt;- function(data, ..., var1, var_sum){ tab_1 &lt;- data %&gt;% group_by(...) %&gt;% count({{ var1 }}, wt={{ var_sum }}) %&gt;% mutate(Pourcentage=prop.table(n)*100, Pourcentage=round(Pourcentage, 1)) %&gt;% rename(Effectif=n, Variable={{ var1 }}) return(tab_1) } Essayez décrire une seconde fonction somme() permettant de systématiser le code suivant (utilisé dans la séance 1), en ajoutant une fonction de filtre qui peut être utile si lon veut sintéresser aux effectifs pour une discipline en particulier par exemple mais sans que lon sache si on lutilisera toujours : PassageL1L2 %&gt;% summarise(&#39;Nombre total de bacheliers inscrits en 2014-2015 en licence&#39; = sum(effectif_neobacheliers_passage, na.rm=TRUE)) somme &lt;- function(data, ..., nom_var, var1){ som_1 &lt;- data %&gt;% filter(...) %&gt;% summarise({{nom_var}}:=sum({{var1}}, na.rm=T)) return(som_1) } "],["07-Analyse-descriptive.html", "Section 7 (reprise de l)Analyse descriptive 7.1 Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015 7.2 Profils des étudiants selon leur situation en fin de L1", " Section 7 (reprise de l)Analyse descriptive 7.1 Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015 On peut maintenant revenir sur notre analyse et utiliser la fonction tableau() créée pour construire notre tableau final qui va se composer : de 3 colonnes : une colonne nommée Variable, une deuxième colonne nommée Effectif et une troisième colonne nommée Pourcentagee; et de plusieurs lignes qui correspondront aux modalités des variables suivantes : type_bac, serie_bac_lib, mention_bac_bis, age_bac, sexe_lib,gd_discipline_lib ; et une ligne Total à la fin. Il faut donc utiliser notre foncion tableau() pour ces 6 variables, sauver les tableaux créer dans des objets, penser pour le dernier tableau à ajouter la ligne Total, et ensuite concaténer ces 6 tableaux à laide de la fonction rbind(). Essayons donc !! tab1 &lt;- tableau(PassageL1L2, var1=type_bac, var_sum=effectif_neobacheliers_passage) tab2 &lt;- tableau(PassageL1L2, var1=serie_bac_lib, var_sum=effectif_neobacheliers_passage) tab3 &lt;- tableau(PassageL1L2, var1=mention_bac_bis, var_sum=effectif_neobacheliers_passage) tab4 &lt;- tableau(PassageL1L2, var1=age_bac, var_sum=effectif_neobacheliers_passage) tab5 &lt;- tableau(PassageL1L2, var1=sexe_lib, var_sum=effectif_neobacheliers_passage) # vu que c&#39;est notre dernière table, on va ajouter le total: tab6 &lt;- tableau(PassageL1L2, var1=gd_discipline_lib, var_sum=effectif_neobacheliers_passage) %&gt;% adorn_totals(&quot;row&quot;) Tabfinal &lt;- rbind(tab1, tab2, tab3, tab4, tab5, tab6) Tabfinal %&gt;% gt() html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #oiuxgygcdn .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #oiuxgygcdn .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #oiuxgygcdn .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #oiuxgygcdn .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #oiuxgygcdn .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #oiuxgygcdn .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #oiuxgygcdn .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #oiuxgygcdn .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #oiuxgygcdn .gt_column_spanner_outer:first-child { padding-left: 0; } #oiuxgygcdn .gt_column_spanner_outer:last-child { padding-right: 0; } #oiuxgygcdn .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #oiuxgygcdn .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #oiuxgygcdn .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #oiuxgygcdn .gt_from_md > :first-child { margin-top: 0; } #oiuxgygcdn .gt_from_md > :last-child { margin-bottom: 0; } #oiuxgygcdn .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #oiuxgygcdn .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #oiuxgygcdn .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #oiuxgygcdn .gt_row_group_first td { border-top-width: 2px; } #oiuxgygcdn .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #oiuxgygcdn .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #oiuxgygcdn .gt_first_summary_row.thick { border-top-width: 2px; } #oiuxgygcdn .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #oiuxgygcdn .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #oiuxgygcdn .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #oiuxgygcdn .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #oiuxgygcdn .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #oiuxgygcdn .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #oiuxgygcdn .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #oiuxgygcdn .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #oiuxgygcdn .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #oiuxgygcdn .gt_left { text-align: left; } #oiuxgygcdn .gt_center { text-align: center; } #oiuxgygcdn .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #oiuxgygcdn .gt_font_normal { font-weight: normal; } #oiuxgygcdn .gt_font_bold { font-weight: bold; } #oiuxgygcdn .gt_font_italic { font-style: italic; } #oiuxgygcdn .gt_super { font-size: 65%; } #oiuxgygcdn .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #oiuxgygcdn .gt_asterisk { font-size: 100%; vertical-align: 0; } #oiuxgygcdn .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #oiuxgygcdn .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #oiuxgygcdn .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Variable Effectif Pourcentage Bac général 120643 75.5 Bac professionnel 14527 9.1 Bac technologique 24596 15.4 BAC ES 46424 29.1 BAC L 31089 19.5 BAC professionnel 14527 9.1 BAC S 43130 27.0 BAC STMG 13959 8.7 BAC technologique hors STMG 10637 6.7 Très bien 7253 4.5 Bien 19856 12.4 Assez bien 44192 27.7 Passable 83503 52.3 Inconnue 4962 3.1 A l'heure ou en avance 107393 67.2 En retard 37846 23.7 Non pris en compte 14527 9.1 Femme 94697 59.3 Homme 65069 40.7 Droit, gestion, économie, AES 53076 33.2 Lettres, langues et sciences humaines 65514 41.0 Santé 21 0.0 Sciences et sciences de l'ingénieur 26971 16.9 STAPS 14184 8.9 Total 159766 100.0 Cela nous donne donc un tableau quil reste à mettre en forme pour quil puisse être utilisé dans un rapport. Comme évoqué précédemment, jutilise pour cela le package gt, mais dautres packages existent Vous trouverez des informations sur les diverses options de ce package ici ou un tutoriel là ou encore là. On peut ainsi ajouter des sections pour bien distinguer nos différentes variables avec tab_row_group() , puis ajouter un titre avec tab_header(title=)n et une légende avec tab_source_note() , ou encore mettre en gras certains noms du tableau avec cols_label(), etc. Au final, cela donne ça : Tabfinal %&gt;% gt() %&gt;% fmt_number(columns = &quot;Effectif&quot;, sep_mark = &quot; &quot;, decimals = 0) %&gt;% tab_row_group(label=md(&quot;**Total**&quot;), rows=25) %&gt;% tab_row_group(label=md(&quot;**Discipline de la licence suivie**&quot;), rows=20:24) %&gt;% tab_row_group(label=md(&quot;**Sexe**&quot;), rows=18:19) %&gt;% tab_row_group(label=md(&quot;**Âge au bac**&quot;), rows=15:17) %&gt;% tab_row_group(label=md(&quot;**Mention au bac**&quot;), rows=10:14) %&gt;% tab_row_group(label=md(&quot;**Série plus précise du bac**&quot;), rows=4:9) %&gt;% tab_row_group(label=md(&quot;**Type de bac**&quot;), rows=1:3) %&gt;% tab_header(title=md(&#39;**Caractéristiques des bacheliers 2014 inscrits en 2014-2015 en première année de licence**&#39;)) %&gt;% cols_label(Variable = &quot; &quot;, Effectif = md(&#39;**Effectif**&#39;), Pourcentage = md(&#39;**Pourcentage**&#39;)) %&gt;% tab_source_note(source_note = html(&quot;Source : Open-data ESR.&lt;br&gt;Champ : Bacheliers 2014 inscrits en première année de licence (hors licence professionnelle) dans lenseignement supérieur public en 2014-2015.&lt;br&gt;Traitement des données : Camillle Signoretto&quot;)) html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #jpmsaqctey .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #jpmsaqctey .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jpmsaqctey .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #jpmsaqctey .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #jpmsaqctey .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpmsaqctey .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jpmsaqctey .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #jpmsaqctey .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #jpmsaqctey .gt_column_spanner_outer:first-child { padding-left: 0; } #jpmsaqctey .gt_column_spanner_outer:last-child { padding-right: 0; } #jpmsaqctey .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #jpmsaqctey .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #jpmsaqctey .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #jpmsaqctey .gt_from_md > :first-child { margin-top: 0; } #jpmsaqctey .gt_from_md > :last-child { margin-bottom: 0; } #jpmsaqctey .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #jpmsaqctey .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #jpmsaqctey .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #jpmsaqctey .gt_row_group_first td { border-top-width: 2px; } #jpmsaqctey .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jpmsaqctey .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #jpmsaqctey .gt_first_summary_row.thick { border-top-width: 2px; } #jpmsaqctey .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpmsaqctey .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jpmsaqctey .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #jpmsaqctey .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #jpmsaqctey .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpmsaqctey .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jpmsaqctey .gt_footnote { margin: 0px; font-size: 90%; padding-left: 4px; padding-right: 4px; padding-left: 5px; padding-right: 5px; } #jpmsaqctey .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jpmsaqctey .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #jpmsaqctey .gt_left { text-align: left; } #jpmsaqctey .gt_center { text-align: center; } #jpmsaqctey .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #jpmsaqctey .gt_font_normal { font-weight: normal; } #jpmsaqctey .gt_font_bold { font-weight: bold; } #jpmsaqctey .gt_font_italic { font-style: italic; } #jpmsaqctey .gt_super { font-size: 65%; } #jpmsaqctey .gt_footnote_marks { font-style: italic; font-weight: normal; font-size: 75%; vertical-align: 0.4em; } #jpmsaqctey .gt_asterisk { font-size: 100%; vertical-align: 0; } #jpmsaqctey .gt_slash_mark { font-size: 0.7em; line-height: 0.7em; vertical-align: 0.15em; } #jpmsaqctey .gt_fraction_numerator { font-size: 0.6em; line-height: 0.6em; vertical-align: 0.45em; } #jpmsaqctey .gt_fraction_denominator { font-size: 0.6em; line-height: 0.6em; vertical-align: -0.05em; } Caractéristiques des bacheliers 2014 inscrits en 2014-2015 en première année de licence Effectif Pourcentage Type de bac Bac général 120 643 75.5 Bac professionnel 14 527 9.1 Bac technologique 24 596 15.4 Série plus précise du bac BAC ES 46 424 29.1 BAC L 31 089 19.5 BAC professionnel 14 527 9.1 BAC S 43 130 27.0 BAC STMG 13 959 8.7 BAC technologique hors STMG 10 637 6.7 Mention au bac Très bien 7 253 4.5 Bien 19 856 12.4 Assez bien 44 192 27.7 Passable 83 503 52.3 Inconnue 4 962 3.1 Âge au bac A l'heure ou en avance 107 393 67.2 En retard 37 846 23.7 Non pris en compte 14 527 9.1 Sexe Femme 94 697 59.3 Homme 65 069 40.7 Discipline de la licence suivie Droit, gestion, économie, AES 53 076 33.2 Lettres, langues et sciences humaines 65 514 41.0 Santé 21 0.0 Sciences et sciences de l'ingénieur 26 971 16.9 STAPS 14 184 8.9 Total Total 159 766 100.0 Source : Open-data ESR.Champ : Bacheliers 2014 inscrits en première année de licence (hors licence professionnelle) dans lenseignement supérieur public en 2014-2015.Traitement des données : Camillle Signoretto Les tableaux construits précédemment vont nous servir à réaliser des graphiques, qui sont davantage utilisés dans des présentations pour mieux visualiser les résultats quun tableau de statistiques descriptives. Les possibilités offertes par le package ggplot sont importantes et cest pour cela que nous lutiliserons en priorité. Par exemple, pour le type de bac, on peut construire un graphique en bâtons avec geom_bar() : en présentant les colonnes de manière décroissante selon le pourcentage, en utilisant fct_reorder() (vue précédemment) dans une étape préalable mutate() ; en ajoutant des couleurs aux barres pour éviter le gris par défaut un peu terne, en utilisant par exemple la librairie RColorBrewer (vous pouvez regarder le type de palettes, notamment celles compatibles pour les daltoniens) et la palette Set2 ; il faut pour cela indiquer loption fill=, puis scale_fill_brewer(); en ajoutant la valeur des pourcentages à lintérieur des colonnes, avec lajout de geom_text() ; et enfin, en ajoutant un titre, et en supprimant la légende qui nest pas utile ici (car option fill= dans laes). Faisons-le pas à pas : essayez dabord de créer un graphique en bâtons simple sur la variable du type de bac inclus dans le tableau 1 (ici dénommé tab_1), en faisant en sorte que la couleur diffère selon les modalités de la variable (vous pouvez pour cela utiliser les différentes palettes de couleur du package RColorBrewer que vous devez installer avant). # install.packages(&quot;RColorBrewer&quot;) # library(RColorBrewer) # Pour voir le type de palettes disponibles dans ce package : # display.brewer.all(colorblindFriendly = TRUE) Vous devez avoir ce graphique (ici la palette Set2 a été utilisée) : Warning: package &#39;RColorBrewer&#39; was built under R version 4.0.3 library(RColorBrewer) tab1 %&gt;% ggplot() + aes(x=Variable, y=Pourcentage, fill=Variable) + geom_bar(stat = &quot;identity&quot;) + scale_fill_brewer(palette = &quot;Set2&quot;) Ajoutez maintenant au milieu de chaque barre le chiffre du pourcentage correspondant, avec lajout de la fonction geom_text(), comme ci-dessous : tab1 %&gt;% ggplot() + aes(x=Variable, y=Pourcentage, fill=Variable) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(y=Pourcentage, label=Pourcentage), position = position_stack(vjust = 0.5), color=&quot;gray15&quot;) + scale_fill_brewer(palette = &quot;Set2&quot;) Ensuite, mettez dans lordre les barres de façon décroissante selon la valeur du pourcentage, pour avoir le graphique ci-dessous : tab1 %&gt;% mutate(Variable = fct_reorder(Variable, desc(Pourcentage))) %&gt;% ggplot() + aes(x=Variable, y=Pourcentage, fill=Variable) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(y=Pourcentage, label=Pourcentage), position = position_stack(vjust = 0.5), color=&quot;gray15&quot;) + scale_fill_brewer(palette = &quot;Set2&quot;) Enfin, ajoutez un titre, supprimez la légende qui est redondante ici avec les modalités inscrites sur laxe des abscisses, ainsi que les noms des axes. Cela donne alors ce graphique final : tab1 %&gt;% mutate(Variable = fct_reorder(Variable, desc(Pourcentage))) %&gt;% ggplot() + aes(x=Variable, y=Pourcentage, fill=Variable) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(y=Pourcentage, label=Pourcentage), position = position_stack(vjust = 0.5), color=&quot;gray15&quot;) + scale_fill_brewer(palette = &quot;Set2&quot;) + labs(title=&quot;Répartition des bacheliers inscrits en première année de licence en 2014-2015, selon le type de bac&quot;, x=&quot; &quot;, y=&quot; &quot;) + theme(legend.position = &quot;none&quot;, plot.title = element_text(size = 14)) Pour commentaire, on peut pointer le faire que la majorité des inscrits en licences universitaires ont effectué un Bac général (environ les 3/4), alors quau contraire seul 9% des inscrits ont un Bac professionnel. Ainsi, les Bacs professionnels qui représentent environ 30% des bacheliers une année donnée sont largement sous-représentés à luniversité, contrairement aux Bacs généraux qui sont sur-représentés puisquils comptent pour pratiquement 50% des bacheliers. Avec des variables qualitatives, il ny a pas grande diversité de graphiques possibles ! On pourrait aussi représenter lanalyse de la variable précédente par un graphique waffle avec le package waffle, comme ci-dessous. Mais cela sera plus pertinent quand on comparera plusieurs situations (cf. infra). #install.packages(&quot;waffle&quot;) library(waffle) tab1 %&gt;% mutate(Variable = fct_relevel(Variable, &quot;Bac technologique&quot;, &quot;Bac professionnel&quot;,&quot;Bac général&quot;)) %&gt;% ggplot() + aes(values = Pourcentage, fill = Variable) + geom_waffle(n_rows=10, flip = TRUE, make_proportional = TRUE) + labs(title=&quot;Répartition des bacheliers inscrits en première année de licence en 2014-2015, selon le type de bac&quot;) Là aussi, on peut réitérer ce type de graphique pour lensemble de nos variables ou caractéristiques précédentes, en créant une fonction, pour les regrouper ensuite dans un seul et même graphe. Quelle serait alors cette fonction pour un graphique en bâtons ? bar_graph &lt;- function(data, Titre){ data %&gt;% mutate(Variable = fct_reorder(Variable, desc(Pourcentage))) %&gt;% ggplot() + aes(x=Variable, y=Pourcentage, fill=Variable) + geom_bar(stat = &quot;identity&quot;) + geom_text(aes(y=Pourcentage, label=Pourcentage), position = position_stack(vjust = 0.5), color=&quot;gray15&quot;, size=3) + scale_fill_brewer(palette = &quot;Set2&quot;) + labs(title=Titre, x=&quot; &quot;, y=&quot; &quot;) + theme(legend.position = &quot;none&quot;, plot.title = element_text(size = 11)) } On applique donc cette fonction à nos 6 variables, on sauvegarde chaque graphique, et on les rassemble dans un même graphe avec la librairie pacthwork() (dautres packages existent pour cela comme cowplot()) et on ajoute un titre. bar1 &lt;- bar_graph(tab1, &quot;Selon le type de bac&quot;) + theme(axis.text.x = element_text(angle = 45, hjust=1)) bar2 &lt;- bar_graph(tab2, &quot;Selon la série du bac&quot;) + theme(axis.text.x = element_text(angle = 45, hjust=1)) bar3 &lt;- bar_graph(tab3, &quot;Selon la mention au bac&quot;) + theme(axis.text.x = element_text(angle = 45, hjust=1)) bar4 &lt;- bar_graph(tab4, &quot;Selon l&#39;âge au bac&quot;) + theme(axis.text.x = element_text(angle = 45, hjust=1)) bar5 &lt;- bar_graph(tab5, &quot;Selon le sexe&quot;) bar6 &lt;- tab6 %&gt;% filter(Variable != &quot;Total&quot;) %&gt;% bar_graph(&quot;Selon la discipline de la licence suivie&quot;) + theme(axis.text.x = element_text(angle = 45, hjust=1)) library(patchwork) (bar1 + bar3 + bar5 + bar2 + bar4 + bar6) + plot_annotation(title = &#39;Caractéristiques des bacheliers 2014 inscrits en 2014-2015 en première année de licence&#39;) Ainsi, au-delà du type de bac, on remarque que ce sont les Bacs ES qui sont les plus nombreux en proportion dans les inscrits en licences universitaires en 2014-2015, et les Bacs STMG sont pratiquement aussi nombreux que les Bacs professionnels. Ensuite, on constate que plus dun étudiant sur deux a eu une mention passable au bac, alors que les mentions Bien et Très bien représentent à elles deux presque 17% des étudiants primo-inscrits en 2014-2015. En lien avec la mention, lâge au bac permet de révéler que les 2/3 des étudiants sont à lheure ou en avance, et quand même presqu1/4 sont en retard. On note également quil y a plus de femmes que dhommes parmi ces étudiants, dans une proportion respectivement de 60%-40%. Enfin, 40% des bacheliers 2014 se sont inscrits dans une licence de lettres, langues et sciences humaines, 33% dans une licence de droit, gestion, économie ou AES, 17% dans une licence de sciences et sciences de lingénieur et enfin environ 9% dans une licence de STAPS. On remarque pour cette dernière variable quil ny a quasiment pas dinscrits en licence de santé, par conséquent, on ne représentera plus cette modalité de la variable par la suite. 7.2 Profils des étudiants selon leur situation en fin de L1 On veut maintenant révéler le profil des étudiants selon quils réussisent à passer en L2 en un an, selon quils redoublent, ou encore selon quils se réorientent en DUT, selon les mêmes caractéristiques que précédemment. On va représenter avec un graphique en bâtons la répartition générale pour lensemble de ces étudiants de leur situation en fin de L1 ; à noter quils nous manquent en réalité une information car les 3 situations possibles : passage en L2, redoublement ou encore réorientation, ne donnent pas le total des effectifs néobacheliers inscrits, comme nous lavions remarqué lors de la première séance, on va donc créer ici une modalité inconnue pour avoir une bonne représentation générale. Pour cela, on utilise dabord la fonction summarise() sur ces 3 variables, mais aussi sur les effectifs généraux, pour justement créer dans une seconde étape avec la fonction mutate() une variable Inconnue qui soit la différence entre les effectifs totaux et la somme des effectifs des 3 variables précédentes. Ensuite, comme la sortie des fonctions summarise() nous donne les résultats en lignes, on utilise un pivot_longer() pour mettre sous forme de tableau avec 2 colonnes, la première intitulée Situation_fin_L1 et la seconde Effectif ; et on crée une troisième colonne/variable intitulée pourcentage à laide toujours de mutate(). Enfin, on peut appliquer à ce tableau de contingence la fonction ggplot() pour créer un graphique en bâtons avec comme précédemment sur laxe des abscisses les différentes modalités de la variable Situation_fin_L1 et en ordonnées les pourcentages. Au total, vous devriez avoir ce graphique ci-dessous ! PassageL1L2 %&gt;% summarise(Ensemble=sum(effectif_neobacheliers_passage, na.rm=T), `Passage en L2`=sum(passage_en_l2_1_an, na.rm=T), Redoublement=sum(redoublement_en_l1, na.rm=T), `Reorientation en dut`=sum(reorientation_en_dut_1_an, na.rm=T)) %&gt;% mutate(Inconnue=Ensemble-(`Passage en L2`+Redoublement+`Reorientation en dut`)) %&gt;% select(-&quot;Ensemble&quot;) %&gt;% pivot_longer(cols=1:4, names_to = &quot;Situation_fin_L1&quot;, values_to =&quot;Effectif&quot;) %&gt;% mutate(Pourcentage=Effectif/sum(Effectif)*100, Pourcentage=round(Pourcentage, 1), Situation_fin_L1=fct_relevel(Situation_fin_L1, &quot;Passage en L2&quot;, &quot;Redoublement&quot;, &quot;Inconnue&quot;, &quot;Reorientation en dut&quot;)) %&gt;% ggplot() + aes(x=Situation_fin_L1, y=Pourcentage, fill=Situation_fin_L1) + geom_bar(stat=&quot;identity&quot;) + geom_text(aes(y=Pourcentage, label=Pourcentage), position = position_stack(vjust = 0.5), color=&quot;gray15&quot;, size=3) + scale_fill_brewer(palette = &quot;Set2&quot;) + labs(title=&quot;Situation en fin de L1&quot;, x=&quot; &quot;, y=&quot; &quot;) + theme(legend.position = &quot;none&quot;) Ainsi, de manière générale, environ 41% des néobacheliers inscrits à luniversité en 2014-2015 sont passés en L2, 29% ont redoublé, 28% sont dans une autre situation inconnue et enfin environ 2% se sont réorientés en DUT. On peut maintenant étudier cette situation en fonction des caractéristiques de ces néobacheliers. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
