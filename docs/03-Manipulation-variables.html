<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 4 Manipulation des variables | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 4 Manipulation des variables | DATA MINING" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 4 Manipulation des variables | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maître de conférences en économie, Université de Paris" />


<meta name="date" content="2022-02-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="02-Manipulation-base.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="01-Jeu-de-donnees.html"><a href="01-Jeu-de-donnees.html"><i class="fa fa-check"></i><b>2</b> Récupération du jeu de données sur une API</a></li>
<li class="chapter" data-level="3" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>3</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="3.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>3.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="3.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#séparer-les-variables-séparer-les-données"><i class="fa fa-check"></i><b>3.2</b> Séparer les variables, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>4</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="4.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>4.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-données-manquantes"><i class="fa fa-check"></i><b>4.2.1</b> Détecter et “visualiser” les données manquantes</a></li>
<li class="chapter" data-level="4.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-données-manquantes"><i class="fa fa-check"></i><b>4.2.2</b> Gérer les données manquantes</a></li>
<li class="chapter" data-level="4.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-données-aberrantes"><i class="fa fa-check"></i><b>4.2.3</b> Détecter et “visualiser” les données aberrantes</a></li>
<li class="chapter" data-level="4.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>4.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c03-Manipulation-variables" class="section level1" number="4">
<h1><span class="header-section-number">Chapitre 4</span> Manipulation des variables</h1>
<p>On va transformer toutes nos variables caractères en variables ‘factor’ pour que <code>R</code> reconnaisse les différents niveaux, c’est-à-dire modalités, des variables par la suite. Une façon simple de le faire est d’utiliser la fonction <code>mutate_if</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="03-Manipulation-variables.html#cb14-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="ot">&lt;-</span> PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character, as.factor)</span>
<span id="cb14-2"><a href="03-Manipulation-variables.html#cb14-2" aria-hidden="true" tabindex="-1"></a>ReussiteLic <span class="ot">&lt;-</span> ReussiteLic <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character, as.factor)</span></code></pre></div>
<p>On peut ainsi vérifier que les variables “cohorte_passage” et “cohorte_reussite” ont toujours la même modalité :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="03-Manipulation-variables.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(PassageL1L2<span class="sc">$</span>cohorte_passage)</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="03-Manipulation-variables.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(PassageL1L2<span class="sc">$</span>cohorte_passage)</span></code></pre></div>
<pre><code>[1] &quot;2014&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="03-Manipulation-variables.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(ReussiteLic<span class="sc">$</span>cohorte_reussite)</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="03-Manipulation-variables.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(ReussiteLic<span class="sc">$</span>cohorte_reussite)</span></code></pre></div>
<pre><code>[1] &quot;2012&quot;</code></pre>
<p>Pour la suite, on travaillera essentiellement sur la base “PassageL1L2”, mais vous pouvez réaliser le même type d’analyse pour la base “ReussiteLic”.<br />
On peut également vérifier les variables numériques qui restent, en les sélectionnant avec <code>select_if()</code> :</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="03-Manipulation-variables.html#cb23-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="zilmxdajat" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zilmxdajat .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zilmxdajat .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zilmxdajat .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zilmxdajat .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zilmxdajat .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zilmxdajat .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zilmxdajat .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zilmxdajat .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zilmxdajat .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zilmxdajat .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zilmxdajat .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zilmxdajat .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zilmxdajat .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zilmxdajat .gt_from_md > :first-child {
  margin-top: 0;
}

#zilmxdajat .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zilmxdajat .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zilmxdajat .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zilmxdajat .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zilmxdajat .gt_row_group_first td {
  border-top-width: 2px;
}

#zilmxdajat .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zilmxdajat .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zilmxdajat .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zilmxdajat .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zilmxdajat .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zilmxdajat .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zilmxdajat .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zilmxdajat .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zilmxdajat .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zilmxdajat .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zilmxdajat .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zilmxdajat .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zilmxdajat .gt_left {
  text-align: left;
}

#zilmxdajat .gt_center {
  text-align: center;
}

#zilmxdajat .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zilmxdajat .gt_font_normal {
  font-weight: normal;
}

#zilmxdajat .gt_font_bold {
  font-weight: bold;
}

#zilmxdajat .gt_font_italic {
  font-style: italic;
}

#zilmxdajat .gt_super {
  font-size: 65%;
}

#zilmxdajat .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#zilmxdajat .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zilmxdajat .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#zilmxdajat .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#zilmxdajat .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_2_ans</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">effectif_neobacheliers_passage</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">sexe</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_1_2_ans</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut_1_an</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">redoublement_en_l1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_1_an</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut_2_ans</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">sect_disciplinaire</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">serie_bac</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">23</td>
<td class="gt_row gt_right">4</td></tr>
    <tr><td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">10</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">33</td>
<td class="gt_row gt_right">4</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="03-Manipulation-variables.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ReussiteLic %&gt;% select_if(is.numeric) %&gt;% head(2)</span></span></code></pre></div>
<p>Ahhh on voit que 3 variables sont en réalité des variables catégorielles mais avec des modalités numériques : “sexe”, “sect_disciplinaire” et “serie_bac”. On va donc les transformer en variable ‘factor’.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="03-Manipulation-variables.html#cb25-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="ot">&lt;-</span> PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">sexe=</span><span class="fu">as.factor</span>(sexe),   </span>
<span id="cb25-2"><a href="03-Manipulation-variables.html#cb25-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">sect_disciplinaire=</span><span class="fu">as.factor</span>(sect_disciplinaire),</span>
<span id="cb25-3"><a href="03-Manipulation-variables.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">serie_bac=</span><span class="fu">as.factor</span>(serie_bac))</span></code></pre></div>
<p>Ensuite, il est souvent d’usage d’utiliser la fonction <code>summary()</code> pour donner une idée sur l’ensemble des variables, soit de la distribution pour les variables quanti, soit de la répartition des différentes modalités pour les variables quali ; la fonction permet également de nous donner l’information sur l’existence et le nombre de valeurs manquantes pour chaque variable.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="03-Manipulation-variables.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(PassageL1L2)</span></code></pre></div>
<pre><code> passage_en_l2_2_ans effectif_neobacheliers_passage
 Min.   :  0.000     Min.   :   1.00               
 1st Qu.:  0.000     1st Qu.:   2.00               
 Median :  0.000     Median :   6.00               
 Mean   :  4.316     Mean   :  35.12               
 3rd Qu.:  2.000     3rd Qu.:  23.00               
 Max.   :571.000     Max.   :2454.00               
 NA&#39;s   :959         NA&#39;s   :959                   
                        sect_disciplinaire_lib sexe    
 Sciences juridiques               : 187       1:2756  
 Langues étrangères appliquées     : 177       2:2752  
 Langues et littératures étrangères: 176               
 Psychologie                       : 176               
 STAPS                             : 173               
 Arts                              : 172               
 (Other)                           :4447               
                   age_au_bac_lib passage_en_l2_1_2_ans
 A l&#39;heure ou en avance   :2021   Min.   :   0.00      
 En retard d&#39;un an        :1746   1st Qu.:   1.00      
 En retard de plus d&#39;un an:1316   Median :   2.00      
 Non pris en compte       : 425   Mean   :  18.63      
                                  3rd Qu.:   8.00      
                                  Max.   :1950.00      
                                  NA&#39;s   :959          
                     serie_bac_lib  age_au_bac gd_discipline
 BAC ES                     :1066   R0:2021    DSA  :1097   
 BAC L                      : 896   R1:1746    LLSH :2562   
 BAC professionnel          : 425   R2:1316    SANTE:  15   
 BAC S                      :1218   R4: 425    SI   :1661   
 BAC STMG                   : 848              STAPS: 173   
 BAC technologique hors STMG:1055                           
                                                            
                             gd_discipline_lib                 mention_bac_lib
 Droit, gestion, économie, AES        :1097    Assez bien              :1080  
 Lettres, langues et sciences humaines:2562    Bien                    : 796  
 Santé                                :  15    Inconnue                : 848  
 Sciences et sciences de l&#39;ingénieur  :1661    Passable deuxième groupe:1112  
 STAPS                                : 173    Passable premier groupe :1220  
                                               Très bien               : 452  
                                                                              
   discipline   reorientation_en_dut
 06     :1395   Min.   : 0.000      
 15     :1168   1st Qu.: 0.000      
 04     : 593   Median : 0.000      
 01     : 470   Mean   : 0.805      
 02     : 462   3rd Qu.: 0.000      
 05     : 459   Max.   :79.000      
 (Other): 961   NA&#39;s   :959         
                                discipline_lib reorientation_en_dut_1_an
 Sciences humaines et sociales         :1395   Min.   : 0.0000          
 Sciences fondamentales et applications:1168   1st Qu.: 0.0000          
 Lettres, sciences du langage, arts    : 593   Median : 0.0000          
 Droit, sciences politiques            : 470   Mean   : 0.6186          
 Sciences économiques, gestion         : 462   3rd Qu.: 0.0000          
 Langues                               : 459   Max.   :63.0000          
 (Other)                               : 961   NA&#39;s   :959              
 redoublement_en_l1 passage_en_l2_1_an cohorte_passage
 Min.   :   0.0     Min.   :   0.00    2014:5508      
 1st Qu.:   0.0     1st Qu.:   0.00                   
 Median :   1.0     Median :   1.00                   
 Mean   :  10.2     Mean   :  14.32                   
 3rd Qu.:   6.0     3rd Qu.:   6.00                   
 Max.   :1019.0     Max.   :1494.00                   
 NA&#39;s   :959        NA&#39;s   :959                       
 reorientation_en_dut_2_ans sect_disciplinaire  sexe_lib    mention_bac
 Min.   : 0.0000            36     : 187       Femme:2752   A: 452     
 1st Qu.: 0.0000            24     : 177       Homme:2756   B: 796     
 Median : 0.0000            23     : 176                    C:1080     
 Mean   : 0.1864            32     : 176                    D:1220     
 3rd Qu.: 0.0000            10     : 173                    P:1112     
 Max.   :21.0000            21     : 172                    Q: 848     
 NA&#39;s   :959                (Other):4447                               
 serie_bac
 1: 896   
 2:1066   
 3:1218   
 4: 848   
 5:1055   
 6: 425   
          </code></pre>
<p>Mais, en réalité ici, ces statistiques n’ont pas grand sens en soi, en raison encore une fois du fait que l’on a des variables micro-agrégées ; et pour avoir les “vraies” statistiques il faut sommer notre variable clé d’effectif à chaque fois, c’est-à-dire pour chaque variable catégorielle.<br />
Par exemple :</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="03-Manipulation-variables.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si on veut la répartition des inscrits 2014-2015 en licence selon</span></span>
<span id="cb28-2"><a href="03-Manipulation-variables.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># la série du Bac :</span></span>
<span id="cb28-3"><a href="03-Manipulation-variables.html#cb28-3" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(serie_bac_lib) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="03-Manipulation-variables.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">eff_2014=</span><span class="fu">sum</span>(effectif_neobacheliers_passage, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="03-Manipulation-variables.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="xfosjfvskt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xfosjfvskt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xfosjfvskt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xfosjfvskt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xfosjfvskt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xfosjfvskt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xfosjfvskt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xfosjfvskt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xfosjfvskt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xfosjfvskt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xfosjfvskt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xfosjfvskt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xfosjfvskt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xfosjfvskt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xfosjfvskt .gt_from_md > :first-child {
  margin-top: 0;
}

#xfosjfvskt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xfosjfvskt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xfosjfvskt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xfosjfvskt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xfosjfvskt .gt_row_group_first td {
  border-top-width: 2px;
}

#xfosjfvskt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xfosjfvskt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xfosjfvskt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xfosjfvskt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xfosjfvskt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xfosjfvskt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xfosjfvskt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xfosjfvskt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xfosjfvskt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xfosjfvskt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xfosjfvskt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xfosjfvskt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xfosjfvskt .gt_left {
  text-align: left;
}

#xfosjfvskt .gt_center {
  text-align: center;
}

#xfosjfvskt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xfosjfvskt .gt_font_normal {
  font-weight: normal;
}

#xfosjfvskt .gt_font_bold {
  font-weight: bold;
}

#xfosjfvskt .gt_font_italic {
  font-style: italic;
}

#xfosjfvskt .gt_super {
  font-size: 65%;
}

#xfosjfvskt .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#xfosjfvskt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xfosjfvskt .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#xfosjfvskt .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#xfosjfvskt .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">serie_bac_lib</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">eff_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">BAC ES</td>
<td class="gt_row gt_right">46424</td></tr>
    <tr><td class="gt_row gt_left">BAC L</td>
<td class="gt_row gt_right">31089</td></tr>
    <tr><td class="gt_row gt_left">BAC professionnel</td>
<td class="gt_row gt_right">14527</td></tr>
    <tr><td class="gt_row gt_left">BAC S</td>
<td class="gt_row gt_right">43130</td></tr>
    <tr><td class="gt_row gt_left">BAC STMG</td>
<td class="gt_row gt_right">13959</td></tr>
    <tr><td class="gt_row gt_left">BAC technologique hors STMG</td>
<td class="gt_row gt_right">10637</td></tr>
    <tr><td class="gt_row gt_left">Total</td>
<td class="gt_row gt_right">159766</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="03-Manipulation-variables.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ou avec les fonctions count() en utilisant l&#39;argument wt=</span></span>
<span id="cb29-2"><a href="03-Manipulation-variables.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># PassageL1L2 %&gt;% count(serie_bac_lib, wt = effectif_neobacheliers_passage) </span></span>
<span id="cb29-3"><a href="03-Manipulation-variables.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># %&gt;% adorn_totals(&quot;row&quot;) %&gt;% gt()</span></span></code></pre></div>
<p>Si on veut trier le résultat pour voir la catégorie la plus importante en première, on peut utiliser la fonction <code>arrange()</code>, qui peut être utilisée plus généralement sur des dataframe.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="03-Manipulation-variables.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si on veut la répartition des inscrits 2014-2015 en licence selon la série du </span></span>
<span id="cb30-2"><a href="03-Manipulation-variables.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Bac, triée par ordre décroissant :</span></span>
<span id="cb30-3"><a href="03-Manipulation-variables.html#cb30-3" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(serie_bac_lib) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="03-Manipulation-variables.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">eff_2014=</span><span class="fu">sum</span>(effectif_neobacheliers_passage, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-5"><a href="03-Manipulation-variables.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(eff_2014)) <span class="sc">%&gt;%</span> <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="03-Manipulation-variables.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="mutwscnrvs" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#mutwscnrvs .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mutwscnrvs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mutwscnrvs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mutwscnrvs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mutwscnrvs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mutwscnrvs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mutwscnrvs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mutwscnrvs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mutwscnrvs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mutwscnrvs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mutwscnrvs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mutwscnrvs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#mutwscnrvs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mutwscnrvs .gt_from_md > :first-child {
  margin-top: 0;
}

#mutwscnrvs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mutwscnrvs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mutwscnrvs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mutwscnrvs .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mutwscnrvs .gt_row_group_first td {
  border-top-width: 2px;
}

#mutwscnrvs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mutwscnrvs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mutwscnrvs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mutwscnrvs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mutwscnrvs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mutwscnrvs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mutwscnrvs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mutwscnrvs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mutwscnrvs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mutwscnrvs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mutwscnrvs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mutwscnrvs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mutwscnrvs .gt_left {
  text-align: left;
}

#mutwscnrvs .gt_center {
  text-align: center;
}

#mutwscnrvs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mutwscnrvs .gt_font_normal {
  font-weight: normal;
}

#mutwscnrvs .gt_font_bold {
  font-weight: bold;
}

#mutwscnrvs .gt_font_italic {
  font-style: italic;
}

#mutwscnrvs .gt_super {
  font-size: 65%;
}

#mutwscnrvs .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#mutwscnrvs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mutwscnrvs .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#mutwscnrvs .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#mutwscnrvs .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">serie_bac_lib</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">eff_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">BAC ES</td>
<td class="gt_row gt_right">46424</td></tr>
    <tr><td class="gt_row gt_left">BAC S</td>
<td class="gt_row gt_right">43130</td></tr>
    <tr><td class="gt_row gt_left">BAC L</td>
<td class="gt_row gt_right">31089</td></tr>
    <tr><td class="gt_row gt_left">BAC professionnel</td>
<td class="gt_row gt_right">14527</td></tr>
    <tr><td class="gt_row gt_left">BAC STMG</td>
<td class="gt_row gt_right">13959</td></tr>
    <tr><td class="gt_row gt_left">BAC technologique hors STMG</td>
<td class="gt_row gt_right">10637</td></tr>
    <tr><td class="gt_row gt_left">Total</td>
<td class="gt_row gt_right">159766</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="03-Manipulation-variables.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si on veut les effectifs pour chaque situation à la fin de la L1 :</span></span>
<span id="cb31-2"><a href="03-Manipulation-variables.html#cb31-2" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="03-Manipulation-variables.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">passage_l2=</span><span class="fu">sum</span>(passage_en_l2_1_an, <span class="at">na.rm=</span>T),</span>
<span id="cb31-4"><a href="03-Manipulation-variables.html#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">redoublement_l1=</span><span class="fu">sum</span>(redoublement_en_l1, <span class="at">na.rm=</span>T),</span>
<span id="cb31-5"><a href="03-Manipulation-variables.html#cb31-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">reorientation_dut_l1=</span><span class="fu">sum</span>(reorientation_en_dut_1_an, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="03-Manipulation-variables.html#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="ohnutgaofz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ohnutgaofz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ohnutgaofz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ohnutgaofz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ohnutgaofz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ohnutgaofz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ohnutgaofz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ohnutgaofz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ohnutgaofz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ohnutgaofz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ohnutgaofz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ohnutgaofz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ohnutgaofz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ohnutgaofz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ohnutgaofz .gt_from_md > :first-child {
  margin-top: 0;
}

#ohnutgaofz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ohnutgaofz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ohnutgaofz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ohnutgaofz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ohnutgaofz .gt_row_group_first td {
  border-top-width: 2px;
}

#ohnutgaofz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohnutgaofz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ohnutgaofz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ohnutgaofz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ohnutgaofz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohnutgaofz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ohnutgaofz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ohnutgaofz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ohnutgaofz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ohnutgaofz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohnutgaofz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ohnutgaofz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohnutgaofz .gt_left {
  text-align: left;
}

#ohnutgaofz .gt_center {
  text-align: center;
}

#ohnutgaofz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ohnutgaofz .gt_font_normal {
  font-weight: normal;
}

#ohnutgaofz .gt_font_bold {
  font-weight: bold;
}

#ohnutgaofz .gt_font_italic {
  font-style: italic;
}

#ohnutgaofz .gt_super {
  font-size: 65%;
}

#ohnutgaofz .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ohnutgaofz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ohnutgaofz .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ohnutgaofz .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ohnutgaofz .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_l2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">redoublement_l1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_dut_l1</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">65127</td>
<td class="gt_row gt_right">46392</td>
<td class="gt_row gt_right">2814</td></tr>
  </tbody>
  
  
</table>
</div>
<div id="manipulation-des-variables-qualitatives" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Manipulation des variables qualitatives</h2>
<p>On peut d’abord travailler sur les variables qualitatives. On regarde les différents niveaux pour chacune d’entre elles. On peut avoir recours pour cela à la fonction <code>sapply()</code> qui permet d’appliquer la fonction indiquée entre parenthèses (ici <code>levels()</code>) à tous les éléments de notre table.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="03-Manipulation-variables.html#cb32-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(levels)</span></code></pre></div>
<pre><code>$sect_disciplinaire_lib
 [1] &quot;Administration économique et sociale&quot;                                           
 [2] &quot;Aménagement&quot;                                                                    
 [3] &quot;Archéologie, ethnologie, préhistoire&quot;                                           
 [4] &quot;Arts&quot;                                                                           
 [5] &quot;Chimie&quot;                                                                         
 [6] &quot;Cultures et langues régionales&quot;                                                 
 [7] &quot;Électronique, génie électrique&quot;                                                 
 [8] &quot;Formation générale aux métiers de l&#39;ingénieur&quot;                                  
 [9] &quot;Génie civil&quot;                                                                    
[10] &quot;Génie des procédés&quot;                                                             
[11] &quot;Géographie&quot;                                                                     
[12] &quot;Histoire&quot;                                                                       
[13] &quot;Informatique&quot;                                                                   
[14] &quot;Langues et littératures anciennes&quot;                                              
[15] &quot;Langues et littératures étrangères&quot;                                             
[16] &quot;Langues et littératures françaises&quot;                                             
[17] &quot;Langues étrangères appliquées&quot;                                                  
[18] &quot;Mathématique et informatique&quot;                                                   
[19] &quot;Mathématiques&quot;                                                                  
[20] &quot;Mathématiques appliquées et sciences sociales&quot;                                  
[21] &quot;Mécanique, génie mécanique&quot;                                                     
[22] &quot;Médecine&quot;                                                                       
[23] &quot;Philosophie, épistémologie&quot;                                                     
[24] &quot;Physique&quot;                                                                       
[25] &quot;Physique et chimie&quot;                                                             
[26] &quot;Pluridisciplinaire droit, sciences politiques&quot;                                  
[27] &quot;Pluridisciplinaire langues&quot;                                                     
[28] &quot;Pluridisciplinaire lettres, langues, sciences humaines&quot;                         
[29] &quot;Pluridisciplinaire lettres, sciences du langage, arts&quot;                          
[30] &quot;Pluridisciplinaire sciences&quot;                                                    
[31] &quot;Pluridisciplinaire sciences de la vie, de la santé, de la terre et de l&#39;univers&quot;
[32] &quot;Pluridisciplinaire sciences économiques et gestion&quot;                             
[33] &quot;Pluridisciplinaire sciences fondamentales et applications&quot;                      
[34] &quot;Pluridisciplinaire sciences humaines et sociales&quot;                               
[35] &quot;Psychologie&quot;                                                                    
[36] &quot;Sciences de gestion&quot;                                                            
[37] &quot;Sciences de l&#39;éducation&quot;                                                        
[38] &quot;Sciences de l&#39;information et la communication&quot;                                  
[39] &quot;Sciences de l&#39;univers&quot;                                                          
[40] &quot;Sciences de la vie&quot;                                                             
[41] &quot;Sciences du langage, linguistique&quot;                                              
[42] &quot;Sciences économiques&quot;                                                           
[43] &quot;Sciences juridiques&quot;                                                            
[44] &quot;Sciences politiques&quot;                                                            
[45] &quot;Sciences religieuses&quot;                                                           
[46] &quot;Sociologie, démographie&quot;                                                        
[47] &quot;STAPS&quot;                                                                          
[48] &quot;Technologie et sciences industrielles&quot;                                          

$sexe
[1] &quot;1&quot; &quot;2&quot;

$age_au_bac_lib
[1] &quot;A l&#39;heure ou en avance&quot;    &quot;En retard d&#39;un an&quot;        
[3] &quot;En retard de plus d&#39;un an&quot; &quot;Non pris en compte&quot;       

$serie_bac_lib
[1] &quot;BAC ES&quot;                      &quot;BAC L&quot;                      
[3] &quot;BAC professionnel&quot;           &quot;BAC S&quot;                      
[5] &quot;BAC STMG&quot;                    &quot;BAC technologique hors STMG&quot;

$age_au_bac
[1] &quot;R0&quot; &quot;R1&quot; &quot;R2&quot; &quot;R4&quot;

$gd_discipline
[1] &quot;DSA&quot;   &quot;LLSH&quot;  &quot;SANTE&quot; &quot;SI&quot;    &quot;STAPS&quot;

$gd_discipline_lib
[1] &quot;Droit, gestion, économie, AES&quot;        
[2] &quot;Lettres, langues et sciences humaines&quot;
[3] &quot;Santé&quot;                                
[4] &quot;Sciences et sciences de l&#39;ingénieur&quot;  
[5] &quot;STAPS&quot;                                

$mention_bac_lib
[1] &quot;Assez bien&quot;               &quot;Bien&quot;                    
[3] &quot;Inconnue&quot;                 &quot;Passable deuxième groupe&quot;
[5] &quot;Passable premier groupe&quot;  &quot;Très bien&quot;               

$discipline
 [1] &quot;01&quot; &quot;02&quot; &quot;03&quot; &quot;04&quot; &quot;05&quot; &quot;06&quot; &quot;09&quot; &quot;10&quot; &quot;11&quot; &quot;15&quot; &quot;32&quot; &quot;33&quot;

$discipline_lib
 [1] &quot;Administration économique et sociale&quot;                  
 [2] &quot;Droit, sciences politiques&quot;                            
 [3] &quot;Langues&quot;                                               
 [4] &quot;Lettres, sciences du langage, arts&quot;                    
 [5] &quot;Médecine&quot;                                              
 [6] &quot;Pluridisciplinaire lettres, langues, sciences humaines&quot;
 [7] &quot;Pluridisciplinaire sciences&quot;                           
 [8] &quot;Sciences de la vie, de la terre et de l&#39;univers&quot;       
 [9] &quot;Sciences économiques, gestion&quot;                         
[10] &quot;Sciences fondamentales et applications&quot;                
[11] &quot;Sciences humaines et sociales&quot;                         
[12] &quot;STAPS&quot;                                                 

$cohorte_passage
[1] &quot;2014&quot;

$sect_disciplinaire
 [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot; &quot;16&quot; &quot;17&quot;
[16] &quot;18&quot; &quot;19&quot; &quot;21&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; &quot;30&quot; &quot;31&quot; &quot;32&quot; &quot;33&quot; &quot;34&quot;
[31] &quot;35&quot; &quot;36&quot; &quot;37&quot; &quot;38&quot; &quot;39&quot; &quot;40&quot; &quot;41&quot; &quot;42&quot; &quot;43&quot; &quot;61&quot; &quot;62&quot; &quot;64&quot; &quot;65&quot; &quot;66&quot; &quot;67&quot;
[46] &quot;68&quot; &quot;69&quot; &quot;70&quot;

$sexe_lib
[1] &quot;Femme&quot; &quot;Homme&quot;

$mention_bac
[1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;P&quot; &quot;Q&quot;

$serie_bac
[1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</code></pre>
<p>On observe que la première variable affichée “sect_disciplinaire_lib” a de nombreuses modalités, 48 précisément, on ne s’en servira que pour une analyse détaillée ; la variable “age_au_bac_lib” compte 4 modalités que l’on pourrait réduire à 3 en regroupant les deux modalités “en retard” ; de même pour la variable de “serie_bac_lib”, on pourrait les regrouper ou créer une autre variable n’ayant que 3 modalités et qui soit alors plus générale ; idem pour la “mention_bac_lib” en regroupant les “passables”.<br />
On va faire tout cela en utilisant les fonctions <code>mutate()</code>, <code>case_when()</code> et <code>as.factor()</code>, mais aussi en dernier exemple les fonctions <code>fct_relevel()</code> et <code>fct_collapse()</code> du package <strong><code>forcats</code></strong> :</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="03-Manipulation-variables.html#cb34-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="ot">&lt;-</span> PassageL1L2 <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="03-Manipulation-variables.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_bac =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(age_au_bac_lib <span class="sc">==</span> <span class="st">&quot;A l&#39;heure ou en avance&quot;</span> <span class="sc">~</span> <span class="st">&quot;A l&#39;heure ou en avance&quot;</span>,</span>
<span id="cb34-3"><a href="03-Manipulation-variables.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                                       age_au_bac_lib <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;En retard d&#39;un an&quot;</span>, <span class="st">&quot;En retard de plus d&#39;un an&quot;</span>) <span class="sc">~</span> <span class="st">&quot;En retard&quot;</span>,</span>
<span id="cb34-4"><a href="03-Manipulation-variables.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                                       age_au_bac_lib <span class="sc">==</span> <span class="st">&quot;Non pris en compte&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non pris en compte&quot;</span>)),</span>
<span id="cb34-5"><a href="03-Manipulation-variables.html#cb34-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">type_bac =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(serie_bac_lib <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;BAC ES&quot;</span>, <span class="st">&quot;BAC L&quot;</span>, <span class="st">&quot;BAC S&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac général&quot;</span>,</span>
<span id="cb34-6"><a href="03-Manipulation-variables.html#cb34-6" aria-hidden="true" tabindex="-1"></a>                                   serie_bac_lib <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;BAC STMG&quot;</span>, <span class="st">&quot;BAC technologique hors STMG&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac technologique&quot;</span>,</span>
<span id="cb34-7"><a href="03-Manipulation-variables.html#cb34-7" aria-hidden="true" tabindex="-1"></a>                                   serie_bac_lib <span class="sc">==</span> <span class="st">&quot;BAC professionnel&quot;</span> <span class="sc">~</span> <span class="st">&quot;Bac professionnel&quot;</span>)),</span>
<span id="cb34-8"><a href="03-Manipulation-variables.html#cb34-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">mention_bac_bis =</span> <span class="fu">fct_collapse</span>(mention_bac_lib, <span class="st">&#39;Passable&#39;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Passable deuxième groupe&quot;</span>,   <span class="st">&quot;Passable premier groupe&quot;</span>)),</span>
<span id="cb34-9"><a href="03-Manipulation-variables.html#cb34-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">mention_bac_bis =</span> <span class="fu">fct_relevel</span>(mention_bac_bis, <span class="fu">c</span>(<span class="st">&quot;Très bien&quot;</span>, <span class="st">&quot;Bien&quot;</span>, <span class="st">&quot;Assez bien&quot;</span>, <span class="st">&quot;Passable&quot;</span>, <span class="st">&quot;Inconnue&quot;</span>)))</span>
<span id="cb34-10"><a href="03-Manipulation-variables.html#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">#table(PassageL1L2$mention_bac_lib,PassageL1L2$mention_bac_bis)</span></span></code></pre></div>
<p>En effeti, pour travailler sur les variables qualitatives en particulier lorsqu’elles sont en “facteurs”, le package <strong><code>forcats</code></strong> est très utile. Outre une fonction de transformation d’une variable caractère en facteur (<code>as_factor()</code> proche de la version de baseR <code>as.factor()</code> utilisée juste au-dessus), elle contient plein d’autres fonctions : <code>fct_collapse()</code> utilisée à la fin de la commande précédente pour renommer ou regrouper des modalités d’une variable (au lieu de la double fonction <code>as.factor()</code> et <code>case_when()</code>) ; <code>fct_relevel()</code> utilisée également au-dessus pour trier les modalités comme on le souhaite ; <code>fct_drop()</code> pour enlever des niveaux de facteurs vides/sans effectifs ; <code>fct_explicit_na()</code> pour rendre les NA explicites en créant une modalité “(missing)” ; <code>fct_reorder()</code> et <code>fct_reorder2()</code> pour réordonner les modalités d’une variable, très utile pour les graphiques car utilisables directement dans <code>ggplot()</code> ; <code>fct_lump()</code> pour regrouper les modalités les plus communes (ou au contraire les moins communes) en lui indiquant entre parenthèses le nombre <code>n=</code> de modalités souhaitées ou la proportion minimum souhaitée <code>prop=</code>, et en sélectionnant la variable avec la fonction <code>pull()</code> avant car elle doit être en format vecteur et non data.frame ; ou encore <code>fct_recode()</code> pour changer le niveau des facteurs ; <code>fct_other()</code> ; <code>fct_infreq()</code> et <code>fct_inorder()</code> ; etc.</p>
</div>
<div id="manipulation-des-variables-quantitatives" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Manipulation des variables quantitatives</h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="03-Manipulation-variables.html#cb35-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="uxjhrqwenr" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#uxjhrqwenr .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uxjhrqwenr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uxjhrqwenr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uxjhrqwenr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uxjhrqwenr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uxjhrqwenr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uxjhrqwenr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uxjhrqwenr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uxjhrqwenr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uxjhrqwenr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uxjhrqwenr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uxjhrqwenr .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#uxjhrqwenr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uxjhrqwenr .gt_from_md > :first-child {
  margin-top: 0;
}

#uxjhrqwenr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uxjhrqwenr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uxjhrqwenr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#uxjhrqwenr .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#uxjhrqwenr .gt_row_group_first td {
  border-top-width: 2px;
}

#uxjhrqwenr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uxjhrqwenr .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#uxjhrqwenr .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#uxjhrqwenr .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uxjhrqwenr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uxjhrqwenr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uxjhrqwenr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uxjhrqwenr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uxjhrqwenr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uxjhrqwenr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uxjhrqwenr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uxjhrqwenr .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uxjhrqwenr .gt_left {
  text-align: left;
}

#uxjhrqwenr .gt_center {
  text-align: center;
}

#uxjhrqwenr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uxjhrqwenr .gt_font_normal {
  font-weight: normal;
}

#uxjhrqwenr .gt_font_bold {
  font-weight: bold;
}

#uxjhrqwenr .gt_font_italic {
  font-style: italic;
}

#uxjhrqwenr .gt_super {
  font-size: 65%;
}

#uxjhrqwenr .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#uxjhrqwenr .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#uxjhrqwenr .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#uxjhrqwenr .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#uxjhrqwenr .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_2_ans</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">effectif_neobacheliers_passage</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_1_2_ans</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut_1_an</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">redoublement_en_l1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">passage_en_l2_1_an</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">reorientation_en_dut_2_ans</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td></tr>
    <tr><td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">10</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td></tr>
    <tr><td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_right">0</td></tr>
    <tr><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Nous avons 8 variables numériques : notre variable clé ‘effectif_neobacheliers_passage’, 3 variables renseignant de l’année de passage en L2 - ‘passage_en_l2_1_an’, ‘passage_en_l2_1_2_ans’, ‘passage_en_l2_2_ans’, 1 variable de ‘redoublement_en_l1’, et de nouveau 3 variables renseignant la réorientation en DUT selon l’année - ‘reorientation_en_dut’, ‘reorientation_en_dut_1_an’, ‘reorientation_en_dut_2_ans’. On voit par ailleurs qu’il y a des valeurs manquantes pour ces variables.</p>
<div id="détecter-et-visualiser-les-données-manquantes" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Détecter et “visualiser” les données manquantes</h3>
<p>Même si l’information nous avait été donnée par la fonction <code>summary()</code>, on peut également compter le nombre de valeurs manquantes <code>NA</code> pour chacune des variables avec la fonction <code>colSums()</code>, cela est plus synthétique que <code>summary()</code> qui nous donne d’autres informations par ailleurs :</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="03-Manipulation-variables.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ou en langage tidyverse sur les seules variables numériques :</span></span>
<span id="cb36-2"><a href="03-Manipulation-variables.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># PassageL1L2 %&gt;% filter_if(is.numeric) %&gt;% summarise_all(funs(sum(is.na(.))))</span></span>
<span id="cb36-3"><a href="03-Manipulation-variables.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(PassageL1L2))</span></code></pre></div>
<pre><code>           passage_en_l2_2_ans effectif_neobacheliers_passage 
                           959                            959 
        sect_disciplinaire_lib                           sexe 
                             0                              0 
                age_au_bac_lib          passage_en_l2_1_2_ans 
                             0                            959 
                 serie_bac_lib                     age_au_bac 
                             0                              0 
                 gd_discipline              gd_discipline_lib 
                             0                              0 
               mention_bac_lib                     discipline 
                             0                              0 
          reorientation_en_dut                 discipline_lib 
                           959                              0 
     reorientation_en_dut_1_an             redoublement_en_l1 
                           959                            959 
            passage_en_l2_1_an                cohorte_passage 
                           959                              0 
    reorientation_en_dut_2_ans             sect_disciplinaire 
                           959                              0 
                      sexe_lib                    mention_bac 
                             0                              0 
                     serie_bac                        age_bac 
                             0                              0 
                      type_bac                mention_bac_bis 
                             0                              0 </code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="03-Manipulation-variables.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pour les avoir en proportion :</span></span>
<span id="cb38-2"><a href="03-Manipulation-variables.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">colMeans</span>(<span class="fu">is.na</span>(PassageL1L2)<span class="sc">*</span><span class="dv">100</span>),<span class="dv">2</span>)</span></code></pre></div>
<pre><code>           passage_en_l2_2_ans effectif_neobacheliers_passage 
                         17.41                          17.41 
        sect_disciplinaire_lib                           sexe 
                          0.00                           0.00 
                age_au_bac_lib          passage_en_l2_1_2_ans 
                          0.00                          17.41 
                 serie_bac_lib                     age_au_bac 
                          0.00                           0.00 
                 gd_discipline              gd_discipline_lib 
                          0.00                           0.00 
               mention_bac_lib                     discipline 
                          0.00                           0.00 
          reorientation_en_dut                 discipline_lib 
                         17.41                           0.00 
     reorientation_en_dut_1_an             redoublement_en_l1 
                         17.41                          17.41 
            passage_en_l2_1_an                cohorte_passage 
                         17.41                           0.00 
    reorientation_en_dut_2_ans             sect_disciplinaire 
                         17.41                           0.00 
                      sexe_lib                    mention_bac 
                          0.00                           0.00 
                     serie_bac                        age_bac 
                          0.00                           0.00 
                      type_bac                mention_bac_bis 
                          0.00                           0.00 </code></pre>
<p>Différents packages existent pour détecter et visualiser les données manquantes. Un d’entre eux est le package <strong><code>naniar</code></strong> : quelques fonctions permettent d’abord de décrire la base selon ses valeurs manquantes.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="03-Manipulation-variables.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb40-2"><a href="03-Manipulation-variables.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">n_miss</span>(PassageL1L2) <span class="co">#nombre de cellules du tableau ou de n_ij d&#39;une matrice </span></span></code></pre></div>
<pre><code>[1] 7672</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="03-Manipulation-variables.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qui correspondent à des valeurs manquantes</span></span>
<span id="cb42-2"><a href="03-Manipulation-variables.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pct_miss</span>(PassageL1L2) <span class="co">#en proportion (déjà en %, sinon utiliser `prop_miss(PassageL1L2)`)</span></span></code></pre></div>
<pre><code>[1] 5.357243</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="03-Manipulation-variables.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">n_complete</span>(PassageL1L2) <span class="co">#nombre de cellules du tableau ou de n_ij d&#39;une matrice </span></span></code></pre></div>
<pre><code>[1] 135536</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="03-Manipulation-variables.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qui correspondent à des valeurs renseignées</span></span>
<span id="cb46-2"><a href="03-Manipulation-variables.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pct_complete</span>(PassageL1L2) <span class="co">#en proportion</span></span></code></pre></div>
<pre><code>[1] 94.64276</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="03-Manipulation-variables.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1er type de visualisation des valeurs manquantes</span></span>
<span id="cb48-2"><a href="03-Manipulation-variables.html#cb48-2" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span>  <span class="fu">gg_miss_var</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-22-1.svg" width="672" />
On peut également demander dans <code>gg_miss_var()</code> à ce que les valeurs soient en pourcentage, avec l’argument <code>show_pct=TRUE</code>.</p>
<p>On peut aussi réaliser des graphiques montrant le nombre de valeurs manquantes pour l’ensemble des variables numériques de la base, en fonction d’une autre variable de nature catégorielle. Cela est intéressant pour voir si certaines valeurs manquantes des variables se retrouvent davantage dans des modalités précises d’une autre variable. Par exemple, ici, selon la série au bac :</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="03-Manipulation-variables.html#cb49-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric), serie_bac_lib) <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="03-Manipulation-variables.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_miss_fct</span>(<span class="at">fct =</span> serie_bac_lib)</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-23-1.svg" width="672" />
On voit que les valeurs manquantes sont plus nombreuses pour la modalité “BAC L” et sont le moins nombreuses dans la modalité “BAC S” ; elles ne se distribuent ainsi pas de manière uniforme selon la variable de série du bac, en revanche comme on l’avait vu les proportions sont les mêmes quelle que soit la valeur manquante…</p>
<p>Plus généralement, la fonction <code>gg_miss_upset()</code> de ce package permet de visualiser des dépendances entre les valeurs manquantes des variables ; mais <em>ici</em> cela n’a pas grand intérêt en réalité car les valeurs manquantes sont présentes pour toutes les variables numériques aux mêmes cellules… Voici le code néanmoins.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="03-Manipulation-variables.html#cb50-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">gg_miss_upset</span>()</span></code></pre></div>
<p>toujours pour information, une autre fonction pour visualiser des combinaisons entre des variables comportant des valeurs manquantes est <code>aggr()</code> du package <strong><code>VIM</code></strong>. De même, voici le code :</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="03-Manipulation-variables.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(VIM)</span>
<span id="cb51-2"><a href="03-Manipulation-variables.html#cb51-2" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">aggr</span>(<span class="at">sortVar=</span><span class="cn">TRUE</span>, <span class="at">only.miss =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Enfin, il est possible d’appliquer la fonction <code>geom_miss_point()</code> à un ggplot, dans ce cas les valeurs manquantes de la ou des variables sont remplacées par des valeurs 10% plus basses que la valeur minimum observée des variables, et cela afin de les visualiser.</p>
<p>Il existe bien sûr bien d’autres packages, comme <strong><code>funModeling</code></strong>, <strong><code>Amelia</code></strong> et sa fonction <code>missmap()</code>, ou encore <strong><code>visdat</code></strong> et sa fonction <code>vis_miss()</code>, etc. D’autres packages comme <strong><code>VIM</code></strong> ou <strong><code>MICE</code></strong> permettent non seulement de visualiser ces valeurs manquantes mais de leur appliquer des techniques pour les “gérer”, c’est ce que l’on va voir maintenant en résumé.</p>
</div>
<div id="gérer-les-données-manquantes" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Gérer les données manquantes</h3>
<p>Il est bien de connaître le nombre et la proportion de valeurs manquantes dans nos données, comment ces dernières se répartissent entre elles, etc., mais il faut aussi comprendre quel impact elles peuvent avoir sur des analyses statistiques, de régressions ou autres algorithmes.</p>
<p>Dans une base de données tirée d’une enquête, les valeurs manquantes proviennent d’une non-réponse de la part de l’enquêté (que ce soit un individu ou une entreprise), cette non-réponse peut être “totale” (on a aucune donnée pour cet enquêté alors qu’il fait partie de l’échantillon) ou “partielle” (on a une partie des réponses mais pas à toutes les questions et donc des variables parfois avec des valeurs manquantes) ; ou bien encore d’une mauvaise saisie de l’information par l’enquêteur. La pondération, si elle est présente dans une enquête, peut permettre de corriger de cette non-réponse totale, voire partielle.</p>
<p>Les conséquences des valeurs manquantes dans une base de données dépend de plusieurs choses on doit se demander d’abord si l’information perdue aurait été pertinente et/ou aurait apporté un élément particulier/supplémentaire. Ensuite, la perte éventuelle d’information est-elle importante, en nombre/en proportion. Et enfin (et surtout), peut-elle créer un biais lors de l’estimation et précision du phénomène que l’on souhaite observer, décrire, analyser, etc. Selon l’importance de ces conséquences, il faut traiter ces valeurs manquantes, c’est-à-dire utiliser une procédure la plus adaptée possible selon le potentiel biais repéré.</p>
<p>Traditionnellement dans la littérature, on distingue 3 types de valeurs manquantes :</p>
<ul>
<li>valeur manquante entièrement due au hasard (‘MCAR’ pour Missing completely at random) : il n’y a pas de lien entre la valeur manquante pour une variable donnée et les autres variables, dit autrement la probabilité pour une variable qu’elle ait une valeur manquante est constante dans les données, elle ne diffère pas selon d’autres caractéristiques des individus ;</li>
<li>valeur manquante due au hasard (‘MAR’ pour Missing at random) : il y a un lien entre la valeur manquante pour une variable donnée et les valeurs observées d’autres variables, c’est-à-dire que la probabilité pour une variable qu’elle ait une valeur manquante dépend d’autres variables (mais de leurs valeurs observées), elle ne sera donc pas la même selon les individus ;</li>
<li>valeur ne manquant pas au hasard (‘NMAR’ pour Non missing at random) : il y a un lien entre la valeur manquante pour une variable et les valeurs manquantes/non observées d’autres variables. Ce sont celles qui risquent d’entraîner des biais importants si on ne les traite pas.</li>
</ul>
<p>Comment alors les gérer ? En pratique, il est d’usage lorsque la proportion de valeurs manquantes ne dépasse pas 5% des données de ne rien faire de particulier ou simplement de les supprimer. Sinon, on essaye d’appliquer plusieurs méthodes, simples ou plus complexes.</p>
<p>Dans le cas de valeurs manquantes entièrement dues au hasard (MCAR) et/ou d’une faible proportion des valeurs manquantes dans le total de la table de données, on peut décider de supprimer toutes les lignes qui contiennent au moins une valeur manquante, afin d’avoir une table de données complètes, on peut utiliser la fonction <code>na.omit()</code> ou <code>complete.cases()</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="03-Manipulation-variables.html#cb52-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2_sansNA <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(PassageL1L2)</span>
<span id="cb52-2"><a href="03-Manipulation-variables.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OU : </span></span>
<span id="cb52-3"><a href="03-Manipulation-variables.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># PassageL1L2_sansNA &lt;- PassageL1L2[complete.cases(PassageL1L2), ]</span></span>
<span id="cb52-4"><a href="03-Manipulation-variables.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(PassageL1L2_sansNA)</span></code></pre></div>
<pre><code> passage_en_l2_2_ans effectif_neobacheliers_passage
 Min.   :  0.000     Min.   :   1.00               
 1st Qu.:  0.000     1st Qu.:   2.00               
 Median :  0.000     Median :   6.00               
 Mean   :  4.316     Mean   :  35.12               
 3rd Qu.:  2.000     3rd Qu.:  23.00               
 Max.   :571.000     Max.   :2454.00               
                                                   
                        sect_disciplinaire_lib sexe    
 Sciences juridiques               : 186       1:2264  
 Langues et littératures étrangères: 170       2:2285  
 Psychologie                       : 169               
 Langues étrangères appliquées     : 168               
 STAPS                             : 168               
 Histoire                          : 167               
 (Other)                           :3521               
                   age_au_bac_lib passage_en_l2_1_2_ans
 A l&#39;heure ou en avance   :1750   Min.   :   0.00      
 En retard d&#39;un an        :1439   1st Qu.:   1.00      
 En retard de plus d&#39;un an:1004   Median :   2.00      
 Non pris en compte       : 356   Mean   :  18.63      
                                  3rd Qu.:   8.00      
                                  Max.   :1950.00      
                                                       
                     serie_bac_lib  age_au_bac gd_discipline
 BAC ES                     : 890   R0:1750    DSA  : 927   
 BAC L                      : 698   R1:1439    LLSH :2112   
 BAC professionnel          : 356   R2:1004    SANTE:   9   
 BAC S                      :1046   R4: 356    SI   :1333   
 BAC STMG                   : 694              STAPS: 168   
 BAC technologique hors STMG: 865                           
                                                            
                             gd_discipline_lib                 mention_bac_lib
 Droit, gestion, économie, AES        : 927    Assez bien              : 896  
 Lettres, langues et sciences humaines:2112    Bien                    : 670  
 Santé                                :   9    Inconnue                : 637  
 Sciences et sciences de l&#39;ingénieur  :1333    Passable deuxième groupe: 925  
 STAPS                                : 168    Passable premier groupe :1045  
                                               Très bien               : 376  
                                                                              
   discipline   reorientation_en_dut
 06     :1213   Min.   : 0.000      
 15     : 924   1st Qu.: 0.000      
 04     : 457   Median : 0.000      
 02     : 398   Mean   : 0.805      
 01     : 371   3rd Qu.: 0.000      
 05     : 359   Max.   :79.000      
 (Other): 827                       
                                discipline_lib reorientation_en_dut_1_an
 Sciences humaines et sociales         :1213   Min.   : 0.0000          
 Sciences fondamentales et applications: 924   1st Qu.: 0.0000          
 Lettres, sciences du langage, arts    : 457   Median : 0.0000          
 Sciences économiques, gestion         : 398   Mean   : 0.6186          
 Droit, sciences politiques            : 371   3rd Qu.: 0.0000          
 Langues                               : 359   Max.   :63.0000          
 (Other)                               : 827                            
 redoublement_en_l1 passage_en_l2_1_an cohorte_passage
 Min.   :   0.0     Min.   :   0.00    2014:4549      
 1st Qu.:   0.0     1st Qu.:   0.00                   
 Median :   1.0     Median :   1.00                   
 Mean   :  10.2     Mean   :  14.32                   
 3rd Qu.:   6.0     3rd Qu.:   6.00                   
 Max.   :1019.0     Max.   :1494.00                   
                                                      
 reorientation_en_dut_2_ans sect_disciplinaire  sexe_lib    mention_bac
 Min.   : 0.0000            36     : 186       Femme:2285   A: 376     
 1st Qu.: 0.0000            23     : 170       Homme:2264   B: 670     
 Median : 0.0000            32     : 169                    C: 896     
 Mean   : 0.1864            10     : 168                    D:1045     
 3rd Qu.: 0.0000            24     : 168                    P: 925     
 Max.   :21.0000            27     : 167                    Q: 637     
                            (Other):3521                               
 serie_bac                   age_bac                  type_bac   
 1: 698    A l&#39;heure ou en avance:1750   Bac général      :2634  
 2: 890    En retard             :2443   Bac professionnel: 356  
 3:1046    Non pris en compte    : 356   Bac technologique:1559  
 4: 694                                                          
 5: 865                                                          
 6: 356                                                          
                                                                 
   mention_bac_bis
 Très bien : 376  
 Bien      : 670  
 Assez bien: 896  
 Passable  :1970  
 Inconnue  : 637  
                  
                  </code></pre>
<p>On se retrouve avec une table de 4 549 observations (lignes), on a donc perdu 959 observations, soit 17.41% des observations de la table initiale.</p>
<p>Des techniques d’imputation simple peuvent également être utilisées. On peut par exemple remplacer les valeurs manquantes d’une variable quantitative par sa moyenne ou sa médiane, pour cela on peut utiliser la fonction <code>replace_na()</code> du package <strong><code>tidyr</code></strong>, ou <code>impute()</code> du package <strong><code>Hmisc</code></strong>, ou encore <code>na.aggregate()</code> du package <strong><code>zoo</code></strong> On donne ainsi une valeur “artificielle” pour remplacer la valeur manquante. Dans le cas de variables qualitatives, on peut, de même, imputer la modalité dominante (avec la fonction <code>mode()</code> du package <strong><code>Hmisc</code></strong> ; ou avec l’argument <code>mode=</code> du package <strong><code>zoo</code></strong> ). Par exemple, voici les codes pour remplacer les valeurs manquantes de la variable ‘passage_en_l2_2_ans’ par sa moyenne (ici on ne fait pas tourner ces codes) :</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="03-Manipulation-variables.html#cb54-1" aria-hidden="true" tabindex="-1"></a>PassageL1L2 <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="03-Manipulation-variables.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passage_en_l2_2_ans_bis=</span><span class="fu">replace_na</span>(passage_en_l2_2_ans,</span>
<span id="cb54-3"><a href="03-Manipulation-variables.html#cb54-3" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">mean</span>(passage_en_l2_2_ans, <span class="at">na.rm=</span><span class="cn">TRUE</span>))) </span>
<span id="cb54-4"><a href="03-Manipulation-variables.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="03-Manipulation-variables.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb54-6"><a href="03-Manipulation-variables.html#cb54-6" aria-hidden="true" tabindex="-1"></a>PassageL1L2<span class="sc">$</span>passage_en_l2_2_ans_bis <span class="ot">&lt;-</span> <span class="fu">with</span>(PassageL1L2,</span>
<span id="cb54-7"><a href="03-Manipulation-variables.html#cb54-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">impute</span>(passage_en_l2_2_ans, mean))</span>
<span id="cb54-8"><a href="03-Manipulation-variables.html#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="03-Manipulation-variables.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb54-10"><a href="03-Manipulation-variables.html#cb54-10" aria-hidden="true" tabindex="-1"></a>PassageL1L2<span class="sc">$</span>passage_en_l2_2_ans_bis <span class="ot">&lt;-</span> <span class="fu">na.aggregate</span>(PassageL1L2<span class="sc">$</span>passage_en_l2_2_ans,</span>
<span id="cb54-11"><a href="03-Manipulation-variables.html#cb54-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">FUN =</span> mean)</span></code></pre></div>
<p>On peut néanmoins réaliser ce type d’imputations simple de manière un petit peu plus subtile. Par exemple, la moyenne d’une variable peut différer selon d’autres variables. Dans ce cas, on va donc remplacer les valeurs manquantes de la variable selon la moyenne associée à chaque modalité de l’autre variable en ajoutant un <code>group_by()</code> avant la fonction <code>mutate()</code> si l’on utilise la fonction <code>replace_na()</code> par exemple.</p>
<p>Si on ne veut pas supprimer ces lignes d’observations et perdre ainsi d’autres informations (celles des variables pour lesquelles la valeur était renseignée pour cette même observation), on peut simplement créer une variable indicatrice de valeur manquante, habituellement ‘9’ ou ‘999’ pour des variables quantitatives, ou une modalité ‘Manquant’ ou ‘Missing’ pour des variables qualitatives.</p>
<p>Plusieurs autres méthodes existent également dans le cas de valeurs manquantes dues au hasard (MAR), en voici la liste pour information et sans prétention d’exhaustivité : - analyse pondérée pour des valeurs MAR qui consiste à calculer la probabilité qu’une observation soit complète et ensuite à affecter à chacune des observations complètes, un poids inversement proportionnel à cette probabilité ; - imputation de la dernière observation pour des données temporelles ; - imputation “hot-deck” qui consiste à remplacer la valeur manquante par une valeur observée chez un autre individu ayant les mêmes caractéristiques, ou “cold-deck” (même démarche que précédement, sauf que la valeur imputée vient d’une autre source) ; - imputation par le “plus proche voisin” en utilisant une fonction de distance basée sur plusieurs autres variables/caractéristiques de l’individu ; - imputation par un modèle de régression où l’on va remplacer la valeur manquante par une valeur prédite obtenue par régression sur données complètes de la variable comportant des valeurs manquantes.</p>
<p>Il y a aussi des techniques plus complextes d’imputation multiple qui consiste à créer plusieurs valeurs possibles pour une valeur manquante d’une variable, cela peut être adaptée là aussi lorsque les valeurs manquantes sont dues au hasard (MAR).</p>
<p>Vous trouverez de multiples ressources sur internet dans des ouvrages libres d’accès, ou un chapitre avec des exemples dans l’ouvrage principal support du cours (Husson, 2018).</p>
</div>
<div id="détecter-et-visualiser-les-données-aberrantes" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Détecter et “visualiser” les données aberrantes</h3>
<p>Pour cela, on va utiliser une autre base, téléchargée sur opendatasoft à partir de la fonction créée lors de la séance de M. Grasland. Cette base dont le nom est <em>“aides-entreprises-covid-19-france”</em> renseigne du nombre d’aides financières et de leur montant accordées aux entreprises françaises durant la crise du covid_19, selon notamment le secteur d’activité et la localisation géographique.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="03-Manipulation-variables.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rappel fonction (soit vous l&#39;avez encore dans votre environnement, soit</span></span>
<span id="cb55-2"><a href="03-Manipulation-variables.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">#vous l&#39;avez sauvegardé et dans ce cas il faut l&#39;appeler, soit vous devez </span></span>
<span id="cb55-3"><a href="03-Manipulation-variables.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">#refaire tourner les lignes de codes suivantes...)</span></span>
<span id="cb55-4"><a href="03-Manipulation-variables.html#cb55-4" aria-hidden="true" tabindex="-1"></a>get_data <span class="ot">&lt;-</span> <span class="cf">function</span>(idtab, rows, start) {</span>
<span id="cb55-5"><a href="03-Manipulation-variables.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://public.opendatasoft.com/api/records/1.0/search/?dataset=&quot;</span>,idtab,<span class="st">&quot;&amp;q=&amp;rows=&quot;</span>,rows,<span class="st">&quot;&amp;start=&quot;</span>,start,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb55-6"><a href="03-Manipulation-variables.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb55-7"><a href="03-Manipulation-variables.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>((x<span class="sc">$</span>content)))</span>
<span id="cb55-8"><a href="03-Manipulation-variables.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  don <span class="ot">&lt;-</span> y<span class="sc">$</span>records<span class="sc">$</span>fields</span>
<span id="cb55-9"><a href="03-Manipulation-variables.html#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(don)</span>
<span id="cb55-10"><a href="03-Manipulation-variables.html#cb55-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-11"><a href="03-Manipulation-variables.html#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="03-Manipulation-variables.html#cb55-12" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">get_data</span>(<span class="at">idtab =</span> <span class="st">&quot;aides-entreprises-covid-19-france&quot;</span>, </span>
<span id="cb55-13"><a href="03-Manipulation-variables.html#cb55-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">rows=</span><span class="dv">2000</span>,</span>
<span id="cb55-14"><a href="03-Manipulation-variables.html#cb55-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">start=</span><span class="dv">0</span>)</span>
<span id="cb55-15"><a href="03-Manipulation-variables.html#cb55-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-16"><a href="03-Manipulation-variables.html#cb55-16" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 1,680
Columns: 13
$ reg_code                &lt;int&gt; 84, 84, 84, 84, 27, 27, 27, 53, 53, 24, 24, 24~
$ geo_point_2d            &lt;list&gt; &lt;45.263906, 5.573978&gt;, &lt;45.728000, 4.164813&gt;,~
$ naf_section_name        &lt;chr&gt; &quot;Activités de services administratifs et de so~
$ nombre_entreprises      &lt;int&gt; 1775, 3034, 6577, 6772, 61, 45, 233, 1134, 395~
$ plan                    &lt;chr&gt; &quot;Fonds de solidarité&quot;, &quot;Fonds de solidarité&quot;, ~
$ financial_support_count &lt;int&gt; 8428, 8936, 19967, 16910, 366, 194, 971, 8170,~
$ reg_name                &lt;chr&gt; &quot;Auvergne-Rhône-Alpes&quot;, &quot;Auvergne-Rhône-Alpes&quot;~
$ naf_section_code        &lt;chr&gt; &quot;N&quot;, &quot;F&quot;, &quot;F&quot;, &quot;Q&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;R&quot;, &quot;G&quot;, &quot;~
$ total_meuros            &lt;dbl&gt; 36.512123, 13.922570, 33.039981, 23.111363, 0.~
$ dep_name                &lt;chr&gt; &quot;Isère&quot;, &quot;Loire&quot;, &quot;Rhône&quot;, &quot;Rhône&quot;, &quot;Nièvre&quot;, ~
$ iso3_code               &lt;chr&gt; &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX~
$ dep_code                &lt;chr&gt; &quot;38&quot;, &quot;42&quot;, &quot;69&quot;, &quot;69&quot;, &quot;58&quot;, &quot;89&quot;, &quot;89&quot;, &quot;29&quot;~
$ total                   &lt;dbl&gt; 36512123, 13922570, 33039981, 23111363, 736895~</code></pre>
<p>Comme la base précédente, ces données sont micro-agrégées, mais de manière plus simple : ici une observation est “juste” le croisement d’un secteur et d’un département, il faut donc sommer les variables pour avoir une idée des montants.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="03-Manipulation-variables.html#cb57-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">total_aides=</span><span class="fu">sum</span>(total),</span>
<span id="cb57-2"><a href="03-Manipulation-variables.html#cb57-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">total_aides_meuros=</span><span class="fu">sum</span>(total_meuros),</span>
<span id="cb57-3"><a href="03-Manipulation-variables.html#cb57-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">nb_totales_aides=</span><span class="fu">sum</span>(financial_support_count),</span>
<span id="cb57-4"><a href="03-Manipulation-variables.html#cb57-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">nb_totales_entre=</span><span class="fu">sum</span>(nombre_entreprises)) <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb57-5"><a href="03-Manipulation-variables.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&quot;total_aides&quot;</span>, <span class="st">&quot;total_aides_meuros&quot;</span>, <span class="st">&quot;nb_totales_aides&quot;</span>, </span>
<span id="cb57-6"><a href="03-Manipulation-variables.html#cb57-6" aria-hidden="true" tabindex="-1"></a>                         <span class="st">&quot;nb_totales_entre&quot;</span>), <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code></pre></div>
<div id="dnnhlneltp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#dnnhlneltp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dnnhlneltp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dnnhlneltp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dnnhlneltp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dnnhlneltp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dnnhlneltp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dnnhlneltp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dnnhlneltp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dnnhlneltp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dnnhlneltp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dnnhlneltp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dnnhlneltp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#dnnhlneltp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dnnhlneltp .gt_from_md > :first-child {
  margin-top: 0;
}

#dnnhlneltp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dnnhlneltp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dnnhlneltp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dnnhlneltp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dnnhlneltp .gt_row_group_first td {
  border-top-width: 2px;
}

#dnnhlneltp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dnnhlneltp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dnnhlneltp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dnnhlneltp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dnnhlneltp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dnnhlneltp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dnnhlneltp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dnnhlneltp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dnnhlneltp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dnnhlneltp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dnnhlneltp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dnnhlneltp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dnnhlneltp .gt_left {
  text-align: left;
}

#dnnhlneltp .gt_center {
  text-align: center;
}

#dnnhlneltp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dnnhlneltp .gt_font_normal {
  font-weight: normal;
}

#dnnhlneltp .gt_font_bold {
  font-weight: bold;
}

#dnnhlneltp .gt_font_italic {
  font-style: italic;
}

#dnnhlneltp .gt_super {
  font-size: 65%;
}

#dnnhlneltp .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#dnnhlneltp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dnnhlneltp .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#dnnhlneltp .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#dnnhlneltp .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">total_aides</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">total_aides_meuros</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">nb_totales_aides</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">nb_totales_entre</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">35 358 264 997</td>
<td class="gt_row gt_right">35 358</td>
<td class="gt_row gt_right">10 520 869</td>
<td class="gt_row gt_right">2 016 007</td></tr>
  </tbody>
  
  
</table>
</div>
<p>On veut plus précisément étudier dans cette sous-section les possibles valeurs aberrantes. On peut alors sortir les valeurs maximum pour chacune de ces variables.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="03-Manipulation-variables.html#cb58-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">aides_max=</span><span class="fu">max</span>(total), <span class="at">aides_meuros_max=</span><span class="fu">max</span>(total_meuros),</span>
<span id="cb58-2"><a href="03-Manipulation-variables.html#cb58-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">nb_max_aides=</span><span class="fu">max</span>(financial_support_count),</span>
<span id="cb58-3"><a href="03-Manipulation-variables.html#cb58-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">nb_max_entre=</span><span class="fu">max</span>(nombre_entreprises)) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()  <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="03-Manipulation-variables.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code></pre></div>
<div id="cqyvapopto" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#cqyvapopto .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cqyvapopto .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cqyvapopto .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cqyvapopto .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cqyvapopto .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cqyvapopto .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cqyvapopto .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cqyvapopto .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cqyvapopto .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cqyvapopto .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cqyvapopto .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cqyvapopto .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#cqyvapopto .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cqyvapopto .gt_from_md > :first-child {
  margin-top: 0;
}

#cqyvapopto .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cqyvapopto .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cqyvapopto .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cqyvapopto .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cqyvapopto .gt_row_group_first td {
  border-top-width: 2px;
}

#cqyvapopto .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cqyvapopto .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cqyvapopto .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cqyvapopto .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cqyvapopto .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cqyvapopto .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cqyvapopto .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cqyvapopto .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cqyvapopto .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cqyvapopto .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cqyvapopto .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cqyvapopto .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cqyvapopto .gt_left {
  text-align: left;
}

#cqyvapopto .gt_center {
  text-align: center;
}

#cqyvapopto .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cqyvapopto .gt_font_normal {
  font-weight: normal;
}

#cqyvapopto .gt_font_bold {
  font-weight: bold;
}

#cqyvapopto .gt_font_italic {
  font-style: italic;
}

#cqyvapopto .gt_super {
  font-size: 65%;
}

#cqyvapopto .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#cqyvapopto .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cqyvapopto .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#cqyvapopto .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#cqyvapopto .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">aides_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">aides_meuros_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">nb_max_aides</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">nb_max_entre</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1641182219</td>
<td class="gt_row gt_right">1 641</td>
<td class="gt_row gt_right">183 570</td>
<td class="gt_row gt_right">35 372</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Ou faire quelques graphs sur la variable du montant total des aides en milliers d’euros “total_meuros” pour mieux visualiser de possibles valeurs aberrantes, de manière générale avec un histogramme ou ventilées par région avec des “boîtes à moustache” :</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="03-Manipulation-variables.html#cb59-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">150</span>)</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-31-1.svg" width="672" /></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="03-Manipulation-variables.html#cb60-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> reg_name, <span class="at">y =</span> total_meuros) <span class="sc">+</span>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb60-2"><a href="03-Manipulation-variables.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-31-2.svg" width="672" /></p>
<p>On voit en effet quelques points qui semblent des valeurs aberrantes ou “outliers” ; parfois, c’est à tel point qu’on n’arrive même pas à distinguer les différentes valeurs de la distribution marquées par le Boxplot et les boxplot sont ramassées. Pour rappel, dans un boxplot, par défaut un point est affiché comme aberrant s’il est en dehors de l’intervalle suivant : <span class="math inline">\(I=[Q_{1}−1.5×IQR ; Q_{3}+1.5×IQR]\)</span>, <code>IQR</code> étant l’intervalle interquartile donc la différence entre Q1 et Q3.</p>
<p>Mais s’agit-il de “vraies” valeurs aberrantes ? Combien d’observations concernent-elles ? La fonction <code>boxplot.stats()</code> permet de récupérer les valeurs des observations indiquées comme aberrantes, comme cela on peut créer ensuite une variable indiquant si oui ou non l’observation a une valeur “aberrante”. Faisons-cela pour la variable “total_meuros” par exemple.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="03-Manipulation-variables.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#on récupère les valeurs de la partie &#39;out&#39; des sorties de la fonction, qui</span></span>
<span id="cb61-2"><a href="03-Manipulation-variables.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co">#correspondent aux valeurs de tout point de données qui se situe au-delà</span></span>
<span id="cb61-3"><a href="03-Manipulation-variables.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#des extrêmes de la boxplot</span></span>
<span id="cb61-4"><a href="03-Manipulation-variables.html#cb61-4" aria-hidden="true" tabindex="-1"></a>nb_outliers <span class="ot">&lt;-</span> <span class="fu">boxplot.stats</span>(dt_aidesCovid<span class="sc">$</span>total_meuros)<span class="sc">$</span>out </span>
<span id="cb61-5"><a href="03-Manipulation-variables.html#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="03-Manipulation-variables.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">#on crée une variable dans notre table d&#39;&quot;identification&quot; de ces outliers</span></span>
<span id="cb61-7"><a href="03-Manipulation-variables.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">#avec comme modalité intiale/par défaut &quot;Faux&quot;</span></span>
<span id="cb61-8"><a href="03-Manipulation-variables.html#cb61-8" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid<span class="sc">$</span>total_meuros_outliers <span class="ot">&lt;-</span> <span class="st">&quot;Faux&quot;</span> </span>
<span id="cb61-9"><a href="03-Manipulation-variables.html#cb61-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-10"><a href="03-Manipulation-variables.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">#on lui indique la modalité &quot;vraie&quot; si l&#39;observation a une valeur &quot;outliers&quot; </span></span>
<span id="cb61-11"><a href="03-Manipulation-variables.html#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="co">#pour cette variable</span></span>
<span id="cb61-12"><a href="03-Manipulation-variables.html#cb61-12" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid<span class="sc">$</span>total_meuros_outliers[dt_aidesCovid<span class="sc">$</span>total_meuros <span class="sc">%in%</span> <span class="fu">c</span>(nb_outliers)] <span class="ot">&lt;-</span> <span class="st">&quot;Vrai&quot;</span> </span>
<span id="cb61-13"><a href="03-Manipulation-variables.html#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="03-Manipulation-variables.html#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co">#puis on regarde la répartition</span></span>
<span id="cb61-15"><a href="03-Manipulation-variables.html#cb61-15" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(total_meuros_outliers) <span class="sc">%&gt;%</span> </span>
<span id="cb61-16"><a href="03-Manipulation-variables.html#cb61-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 3 x 3
  total_meuros_outliers     n percent
  &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;  
1 Faux                   1485 88.4%  
2 Vrai                    195 11.6%  
3 Total                  1680 -      </code></pre>
<p>On y lit que pour cette variable, il y aurait près de 11,6% de valeurs aberrantes telles qu’indiquées par le boxplot, cela fait beaucoup ! On peut regarder plus précisément à quelles observations elles correspondent et à quel montant.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="03-Manipulation-variables.html#cb63-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">filter</span>(total_meuros_outliers<span class="sc">==</span><span class="st">&#39;Vrai&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="03-Manipulation-variables.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(total_meuros, naf_section_name, dep_name)  <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="03-Manipulation-variables.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_meuros)) <span class="sc">%&gt;%</span>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="ofnbgilrzn" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ofnbgilrzn .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ofnbgilrzn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ofnbgilrzn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ofnbgilrzn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ofnbgilrzn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofnbgilrzn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ofnbgilrzn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ofnbgilrzn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ofnbgilrzn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ofnbgilrzn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ofnbgilrzn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ofnbgilrzn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ofnbgilrzn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ofnbgilrzn .gt_from_md > :first-child {
  margin-top: 0;
}

#ofnbgilrzn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ofnbgilrzn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ofnbgilrzn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ofnbgilrzn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ofnbgilrzn .gt_row_group_first td {
  border-top-width: 2px;
}

#ofnbgilrzn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofnbgilrzn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ofnbgilrzn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ofnbgilrzn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofnbgilrzn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofnbgilrzn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ofnbgilrzn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ofnbgilrzn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofnbgilrzn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ofnbgilrzn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofnbgilrzn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ofnbgilrzn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofnbgilrzn .gt_left {
  text-align: left;
}

#ofnbgilrzn .gt_center {
  text-align: center;
}

#ofnbgilrzn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ofnbgilrzn .gt_font_normal {
  font-weight: normal;
}

#ofnbgilrzn .gt_font_bold {
  font-weight: bold;
}

#ofnbgilrzn .gt_font_italic {
  font-style: italic;
}

#ofnbgilrzn .gt_super {
  font-size: 65%;
}

#ofnbgilrzn .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ofnbgilrzn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ofnbgilrzn .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ofnbgilrzn .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ofnbgilrzn .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">total_meuros</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">naf_section_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">dep_name</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1641.1822</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Paris</td></tr>
    <tr><td class="gt_row gt_right">554.4675</td>
<td class="gt_row gt_left">Commerce</td>
<td class="gt_row gt_left">Paris</td></tr>
    <tr><td class="gt_row gt_right">549.1241</td>
<td class="gt_row gt_left">Activités spécialisées, scientifiques et techniques</td>
<td class="gt_row gt_left">Paris</td></tr>
    <tr><td class="gt_row gt_right">416.7967</td>
<td class="gt_row gt_left">Activités de services administratifs et de soutien</td>
<td class="gt_row gt_left">Paris</td></tr>
    <tr><td class="gt_row gt_right">414.8821</td>
<td class="gt_row gt_left">Arts, spectacles et activités récréatives</td>
<td class="gt_row gt_left">Paris</td></tr>
    <tr><td class="gt_row gt_right">413.4086</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Alpes-Maritimes</td></tr>
    <tr><td class="gt_row gt_right">409.7685</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Bouches-du-Rhône</td></tr>
    <tr><td class="gt_row gt_right">355.9510</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Rhône</td></tr>
    <tr><td class="gt_row gt_right">333.9413</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Nord</td></tr>
    <tr><td class="gt_row gt_right">292.2122</td>
<td class="gt_row gt_left">Hébergement et restauration</td>
<td class="gt_row gt_left">Gironde</td></tr>
  </tbody>
  
  
</table>
</div>
<p>OK donc on voit que cette procédure attribue des valeurs aberrantes à des observations qui seraient intéressants néanmoins à conserver, donc attention à identifier les valeurs dites aberrantes, éventuellement avec plusieurs méthodes (cf. ci-dessous) et surtout à les comprendre ensuite, il ne s’agit pas juste de les identifier pour les exclure ensuite des analyses.</p>
<p>Il existe en effet bien d’autres méthodes (méthode basée sur les percentiles ; méthode de Hampel), ainsi que des tests : par exemple, le package <code>outliers</code> vous permet de tester si une valeur (max ou min) est bien une valeur aberrante avec la fonction <code>grubbs.test()</code> (attention bis : à utiliser avec grande attention et beaucoup de parcimonie), ou avec le package <code>EnvStats</code> et la fonction <code>rosnerTest()</code> pour détecter plusieurs “outliers” à la fois.</p>
<p>Pour gérer ces variables aberrantes, on peut les supprimer bien sûr si l’on est sûr que la valeur de la variable n’est pas “normale”, par exemple si on a une variable de salaire avec des modalités inférieures à 0, oui dans ce cas ce sont des mauvais outliers (et d’ailleurs peut-être même pas identifiés comme tel statistiquement) et on peut les supprimer ; de même pour des variables de résultats économiques, on va souvent élaguer la distribution en retirant les 1% (par exemple) du bas et du haut de la distribution pour supprimer des potentiels outliers.<br />
Sinon, on les isole en créant une variable dichotomique “0/1” ou “Faux/Vrai” ; ou on crée une variable qualitative avec plusieurs catégories.</p>
<p>Dans les graphiques, en particulier les boîtes à moustache, on peut les supprimer du graphique et mettre une échelle plus réduite pour que celui-ci soit plus lisible, mais en précisant bien dans la légende que certaines valeurs ne sont pas visibles car enlevées.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="03-Manipulation-variables.html#cb64-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> reg_name, <span class="at">y =</span> total_meuros) <span class="sc">+</span> </span>
<span id="cb64-2"><a href="03-Manipulation-variables.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">175</span>)) <span class="sc">+</span></span>
<span id="cb64-3"><a href="03-Manipulation-variables.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution des aides financières en millions d&#39;euros, </span></span>
<span id="cb64-4"><a href="03-Manipulation-variables.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="st">selon la région&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>, <span class="at">x=</span><span class="st">&quot;Région&quot;</span>, </span>
<span id="cb64-5"><a href="03-Manipulation-variables.html#cb64-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Rq : les valeurs au-delà de 175 millions d&#39;euros ne sont pas affichées sur le graphique.&quot;</span>) <span class="sc">+</span></span>
<span id="cb64-6"><a href="03-Manipulation-variables.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-34-1.svg" width="672" /></p>
</div>
<div id="découper-en-classes-une-variable-quantitative" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Découper en classes une variable quantitative</h3>
<p>On peut enfin découper en classes une variable quantitative et en faire donc une variable qualitative. On utilise pour cela la fonction <code>cut()</code> du langage de base de <code>R</code>. On peut par exemple découper la variable selon les principaux indicateurs de distribution.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="03-Manipulation-variables.html#cb65-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">get_summary_stats</span>(total_meuros)</span></code></pre></div>
<pre><code># A tibble: 1 x 13
  variable        n   min   max median    q1    q3   iqr   mad  mean    sd    se
  &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 total_meur~  1680 0.006 1641.   5.99  1.83  17.6  15.8  7.54  21.0  60.3  1.47
# ... with 1 more variable: ci &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="03-Manipulation-variables.html#cb67-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid<span class="sc">$</span>total_meuros_cat <span class="ot">&lt;-</span> <span class="fu">cut</span>(dt_aidesCovid<span class="sc">$</span>total_meuros,  </span>
<span id="cb67-2"><a href="03-Manipulation-variables.html#cb67-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,</span>
<span id="cb67-3"><a href="03-Manipulation-variables.html#cb67-3" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">quantile</span>(dt_aidesCovid<span class="sc">$</span>total_meuros,<span class="fl">0.25</span>), </span>
<span id="cb67-4"><a href="03-Manipulation-variables.html#cb67-4" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">mean</span>(dt_aidesCovid<span class="sc">$</span>total_meuros), </span>
<span id="cb67-5"><a href="03-Manipulation-variables.html#cb67-5" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">max</span>(dt_aidesCovid<span class="sc">$</span>total_meuros)))</span>
<span id="cb67-6"><a href="03-Manipulation-variables.html#cb67-6" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(total_meuros_cat) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="xnbvvtqfsl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xnbvvtqfsl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xnbvvtqfsl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xnbvvtqfsl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xnbvvtqfsl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xnbvvtqfsl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnbvvtqfsl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xnbvvtqfsl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xnbvvtqfsl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xnbvvtqfsl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xnbvvtqfsl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xnbvvtqfsl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xnbvvtqfsl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xnbvvtqfsl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xnbvvtqfsl .gt_from_md > :first-child {
  margin-top: 0;
}

#xnbvvtqfsl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xnbvvtqfsl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xnbvvtqfsl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xnbvvtqfsl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xnbvvtqfsl .gt_row_group_first td {
  border-top-width: 2px;
}

#xnbvvtqfsl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xnbvvtqfsl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xnbvvtqfsl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xnbvvtqfsl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnbvvtqfsl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xnbvvtqfsl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xnbvvtqfsl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xnbvvtqfsl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnbvvtqfsl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xnbvvtqfsl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xnbvvtqfsl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xnbvvtqfsl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xnbvvtqfsl .gt_left {
  text-align: left;
}

#xnbvvtqfsl .gt_center {
  text-align: center;
}

#xnbvvtqfsl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xnbvvtqfsl .gt_font_normal {
  font-weight: normal;
}

#xnbvvtqfsl .gt_font_bold {
  font-weight: bold;
}

#xnbvvtqfsl .gt_font_italic {
  font-style: italic;
}

#xnbvvtqfsl .gt_super {
  font-size: 65%;
}

#xnbvvtqfsl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#xnbvvtqfsl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xnbvvtqfsl .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#xnbvvtqfsl .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#xnbvvtqfsl .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">total_meuros_cat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">(0,1.83]</td>
<td class="gt_row gt_right">420</td>
<td class="gt_row gt_left">25.0%</td></tr>
    <tr><td class="gt_row gt_left">(1.83,21]</td>
<td class="gt_row gt_right">901</td>
<td class="gt_row gt_left">53.6%</td></tr>
    <tr><td class="gt_row gt_left">(21,1.64e+03]</td>
<td class="gt_row gt_right">359</td>
<td class="gt_row gt_left">21.4%</td></tr>
    <tr><td class="gt_row gt_left">Total</td>
<td class="gt_row gt_right">1680</td>
<td class="gt_row gt_left">-</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="03-Manipulation-variables.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#PassageL1L2 %&gt;% group_by(reor_dut_binaire) %&gt;%  summarise(som = sum(effectif_neobacheliers_passage, na.rm=T))</span></span></code></pre></div>
<p>On a une classe majoritaire (du Q1 à la moyenne), mais cela nous permet de distinguer 2 classes pour lesquelles le montant des aides financières est très faible ou au contraire très élevé.</p>
<p>A noter que si la variable quantitative en question a des valeurs manquantes, il faudra utiliser la fonction <code>fancycut()</code> ou <code>wafflecut()</code> du package <strong><code>fancycut</code></strong>, l’inconvénient est que cela nous oblige à indiquer les valeurs des différents indicateurs de la distribution. Le code serait alors le suivant :</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="03-Manipulation-variables.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fancycut)</span>
<span id="cb69-2"><a href="03-Manipulation-variables.html#cb69-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid<span class="sc">$</span>total_meuros_cat1 <span class="ot">&lt;-</span> <span class="fu">fancycut</span>(dt_aidesCovid<span class="sc">$</span>total_meuros, <span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="st">&#39;(0,1.83]&#39;</span>, </span>
<span id="cb69-3"><a href="03-Manipulation-variables.html#cb69-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="st">&#39;(1.83,21]&#39;</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="st">&#39;(21,1.64e+03]&#39;</span>, </span>
<span id="cb69-4"><a href="03-Manipulation-variables.html#cb69-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">na.bucket=</span><span class="st">&#39;Manquant&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="03-Manipulation-variables.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On enregistre la table de données pour l&#39;utiliser ultérieurement</span></span>
<span id="cb70-2"><a href="03-Manipulation-variables.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> PassageL1L2,</span>
<span id="cb70-3"><a href="03-Manipulation-variables.html#cb70-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;data/PassageL1L2.Rdata&quot;</span>)</span>
<span id="cb70-4"><a href="03-Manipulation-variables.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> dt_aidesCovid,</span>
<span id="cb70-5"><a href="03-Manipulation-variables.html#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;data/dt_aidesCovid.Rdata&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>






<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="02-Manipulation-base.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/github.io-Data-Mining-Seance1/master/03-Manipulation-variables.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
